'\"macro stdmacro
.TH MAILX 1
.SH NAME
mailx \- send and receive mail
.SH SYNOPSIS
Send Mode:
.sp
.B mailx
[
.B \-v
]
[
.B \-s
.IR subject
]
[
.IR address ...
]
.sp
Receive Mode:
.sp
.B mailx
.B \-e
.br
.B mailx
[
.B \-HiNn
]
[
.B \-F
]
[
.B \-u
.IR user
]
.br
.B mailx
.B \-f
[
.B \-HiNn
]
[
.B \-F
]
[
.IR file
]
.SH INTRODUCTION
.I mailx
is an interactive mail processing system, which has
a command syntax reminiscent of
.I ed
with lines replaced by messages.
.PP
Send Mode can be used by applications or users to send messages from 
the text in standard input.  Receive Mode is more oriented to interactive 
users.   Mail can be  read and sent in this interactive mode.
.PP
When reading mail,
.I mailx
provides commands to facilitate saving, deleting and responding to messages. 
When sending mail,
.I mailx
allows editing, reviewing and other modification of  the message as it is 
entered.
.PP
Incoming mail is stored in one or more unspecified locations for each user, 
collectively called the system mailbox for that user.  When
.I mailx
is invoked in Receive Mode, the system mailbox is the default place to find 
them.  As messages are read, they will be marked to be moved to a secondary 
file for storage, unless specific action is taken.  This secondary file is 
called the 
.B \f3mbox\f1
and is normally located in the 
.B HOME
directory of the user.  When the
.B \-f
option is used to read mail messages from secondary files, messages will be 
retained in those files unless specifically removed.  All three of these 
locations system mailbox, 
.B \f3mbox\f1
and secondary file are referred to in this section as simply ``mailboxes,'' 
unless more specific identification is required.
.PP
.I mailx
conforms to the X/Open 
.I "Commands and Utilities Specifications Issue 4, Version 2"
document.
.PP
.SH OPTIONS
.TP 5
.B \-e
Test  for the presence of mail in the system mailbox.  The
.I mailx
utility will write nothing and exit with a successful
return code if there is mail to read.
.TP
.B \-f
Read messages from the file named by the
.I file
operand instead of the system mailbox.
.TP
.B \-F
Record the message in a file named after the first recipient.
The name is the login-name portion of the address found first on the To: 
line in the mail header. Overrides the 
.B record
variable, if set.
.TP
.B \-H
Write a header summary only.
.TP
.B \-v
flag puts
.I mailx
into verbose mode; the details of
delivery are displayed on the users terminal.
.TP
.B \-i
flag causes tty interrupt signals to be ignored. This is
particularly useful when using
.I mailx
on noisy phone lines.
.TP
.B \-n
flag inhibits the reading of /usr/lib/Mail.rc.
.TP
.B \-N
Do not write an initial header summary.
.TP
.B \-u
Read the system mailbox of the login name
.I user.
This will only be successful if the invoking user has the appropriate 
privileges to read the system mailbox of that user.
.PP
.I "Sending mail.\ "
To send a message to one or more other people,
.I mailx
can be invoked with arguments which are the names of people to
send to.  You are then expected to type in your message, followed
by an \s-2EOT\s0 (control\-D) at the beginning of a line.
A subject may be specified on the command line by using the
.B \-s
flag. (Only the first argument after the
.B \-s
flag is used as a subject; be careful to quote subjects
containing spaces.)
The section below, labeled
.I "Replying to or originating mail,"
describes some features of
.I mailx
available to help you compose your letter.
.PP
.I "Reading mail.\ "
In normal usage
.I mailx
is given no arguments.  It checks your mail out of your
system mailbox, then
prints out a one line summary of each message there.
The current message is initially the first message (numbered 1)
and can be printed using the
.B print
command (which can be abbreviated \f3p\f1).
You can move among the messages much as you move between lines in
.IR ed ,
with the commands `+' and `\-' moving backwards and forwards, and
simple numbers.
.PP
.I "Disposing of mail.\ "
After examining a message you can
.B delete
(\f3d\f1)
the message or
.B reply
(\f3r\f1)
to it.
Deletion causes the
.I mailx
program to forget about the message.
This is not irreversible; the message can be
.B undeleted
(\f3u\f1)
by giving its number, or the
.I mailx
session can be aborted by giving the
.B exit
(\f3x\f1)
command.
Deleted messages will, however, usually disappear never to be seen again.
.PP
.I "Specifying messages.\ "
Commands such as
.B print
.B delete
and
.B from
can be given a list of messages as an argument in order
to apply
to a number of messages at once.
This list of messages can be specified in one of three mutually
exclusive ways: 
.PP
First, messages may be specified by message number.
Thus ``delete 1 2'' deletes messages 1 and 2, while ``delete 1\-5''
deletes messages 1 through 5.
In conjunction with message numbers, the following special names may
also be used:  The special name `^' addresses the first message, and
`$' addresses the last message.
.PP
Second, messages may be specified by sender's name,
sender's name substring or subject substring.
You may supply a list of whitespace separated
message senders' names and/or message senders' names substrings and/or
message subject substrings
to commands accepting message lists.
A message sender's name is a string
of characters which must begin with an alphabetic character,
and must match exactly the sender's name
in the target message.
A message sender's name substring is a `?' character immediately
followed (no whitespace) by a string of characters and
specifies all messages with a sender's name containing the
character string as a substring.
A message subject is a `/' character immediately
followed (no whitespace) by a string of characters and
specifies all messages with a subject line containing
the character string as a substring.
Examples: ``from foo'' lists all messages
from ``foo'' exactly, while ``from /foo'' lists all messages with substring
``foo'' in their subject lines and ``from ?foo'' lists all messages
with substring foo in their senders' names.
.PP
Third, the special name `*' can be used to address all messages. 
Thus the command
.B top
which prints the first few lines of a message could be used as
``top *'' to print the first few lines of all messages.
.PP
.I "Replying to or originating mail.\ "
You can use the
.B reply
command to
set up a response to a message, sending it back to the
person who it was from.
Text you then type in, up to an end-of-file,
defines the contents of the message.
While you are composing a message,
.I mailx
treats lines beginning with the character `~' specially.
For instance, typing ``~m'' (alone on a line) will place a copy
of the current message into the response right shifting it by a tabstop.
Other escapes will set up subject fields, add and delete recipients
to the message and allow you to escape to an editor to revise the
message or to a shell to run some commands.  (These options
are given in the summary below.)
.PP
.I "Incorporating new mail.\ "
You can read new mail which has arrived during the session by using the
.B folder
command to reread your system mailbox.  A convenient way to do
this is to type the command ``folder %'' or
.br
``fo %''.
This will have
the same effect as typing the
.B quit
command
to end the session (see below) and then re-invoking
.I mailx
with no arguments.
.PP
.I "Ending a mail processing session.\ "
You can end a
.I mailx
session with the
.B quit
(\f3q\f1)
or
.B exit
(\f3x\f1)
commands.
If you use the
.B quit
command, messages which have been examined will be moved to your
.I mbox
file, messages which have been deleted are discarded, and
unexamined messages are copied back to your system mailbox.
If you have used the
.B \-f
option to read in the contents of your
.I mbox
(or other file)
for processing; when you
.BR quit ,
.I mailx
writes undeleted messages back to this file.
In the event that
.I mailx
cannot rewrite
.I mbox
(or other file) to write back messages,
.I mailx
will print a message indicating the trouble and will not exit.
This gives you the option of trying to set things right.  If
things cannot be set right, you can escape
.I mailx
by using the
.B exit
command described below.
.PP
If you use the
.B exit
command,
.I mailx
exits without making any modifications to the mail file.  Deleted
messages will not be discarded.
.PP
.I "Personal and systemwide distribution lists.\ "
It is also possible to create a personal distribution lists so that,
for instance, you can send mail to ``cohorts'' and have it go
to a group of people.
Such lists can be defined by placing a line like
.IP
alias cohorts bill ozalp jkf mark kridle@ucbcory
.PP
in the file \&.mailrc in your home directory.
The current list of such aliases can be displayed with the
.B alias
.B (a)
command in
.IR mailx .
System wide distribution lists can be created by editing
/usr/lib/Mail.rc (which may contain other
.I mailx
commands such as set).
An alias of the form
.IP
alias bob sauron!bob
.PP
will be ignored on the sauron system so that the same /usr/lib/Mail.rc or
~/.mailrc file may be used on several machines with correct behavior.
.PP
You may include a pathname in the distribution list, and
.I mailx
will record outgoing messages in that file.
It is preferable to place pathnames and folders in the ``Bcc:'' list,
to prevent recipients from replying to a nonexistent filename.
.PP
.I "Forwarding mail.\ "
Forwarding of mail is done via the
.I \&.forward
file mechanism of the
.IR sendmail (1M)
program.  Please see the
.IR sendmail (1M)
manual page for details.
.PP
.I "Signatures.\ "
A signature line (or lines) may be automatically appended to the end of
all outgoing letters by placing the text in the file \&.lsignature,
\&.rsignature, or \&.signature in your home directory.
The file \&.lsignature is used for local mail, that is the recipients specified
do not have `!' or `@' in their names (prior to aliasing) and the file
\&.rsignature is used for remote mail.
If the appropriate one of these does not exist, \&.signature is used for
compatibility with previous versions of
.IR mailx\^ .
.PP
.I mailx
has a number of options which can be set in the
.I \&.mailrc
file to alter its behavior; thus ``set askcc'' enables the ``askcc''
feature.  (These options are summarized below.)
.SH SUMMARY
.PP
Each command is typed on a line by itself, and may take arguments
following the command word.  The command need not be typed in its
entirety \- the first command which matches the typed prefix is used.
For commands which take message lists as arguments, if no message
list is given, then the next message forward which satisfies the
command's requirements is used.  If there are no messages forward of
the current message, the search proceeds backwards, and if there are no
good messages at all,
.I mailx
types ``No applicable messages'' and
aborts the command.
.TP 12n
.B !
Executes the \s-2UNIX\s0 shell command which follows.
.TP
.B \-
Goes to the previous message and prints it out.
.TP
.B =
Prints the current message number.
.TP
.B ?
If the
.B qmarkishelp
option is set (see below), this is a synonym for the
.B help
command.  Otherwise,
.B ?
indicates the start of a sender's name substring message list
(see ``Specifying messages'' above).
.TP
.B More
(\f3M\f1)
Like
.B Print
but invokes your pager.
.TP
.B New
(\f3N\f1)
Identical to the
.B unread
command.
.TP
.B Page
(\f3Pa\f1)
A synonym for
.B More.
.TP
.B Print
(\f3P\f1)
Like
.B print
but also prints out ignored header fields. See also
.B print
and
.B ignore.
.TP
.B Reply
(\f3R\f1)
Reply to originator. Does not reply to other
recipients of the original message.
.TP
.B Respond
(\f3Res\f1) A synonym for
.B Reply
.TP
.B Type
(\f3T\f1)
Identical to the
.B Print
command.
.TP
.B Unread
(\f3U\f1)
Identical to the
.B unread
command.
.TP
.B alias
(\f3a\f1) With no arguments, prints out all currently-defined aliases.  With one
argument, prints out that alias.  With more than one argument, creates
an new or changes an on old alias.
.TP
.B alternates
(\f3alt\f1)
The
.B alternates
command is useful if you have accounts on several machines.
It can be used to inform
.I mailx
that the listed addresses are really you. When you
.B reply
to messages,
.I mailx
will not send a copy of the message to any of the addresses
listed on the
.I alternates
list. If the
.B alternates
command is given with no argument, the current set of alternate
names is displayed.
.TP
.B chdir
(\f3cd\f1) Changes the user's working directory to that specified, if given.  
If no directory is given, then changes to the contents of \f4HOME\f1 will be 
used.
.TP
.B copy
(\f3c\f1)
The
.B copy
command does the same thing that
.B save 
does, except that it does not mark the messages it
is used on for deletion when you quit.
.TP
.B Copy
(\f3C\f1)
The
.B Copy
command does the same thing that
.B copy 
does, except that it uses the file named from the author of the message to be
saved.
.TP
.B delete
(\f3d\f1) Takes a list of messages as argument and marks them all as deleted.
Deleted messages will not be saved in
.IR mbox ,
nor will they be available for most other commands.  
.TP
.B discard
(\f3di\f1) A synonym for
.BR ignore
(\f3ig\f1).
.TP
.B dp
(also \f3dt\f1) Deletes the current message and prints the next message.
If there is no next message, 
.I mailx
says ``at EOF.''
.TP
.B echo
(\f3ec\f1) Takes a string and echos it to standard output.
.TP
.B edit
(\f3e\f1) Takes a list of messages and points the text editor at each one in
turn.  On return from the editor, the message is read back in.
.TP
.B exit
(\f3ex\f1 or \f3x\f1) Effects an immediate return to the Shell without
modifying the user's system mailbox, his
.I mbox
file, or his edit file in
.BR \-f .
.TP
.B file
(\f3fi\f1)
The same as
.BR folder .
.TP
.B folder
(\f3fold\f1)
The
.B folder
command switches to a new mail file or folder. With no
arguments, it tells you which file you are currently reading.
If you give it an argument, it will write out changes (such
as deletions) you have made in the current file and read in
the new file. Some special conventions are recognized for
the name.  @ means the current file in read-only mode, $ means the
current file, in read/write mode if possible, # means the previous file,
% means your system
mailbox, %user means user's system mailbox, & means
your \~/mbox file, and +folder means a file in your folder
directory.
.IP
Issuing the command ``folder %'' while you are reading your
system mailbox is a convenient way to incorporate new mail which has
arrived during the session.
.TP
.B folders
List the names of the folders in your folder directory.
.TP
.B followup
(\f3fo\f1)
Respond to a message, recording the response in a file whose name is derived 
from the author of the message.  Overrides the 
.B record
variable, if set.  See also the 
.B save
and 
.B copy
commands and 
.B outfolder.
.TP
.B Followup
(\f3F\f1)
Respond to the first message in the 
.I msglist,
sending the message to the author of each message in the 
.I msglist.
The subject line is taken from the first message and the response is 
recorded in a file whose name is derived from the author of the first 
message. See also the Save and Copy commands and 
.B outfolder.
.TP
.B from
(\f3f\f1) Takes a list of messages and prints their summary lines.
See the
.I "Specifying messages"
section above for examples of how to use this command to list only
the messages from a particular person, or about a particular subject.
.TP
.B group
(\f3g\f1) A synonym for
.B alias.
.TP
.B hd
Lists the message summary lines of all deleted messages.  These are the
messages that have been deleted by the
.B delete
command, but that have not yet been removed from the mailbox.  These
messages may be undeleted by use of the
.B undelete
command.
.TP
.B headers
(\f3h\f1) Lists the current group of message summary lines (historically
called "headers").  Summary lines are grouped and displayed by 
windowfuls (as many lines as will fit in the window).
If there are more summary lines than will fit in the current window, the
.B z
command can be used to scroll through multiple summary line groups.
.TP
.B help
(\f3hel\f1)
Prints a brief summary of commands.
.TP
.B hold
(\f3ho\f1, also \f3preserve\f1 (\f3pre\f1)) Takes a message list and marks 
each message therein to be saved in the
user's system mailbox instead of in
.IR mbox .
Does not override the
.B delete
command.
.TP
.B ignore
(\f3ig\f1)
Add the list of header fields named to the
.IR "ignored list" .
Header fields in the ignore list are not printed
on your terminal when you print a message. This
command is very handy for suppression of certain machine-generated
header fields. The
.B Type
and
.B Print
commands can be used to print a message in its entirety, including
ignored fields. If
.B ignore
is executed with no arguments, it lists the current set of
ignored fields.
.TP
.B list
(\f3li\f1)
Prints the list of all
.I mailx
commands.
.TP
.B mail
(\f3m\f1) Takes as argument login names and distribution group names and sends
mail to those people.
.TP
.B mbox
(\f3mb\f1)
Indicate that a list of messages be sent to
.I mbox
in your home directory when you quit. This is the default
action for messages if you do
.I not
have the
.I hold
option set.  See
.B MBOX.
.TP
.B more
(\f3mo\f1)
Like 
.B print
but invokes your pager.
.TP
.B new
Identical to the
.B unread
command
.TP
.B next
(\f3n\f1 like \f3+\f1 or CR) Goes to the next message in sequence and types it.
With an argument list, types the next matching message.
.TP
.B page
(\f3pa\f1)
A synonym for
.B more.
.TP
\f4pipe\f1 or \f4|\f1
(\f3pi\f1)
Pipe the messages through the given 
.I command
by invoking the command interpreter specified by 
.I SHELL
with two arguments: 
.B c
and 
.I command.
(See also 
.I sh
(\f4\-c\f1.)
The command must be given as a single argument.  Quoting, described 
previously, can be used to accomplish this.  If no arguments are given, 
the current message will be piped through the command specified by the 
value of the 
.B cmd
variable. If the 
.B page
variable is set, a form-feed character will be inserted after each message.
.TP
.B preserve
(\f3pre\f1)
A synonym for
.BR hold .
.TP
\f4print\f1 or \f4type\f1
(\f3p\f1 or \f3t\f1)
Takes a message list and types out each message to standard output.  If
.B crt
is set, the messages longer than the number of lines specified by the
.B crt
variable will be paged through the command specified by the
.B PAGER
environment variable.
.TP
.B quit
(\f3q\f1) Terminates the session, saving all undeleted, unsaved messages in
the user's
.I mbox
file in his login directory, preserving all messages marked with
.B hold
or
.B preserve
or never referenced
in his system mailbox, and removing all other messages from his system
mailbox.  If new mail has arrived during the session, the message
``You have new mail'' is given.  If given while editing a
mailbox file with the
.B \-f
flag, then the edit file is rewritten.  A return to the Shell is
effected, unless the rewrite of edit file fails, in which case the user
can escape with the
.B exit
command.
.TP
.B reply
(\f3r\f1) A synonym for
.BR Reply .
.TP
.B replyall
(\f3ra\f1 or \f3RA\f1)
Takes a message list and sends mail to the sender and all
recipients of the specified message.
The default message must not be deleted.
.TP
.B respond
(\f3res\f1) A synonym for
.BR Reply .
.TP
.B save
(\f3s\f1) Takes a message list and a filename and appends each message in
turn to the end of the file.  The filename in quotes, followed by the line
count and character count is echoed on the user's terminal.  
If filename does not already exist it will be created.
If filename
begins with a ``|'' or ``!'' then it will be interpreted as a shell command and
the contents of the messages passed to it on standard input.
.TP
.B Save
(\f3S\f1) Takes a message list and appends each message in a file whose name is
derived from the author of the first message.  See also the \f4Copy\f1, 
\f4followup\f1 and \f4Followup\f1 commands and \f4outfolder\f1 variable.
.TP
.B set
(\f3se\f1) With no arguments, prints all variable values.  Otherwise, sets
option.  Arguments are of the form
``option=value''
or
``option.''
.TP
.B shell
(\f3sh\f1) Invokes an interactive version of the shell.
.TP
.B size
(\f3si\f1)
Takes a message list and prints out the size in characters of each
message.
.TP
.B source
(\f3so\f1)
The
.B source
command reads
.I mailx
commands from a file.
.TP
.B top
(\f3to\f1)
Takes a message list and prints the top few lines of each.  The number of
lines printed is controlled by the variable
.B toplines
and defaults to five.
.TP
.B touch
(\f3tou\f1) 
Takes a message list and causes each message therein to be saved in
either the user's system mailbox or in
.I mbox
according to the state of the 
.I hold
option.
.TP
.B type
(\f3t\f1) A synonym for
.BR print .
.TP
.B undelete
(\f3u\f1) Takes a message list and marks each one as
.I not
being deleted.
.TP
.B unread
(\f3unr\f1 or \f3U\f1) Takes a message list and marks each message as
.I not
having been read.  Also see the
.B Unread
command.
.TP
.B unset
Takes a list of option names and discards their remembered values;
the inverse of
.BR set .
.TP
.B version
(\f3ve\f1) Prints the version number of mailx that you are using.
.TP
.B visual
(\f3v\f1) Takes a message list and invokes the display editor on each message.
.TP
.B write
(\f3w\f1) Like
.BR save 
except that the message header and the blank line
after the message body are not appended to the file.
Only the message body of each message is appended to the file.
.TP
.B xit
(\f3x\f1) A synonym for
.BR exit .
.TP
.B z
.I mailx
presents message summary lines in windowfuls as described under the
.B header
command. You can move
.IR mailx 's
attention forward to the next window with the
.B z
command. Also, you can move to the previous window by using
.BR z\- .
.PP
Here is a summary of the tilde escapes,
which are used when composing messages to perform
special functions.  Tilde escapes are only recognized at the beginning
of lines.  The name
``tilde\ escape''
is somewhat of a misnomer since the actual escape character can be set
via the
.B escape
option.
.TP 15
\f3~!\f1 \f2command\f1
Execute the indicated shell \f2command\f1, then return to the message.
.TP
\f3~:\f1 \f2command\f1
Execute the indicated
\f2mailx command\f1, then return to the message.
.TP
.B ~?
Display the tilde escape help file.
.TP
\f3~b\f1 \f2name\f1 ...
Add the given \f2name\f1s to the list of blind carbon
copy (``Bcc:'') recipients.
.TP
\f3~c\f1 \f2name\f1 ...
Add the given \f2name\f1s to the list of carbon copy (``Cc:'') recipients.
.TP
\f3~cm\f1 \f2string\f1
Cause the \f2string\f1 to become the current ``Comments:'' field.
.TP
.B ~d
Read the file ``dead.letter'' from your home directory into the message.
.TP
.B ~E
Invoke the text editor on the entire message collected so far including the
message header fields.
The existing message header fields will be displayed above a dashed line
and the existing message body will be displayed below the dashed line.
You are free to edit the message headers and body at will, but
you must be careful that the final format of the headers
conforms to the RFC 822 standard.  You must also take care that
no blank lines appear within the header section of the message and
that
you do not remove the dashed line separating the message headers from the
message body.
After the editing session is finished, you may continue
appending text to the message.
.TP
.B ~e
Invoke the text editor on the body of the message collected so far.  After the
editing session is finished, you may continue appending text to the
message.
.TP
.B ~eh
Same as
.B ~E
above.
.TP
\f3~en\f1 \f2string\f1
Cause the \f2string\f1 to become the current ``Encrypted:'' field.
.TP
\f3~f\f1 \f2messages\f1
Read the named \f2messages\f1 into the message being sent.
If no \f2messages\f1 are specified, read in the current message.
.TP
.B ~H
Edit all standard message header fields by
typing each one in turn and allowing the user to append text to the end
or modify the field by using the current terminal erase and kill characters.
.TP
.B ~h
Edit the basic message header fields (To:, Subject:, Cc:, Bcc:) by
typing each one in turn and allowing the user to append text to the end
or modify the field by using the current terminal erase and kill characters.
.TP
\f3~irt\f1 \f2string\f1
Add the \f2string\f1 to the ``In-Reply-To:'' list.
.TP
\f3~k\f1 \f2string\f1
Add the \f2string\f1 to the ``Keywords:'' list.
.TP
\f3~m\f1 \f2messages\f1
Read the named \f2messages\f1 into the message being sent
shifted right one
tab.  Note that if the
.I mprefix
option is set (see below), the tab will be replaced with the
specified string.  If no \f2messages\f1 are specified, read the current
message.
.TP
.B ~p
Print out the message collected so far.  First the message header fields
are displayed followed by a dashed line separator, then the message body.
.TP
.B ~q
Abort the message being sent, copying the message to
``dead.letter''
in your home directory.
.TP
\f3~r\f1 \f2file\f1
Read the named \f2file\f1 into the message.
.TP
\f3~rf\f1 \f2string\f1
Add the \f2string\f1 to the ``References:'' list.
.TP
\f3~rr\f1 [\f2string\f1]
Cause a ``Return-Receipt-To:'' field
to be added to the message.
If the \f2string\f1 is specified, it will be added to the list of
recipients in the ``Return-Receipt-To:'' field.
If the \f2string\f1 is not specified and no ``Return-Receipt-To:'' field
exists in the message, one will be created and your user name will
be specified.
If the \f2string\f1 is not specified and a ``Return-Receipt-To:'' field
already exists in the message, the entire field will be removed.
.IP
If the ``Return-Receipt-To:'' header field is present
when the message is sent, and if the intervening mail delivery
system supports return receipts, a return receipt will be sent
to your mailbox when the message is successfully delivered to each
of the specified recipients.
.TP
\f3~rt\f1 \f2name\f1 ...  
Add the given \f2name\f1s to the ``Reply-To:'' list.
.TP
\f3~s\f1 \f2string\f1
Cause the \f2string\f1 to become the current ``Subject:'' field.
.TP
\f3~t\f1 \f2name\f1 ...
Add the given \f2name\f1s to the direct recipients (``To:'') list.
.TP
.B ~V
Invoke an alternate editor (defined by the
.I VISUAL
option) on the entire message collected so far including the
message header fields.
The existing message header fields will be displayed above a dashed line
and the existing message body will be displayed below the dashed line.
You are free to edit the message headers and body at will, but
you must be careful that the final format of the headers
conforms to the RFC 822 standard.  You must also take care that
no blank lines appear within the header section of the message and
that
you do not remove the dashed line separating the message headers from the
message body.
After the editing session is finished, you may continue
appending text to the message.
.TP
.B ~v
Invoke an alternate editor (defined by the
.I VISUAL
option) on the body of the
message collected so far.  Usually, the alternate editor will be a
screen editor.  After you quit the editor, you may resume appending
text to the end of your message.
.TP
.B ~vh
Same as
.B ~V
above.
.TP
\f3~w\f1 \f2file\f1
Write the message onto the named \f2file\f1.
.TP
\f3~\||\|\f1\f2command\f1
Pipe the message through the \f2command\f1 as a filter.  If the command gives
no output or terminates abnormally, retain the original text of the
message.  The command
.IR fmt (1)
is often used as \f2command\f1 to rejustify the message.
.TP
.BR ~~ \f2string\f1
Insert the \f2string\f1 into the message prefaced by a single ~.  If
you have changed the escape character, then you should double
that character in order to send it.
.PP
Options are controlled via the
.B set
and
.B unset
commands.  Options may be either binary, in which case it is only
significant to see whether they are set or not, or string, in which
case the actual value is of interest.
The binary options include the following:
.TP 15
.B Replyall
Swaps the behavior of the
.B r/Reply/Respond
and
.B ra/Replyall
commands resulting in a more BSD-like interface.
.TP
.B append
Causes messages saved in
.I mbox
to be appended to the end rather than prepended.
(This is set in
/usr/lib/Mail.rc
on version 7 systems.)
.TP
.B ask/asksub
Prompt for a subject line on outgoing mail if one is not specified on the 
command line with the
.B \-s
option. The 
.B ask
and 
.B asksub
forms are synonyms; the system will refer to 
.B asksub
and 
.B noasksub
in its messages, but will accept 
.B ask
and 
.B noask
as user input to mean 
.B asksub
and 
.B noasksub.
It is not possible to set both 
.B ask
and 
.B noasksub,
or 
.B noask
and 
.B asksub
. The default is 
.B asksub,
but no prompting will be done if standard input is not a terminal.
.TP
.B askbcc
Prompt for the blind copy list.  The default is
.B noaskbcc.
.TP
.B askcc
Causes you to be prompted for additional carbon copy recipients at the
end of each message.  Responding with a newline indicates your
satisfaction with the current list.  The default is
.B noaskcc.
.TP
.B autoprint
Causes the
.B delete
command to behave like
.B dp
\- thus, after deleting a message, the next one will be typed
automatically.
.TP
.B bang
Enable the special-case treatment of exclamation-marks (!) in escape command 
lines; see the 
.B escape
command.  The default is
.B nobang,
disabling the expansion of ! in the
.I command
argument to the
.I "!command"
and the
.I "<!command"
escape.
.TP
\f3cmd\f1\f2=command\f1
Set the default command to be invoked by the
.B pipe
command.  The default is
.B nocmd.
.TP
\f3crt\f1\f2=number\f1
Pipe messages having more than
.I number
lines through the command specified by the value of the
.I PAGER
variable.  The default is
.B nocrt.
If it is set to null, the value is set to the current window size.
.TP
.B debug
Enable verbose diagnostics for debugging. Messages are not delivered. The 
default is
.B nodebug.
.TP
.B dot
The binary option
.I dot
causes
.I mailx
to interpret a period alone on a line as the terminator
of a message you are sending.  When
.B dot
is set, a period on a line by itself during message input from a terminal 
also signifies end-of-file (in addition to normal end-of-file). The default is
.B nodot.
If
.B ignoreeof
is set (see below), a setting of
.B nodot
will be ignored and the period is the only method to terminate input mode.
.TP
.B flipr
Reverse the meanings of the 
.B R
and 
.B r
commands. The default is 
.B noflipr.
.TP
.B hold
This option is used to hold messages in the system mailbox (instead
of 
.I mbox
) by default.
.TP
.B ignore
Causes interrupt signals from your terminal to be ignored and echoed as
@'s.
.TP
.B ignoreeof
Ignore normal control-D during message input. Input can be terminated 
only by entering a period (.) on a line by itself or by the 
\f3.\f1 command escape. The default is 
.B noignoreeof.
See also 
.B dot
above.
.TP
.B keep
Prevents
.I mailx
from deleting empty mailboxes when you quit.
.TP
.B keepsave
If set, messages which are saved via the
.B save
command are
.I not
deleted from the current mailbox automatically.
.TP
.B metoo
Usually, when a group is expanded that contains the sender, the sender
is removed from the expansion.  Setting this option causes the sender
to be included in the group.
.TP
.B outfolder
Cause the files used to record outgoing messages to be located in the 
directory specified by the 
.B folder
variable unless the pathname is absolute. The default is 
.B nooutfolder.
See the 
.B record
variable.
.TP
.B noaskrolock
Normally, when
.I mailx
encounters a mailfile which is read-only locked, it interactively asks
the user how he wants to proceed.  This option causes
.I mailx
to bypass the interactive dialog and automatically open the mailfile
in read-only mode.  In order to select a different automatic behaviour,
this option can be used as a valued option (see below).
.TP
.B noheader
Suppresses the printing of message summary lines when mailx is first invoked.
.TP
.B nosave
Normally, when you abort a message with two \s-2RUBOUT\s0,
.I mailx
copies the partial letter to the file ``dead.letter''
in your home directory. Setting the binary option
.I nosave
prevents this.
.TP
.B page
Insert a form-feed after each message sent through the pipe created by the 
.B pipe
command. The default is 
.B nopage.
.TP
\f3prompt\f1\f2=string\f1
Set the command-mode prompt to 
.I string.
If 
.I string
is null or if 
.B noprompt
is set, no prompting will occur. The default is to prompt with the string 
"? ". 
.B qmarkishelp
If set,
.B ?
becomes a synonym for the
.B help
command.
.TP
.B quiet
Suppresses the printing of the version when mailx is first invoked.
.TP
.B showlast
If this option is set at the time when
.I mailx
is first invoked, and if no new or unread messages are present in the system
mailbox,
.I mailx
will display the last windowful of summary lines first, and will set the
current message to be the last message in the mailfile.  This option only
makes sense when used with the
.I hold
option described above.  The default is
.B noquiet.
.TP
.B showmsize
If this option is set,
.I mailx
will include the line count and character count on the summary line for
each message.
.TP
.B showto
Causes
.I mailx
to display the recipient instead of sender 
when displaying the summary line of a message for which you were the sender
(your user name appears in the From: header field).
This is useful when using
.I mailx
to browse or edit a file of saved outgoing mail such as is created when
the
.I record
option is defined (see below). 
.TP
.B verbose
Setting the option
.I verbose
is the same as using the
.B \-v
flag on the command line. When mail runs in verbose mode,
the actual delivery of messages is displayed on the users
terminal.
.PP
The following options have string values:
.TP 15
.B DEAD
Determine the pathname of the file in which to save partial messages in 
case of interrupts or delivery errors.  The default is
.B "dead.letter"
in the directory named by the
.I HOME
variable.
.TP
.B EDITOR
Pathname of the text editor to use in the
.B edit
command and
.B\~e
and
.B \~eh
escapes.  This defaults to the value of the
.I EDITOR
environment variable.
.TP
.B HOME
The pathname of your home directory.  This defaults to the value of the
.IR HOME
environment variable.
.TP
.B LISTER
Determine a string representing the command for writing the contents of the
.B folder
directory to standard output when the
.B folders
command is given.   Any string acceptable as a
.I "command_string"
operand to the
.I sh
.B \-c
command is valid.  If this variable is null or not set, the output command 
will be
.I ls.
The default value is unset.
.TP
.B MAILRC
Determine the pathname of the start-up file. The default is
.B ".mailrc"
in the
.I HOME
directory.
.TP
.B MBOX
Determine a pathname of the file to save messages from the system mailbox 
that have been read. The
.B exit
command overrides this function, as will saving the message explicitly in 
another file. The default is
.B mbox
in the directory named by the
.I HOME
variable.
.TP
.B PAGER
Pathname of your pager to use in the
.B More
or
.B more
commands, or if the
.I crt
option is selected.
If not defined, this defaults to the value of the
.I PAGER
environment variable.
If the
.I PAGER
environment variable is not defined either, then
.IR more (1)
is the default.
.TP
.B SHELL
Pathname of the shell to use in the
.B !
command and the ~! escape.  This defaults to the value of the
.I SHELL
environment variable.
.TP
.B TMPDIR
The directory to use for temporary files.  This defaults to the value
of the 
.I TMPDIR
environment variable.
If the
.I TMPDIR
environment variable is not defined either, then
.I /tmp
is the default.
.TP
.B VISUAL
Pathname of the text editor to use in the
.B visual
command and
.B \~v
and
.B \~vh
escapes.  If this variable is null or not set, the full-screen editor will be
.B vi.
.TP
.B command:
Allows the user to ``alias'' commands.  Syntax is:
.IP
	set command:\f2x\f1=\f2y\f1
.IP
Where \f2x\f1 is a new name for the command and \f2y\f1 is
the original command.
For example:
.IP
	set command:ls=header
.IP
defines a new command ``ls'' which is equivalent to the existing
``header'' command.
.TP
.B crt
If
.I crt
is used as a valued option (see above for a description of how
.I crt
is used as a binary option), it is used
as a threshold to determine how long a message must
be before
the user's pager
is used to read it.  In effect, this allows the user to override the
current window size which would be used in the case of the binary
.I crt
option.
.TP
.B escape
If defined, the first character of this option gives the character to
use in the place of ~ to denote escapes.
.TP
\f3folder\f1\f2=directory\f1
The default directory for saving mail files. User-specified filenames 
beginning with a plus sign (+) will be expanded by preceding the filename 
with this directory name to obtain the real pathname. If
.I directory
does not start with a slash (/), the contents of 
.I HOME
will be prefixed to it. The default is 
.B nofolder.
If 
.B folder
is unset or set to null, user-specified filenames beginning with 
\f3+\f1 refer to files in the current directory that begin with the literal 
\f3+\f1 character. See also 
.B outfolder
below. The 
.B folder
value need not affect the processing of the files named in 
.I MBOX
and 
.I DEAD.
.TP
\f3indentprefix\f1\f2=string\f1
If defined, gives the string which will be prepended to each inserted 
line when using the
.B ~m
command to insert
text from a previous message into the current message being composed.
If not defined a tab will be the default.
.TP
.B noaskrolock
Normally, when
.I mailx
encounters a mailfile which is read-only locked, it interactively asks
the user how he wants to proceed.  This option causes
.I mailx
to bypass the interactive dialog and automatically proceed as follows:
.IP
If set to "R" or "r",
.I mailx
will open the mailfile read-only.
.IP
If set to "W" or "w",
.I mailx
will forcibly acquire the lock and open the mailfile read-write.
.TP
.B record
If defined, gives the pathname of the file used to record all outgoing
mail.  If not defined, then outgoing mail is not so saved.  The default is
.B noquiet.
.TP
.B replyto
If defined, gives the address which should be entered into the
Reply-To: header field for all outgoing mail.
.TP
.B save
Enable saving of messages in the dead-letter file on interrupt or delivery 
error. See the variable 
.I DEAD
for the location of the dead-letter file. The default is 
.B save.
.TP
.B sendmail
If defined, gives the full pathname of the mail transfer agent program
to use to send mail.  If not set,
.I /usr/lib/sendmail
will be used.  It is usually unnecessary to set this option.
.TP
\f3sign\f1\f2=string\f1
Set the variable inserted into the text of a message when the 
.B a
command escape is given. The default is 
.B nosign.
The character sequences \f4\\t\f1 and \f4\\n\f1
are recognized in the variable as tab and newline characters, respectively.
.TP
\f3Sign\f1\f2=string\f1
Set the variable inserted into the text of a message when the A command 
escape is given. The default is \f4noSign\f1. The character sequences 
\f4\\t\f1 and \f4\\n\f1
will be recognized in the variable as tab and newline characters, respectively.
.TP
.B toplines
If defined, gives the number of lines of a message to be printed out
with the
.B top
command; normally, the first five lines are printed.
.SH FILES
.TP 25
$HOME/mbox
Your saved mail (unless the \f3hold\f1 option is set).
.TP
$HOME/dead.letter
File where the text of the last aborted message will be saved
(unless the \f3nosave\f1 option is set).  Note that in the event of a
delivery failure,
.I sendmail
may append the failed message to ``dead.letter.''  This may result in
multiple messages being present in ``dead.letter.''
.TP
$HOME/.mailrc
File giving initial mail commands.
.TP
$HOME/.lsignature
File to append to outgoing local mail.
.TP
$HOME/.rsignature
File to append to outgoing remote mail.
.TP
$HOME/.signature
File to append to outgoing mail if .lsignature
and .rsignature do not exist.
.TP
$TMPDIR/R*
Misc. temporary files.
.TP
$TMPDIR/Message*
Temporary editor files.
.TP
/usr/mail/*
System mail directory.
.TP
/usr/mail/\f2user\fP
System mailbox for \f2user\fP.
.TP
/usr/mail/\f2user\fP.lock
Lock for \f2user\fP's mailbox.
.TP
/usr/mail/\f2user\fP.rolock
Read-only lock for \f2user\fP's mailbox.
Used to prevent file contention between
multiple mailx instances.
.TP
/usr/lib/mailx.help*
Help files.
.TP
/usr/lib/Mail.rc
System initialization file.
.TP
/usr/sbin/mailx
mailx program.
.SH "SEE ALSO"
mail_att(1), mail_bsd(1), sendmail(1M).
.br
Internet RFC 822 - Standard for the Format of Internet Text Messages.
.SH "WARNINGS"
.PP
.I mailx
recognizes and acts upon tilde escapes in the body of the message being
collected on standard input regardless of whether or not standard input
is connected to a tty.  If you redirect
.I mailx 's
standard input to come from a file or pipe:
.IP
mailx someuser < msgfile
.PP
or
.IP
cat msgfile | mailx someuser
.PP
you must take care to insure that no line of msgfile inadvertently begins
with a '~' character or
.I mailx
will produce unwanted results.  Note that there is nothing wrong with
imbedding tilde escapes in the body of such a msgfile provided you know
what you are doing.  Such imbedded tilde escapes are useful for setting the
Cc: list, arranging return receipts, and performing other functions
not available via command line options.
.SH "BUGS"
.PP
There are many flags that are not documented here. Most are
not useful to the general user.
'\".so /pubs/tools/origin.bsd
