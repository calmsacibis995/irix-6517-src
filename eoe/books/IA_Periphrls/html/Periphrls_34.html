<!-- Generated by Harlequin Webmaker 2.1.3; Transducer 1.0.2 --> <HTML> <HEAD>
<TITLE>Troubleshooting Inaccessible Tape Drives</TITLE>
</HEAD>
<BODY Y BGCOLOR="efefef" LINK="0000FF" ALINK="FF0000" VLINK="551a8b">
<A NAME=HEADING34></A>
<A HREF=Periphrls_35.html>Next</A> | <A HREF=Periphrls_33.html>Prev</A> | <A HREF=Periphrls_31.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
<HR>
<A NAME=HEADING34-0></A>
<H2> <A NAME=MARKER-9-11></A>Troubleshooting Inaccessible Tape Drives</H2>
<P><B>Note:  </B>This section does not allow for customized installations and does not address complex multiple tape drive issues. Take care not to violate your maintenance agreements.
<A NAME=HEADING34-2></A>
<H3> <A NAME=MARKER-9-12></A>Checking the Hardware</H3>
<P>Use the <I>hinv</I> command to see if the operating system recognized the tape drive at boot time. This is one of the most basic and critical tests to check hardware. (An output similar to the following is returned with the <I>hinv</I> command.)<P>
<PRE>
Iris Audio Processor: version A2 revision 4.1.0
1 100 MHZ IP22 Processor
FPU: MIPS R4010 Floating Point Chip Revision: 0.0
CPU: MIPS R4000 Processor Chip Revision: 3.0
On-board serial ports: 2
On-board bi-directional parallel port
Data cache size: 8 Kbytes
Instruction cache size: 8 Kbytes
Secondary unified instruction/data cache size: 1 Mbyte
Main memory size: 64 Mbytes
Integral Ethernet: ec0, version 1
Integral SCSI controller 0: Version WD33C93B, revision D
CDROM: unit 4 on SCSI controller 0
Disk drive: unit 1 on SCSI controller 0
Graphics board: Indy 24-bit
Vino video: unit 0, revision 0, Indycam connected
</PRE>
<P>If <I>hinv</I> does not report an attached tape drive, then your operating system cannot use the drive. You need to check the installation of the hardware. What you can do at this time depends on your maintenance support agreements.<P>

<P>Simple hardware checks are<P>
<UL>
<P><LI>If the tape drive is an external unit, does it have power? Simply powering it on does not cause it to be seen by the computer. The system must be shut down, power cycled, then rebooted.
<P><LI>During the boot phase, does the access light on the tape drive light up? If it does not flash at all, chances are the operating system is still not seeing the drive.
<P><LI>Is the SCSI cabling and termination correct? If visual inspection shows nothing obvious, try resetting the connectors. Any movement of hardware or cabling must be done with the system powered off.
</UL>
<P>If none of the above causes <I>hinv</I> to report the tape drive, then the most likely problem is faulty hardware. Contact your support provider.<P>
<A NAME=HEADING34-27></A>
<H3> <A NAME=MARKER-9-13></A>Checking the Software</H3>
<P>If you are reasonably sure the tape drive is correctly installed on the computer, but your software does not seem to be able to use it, the tape device's SCSI address may have changed when other SCSI devices were added to your system. <P>
<P>The system assumes that if <I>/dev/nrtape</I> exists and appears to be a tape drive of some kind, then it does not need to remake the default tape drive links of <I>/dev/tape</I>, <I>/dev/nrtape</I>, and so on. It also assumes that the first tape drive that it finds is the main tape drive. It searches for devices starting at the highest SCSI ID numbers, so the tape device on SCSI ID 7 gets the default links before a tape device on SCSI ID 3.<P>
<P>The default tape drive for most commands is <I>/dev/tape</I>. If the tape drive installation proceeded correctly, you should have at least <I>/dev/tape</I> and <I>/dev/nrtape</I> special device files. You may have several others, depending on the type of tape drive. <P>
<P>The <I>mt</I> command can be used to confirm that <I>/dev/tape</I> exists and that the tape drive is responding. Output similar to the following from the <I>mt status</I> command confirms that<P>
<PRE>
Controller: SCSI
Device: ARCHIVE: Python 25601-XXX2.63
Status: 0x20262
Drive type: DAT
Media : READY, writable, at BOT
</PRE>
<P>The following output means that you have another process accessing the drive right now:<P>
<PRE>
/dev/nrtape: Device or resource busy
</PRE>
<P>The following output appears when a special device file does not exist:<P>
<PRE>
/dev/nrtape: No such file or directory
</PRE>
<P>The output when a device file exists, but no hardware is responding at that address, is<P>
<PRE>
/dev/nrtape: No such device
</PRE>
<P>If the hardware appears to be present, but <I>/dev/tape</I> does not appear to be valid, confirm the file links. Take the device unit number from <I>hinv</I> output<P>
<PRE>
Tape drive: unit 3 on SCSI controller 0: DAT
</PRE>
<P>In this example the device unit number is 3 (this is likely to be different on your system). Use the following <I>ls</I> command to confirm that <I>/dev/tape</I> is linked to the correct device (change the numeral 3 to the correct numeral for your drive):<P>
<PRE>
<CODE><B>ls -l /dev/tape /dev/mt/tps0d3*</B></CODE> 
crw-rw-rw- 2 root sys 23, 96 Sep 21 11:11 /dev/mt/tps0d3
crw-rw-rw- 2 root sys 23, 97 Jun 20 05:55 /dev/mt/tps0d3nr
crw-rw-rw- 2 root sys 23, 99 Jul 8 09:57 /dev/mt/tps0d3nrns 
crw-rw-rw- 2 root sys 23,103 Jun 20 05:55 /dev/mt/tps0d3nrnsv 
crw-rw-rw- 2 root sys 23,101 Jun 20 05:55 /dev/mt/tps0d3nrv 
crw-rw-rw- 2 root sys 23, 98 Jun 20 05:55 /dev/mt/tps0d3ns
crw-rw-rw- 2 root sys 23,102 Jun 20 05:55 /dev/mt/tps0d3nsv 
crw-rw-rw- 2 root sys 23,100 Jun 20 05:55 /dev/mt/tps0d3v 
crw-rw-rw- 1 root sys 23,102 Jun 23 09:19 /dev/tape
</PRE>
<P>The major and minor device numbers are the key here. They are the two numbers separated by a comma (23 and 102)<P>
<PRE>
crw-rw-rw- 1 root sys 23,102 Jun 23 09:19 /dev/tape
</PRE>
<P>Match these numbers with one of the lines from <I>/dev/mt</I>. In this example, it should match to<P>
<PRE>
crw-rw-rw- 2 root sys 23,102 Jun 20 05:55 /dev/mt/tps0d3nsv
</PRE>

<P>Compare the major and minor device numbers that are reported with <I>/dev/tape</I> and the ones reported for <I>/dev/mt/tps0dX*</I>. Is there a match? If not, remove <I>/dev/tape</I> and <I>/dev/nrtape</I> and run <I>MAKEDEV</I> as root from the <I>/dev </I>directory. Give the command<P>
<PRE>
<CODE><B>./MAKEDEV tapelinks</B></CODE> 
</PRE>
<P>The <I>MAKEDEV</I> command can be verbose in describing what it is doing. Your output may differ in the number of devices made and the unit number. Once the <I>MAKEDEV</I> program has completed, go through these same checks again to be sure of success.<P>
<P>The <I>MAKEDEV</I> command does not let you choose which tape device to link to. You must make the links by hand if the <I>MAKEDEV</I> program does not default to the drive that you wish to use.<P>
<P>This covers the basic problems that administrators experience regarding missing tape drives. See the following reference pages for more information on the commands used in this section: <EM>mt(1)</EM>, <EM>ls(1)</EM>, <EM>hinv(1M)</EM>. For more technical information about tapes, see <EM>mtio(7)</EM>, <EM>tps(7M)</EM>, or <EM>mt(1)</EM>. <P>
<A NAME=HEADING34-66></A>
<H3> Troubleshooting Tape Read Errors</H3>
<P>Often there is a quick and simple fix for an error message that is caused by a tape drive malfunction or the tape itself. Both recoverable and unrecoverable errors can be caused by something as basic as a dirty read/write head, a poorly tensioned tape, or a dropout, which is a physically bad spot on the tape. An EOT message can also mean that there is no data on the tape.<P>
<P>The following information covers some of the basic tape maintenance/performance functions that should be considered as factors that could either prevent future error conditions from occurring or act as aids in recovering from an existing error message:<P>
<UL>
<P><LI>Be sure your read/write head is clean.
<P><LI>Use the <I>hinv</I> command to determine which tape drive type is connected to your system.
<P><LI>Use the <I>mt</I> <I>stat</I> command to verify the status of the tape drive and the media.
<P><LI>Use the <I>mt</I> <I>ret</I> command before read or write operations.
</UL>
<P><P>

<HR>
<DL>
<DT><A HREF="Periphrls_34.html#HEADING34-2"><B></B>Checking the Hardware</A><DD>
<DT><A HREF="Periphrls_34.html#HEADING34-27"><B></B>Checking the Software</A><DD>
<DT><A HREF="Periphrls_34.html#HEADING34-66"><B></B>Troubleshooting Tape Read Errors</A><DD>
</DL>

<HR>
<A HREF=Periphrls_35.html>Next</A> | <A HREF=Periphrls_33.html>Prev</A> | <A HREF=Periphrls_31.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
</BODY>
</HTML> 