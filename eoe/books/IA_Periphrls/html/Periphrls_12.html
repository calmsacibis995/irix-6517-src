<!-- Generated by Harlequin Webmaker 2.1.3; Transducer 1.0.2 --> <HTML> <HEAD>
<TITLE>Installing a Modem</TITLE>
</HEAD>
<BODY Y BGCOLOR="efefef" LINK="0000FF" ALINK="FF0000" VLINK="551a8b">
<A NAME=HEADING12></A>
<A HREF=Periphrls_13.html>Next</A> | <A HREF=Periphrls_11.html>Prev</A> | <A HREF=Periphrls_9.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
<HR>
<A NAME=HEADING12-0></A>
<H2> <A NAME=MARKER-9-19></A>Installing a Modem</H2>
<P><A NAME=MARKER-2-20></A>This section describes how to install a modem onto a serial port. It describes how to set up the hardware and software to support a UUCP modem connection. (Refer to the Serial Device Manager in the System Manager for a GUI-based approach to the tasks discussed in this section.)<P>
<P>Topics in this section are<P>
<UL>
<P><LI><A HREF=#MARKER-9-24>"Before You Begin"</A> provides a list of prerequisites.
<P><LI><A HREF=#MARKER-9-27>"Setting Up the Modem Software"</A> describes the software configuration procedure.
<P><LI><A HREF=#MARKER-9-32>"Dialing Out to Another Modem"</A> describes use of the <I>cu</I> utility to connect to another modem.
</UL>
<P><A NAME=MARKER-2-21></A>Silicon Graphics is compatible with most industry-standard modems. This section uses the US Robotics Sportster and Telebit modems as examples for the installation procedure. If you are using another type of modem, substitute its information where applicable. <P>
<P>You can use the standard system software to set up a modem for three different modes:<P>
<UL>
<P><LI>As a dial-in modem--other users can call your modem to log in to your system.
<P><LI>As a dial-out modem--you can use the modem to call a remote modem to log in to the system where the remote modem is connected.
<P><LI>As a dial-in/dial-out modem--other users can call your modem, and you can call other modems.
</UL>
<P>If you want to set up your modem for a SLIP or PPP connection, complete the modem configuration steps in the chapter and then refer to the SLIP or PPP configuration procedures in <I><A NAME=MARKER-18-41></A>IRIX Admin: Networking and Mail<A NAME=MARKER-19-4></A></I>.<P>

<A NAME=HEADING12-13></A>
<H3> <A NAME=MARKER-9-24></A>Before You Begin</H3>
<P>There are a few prerequisites you should be aware of before installing the modem. Review the following points before installing the modem.<P>
<UL>
<P><LI>Choose a modem configuration script. Silicon Graphics provides a set of predefined configuration scripts for many popular modems to help with your modem installation. These scripts describe the correct jumper settings for your modem and contain the expected AT commands and values for your modem to operate correctly. If your modem is not listed, you can use the <I>fix-hayes</I> script as a template and customize it to your modem's specifications.
<P><A HREF=#MARKER-9-1>Table 1-1</A> shows the modem types and their configuration scripts.
<P><TABLE BORDER="1">
<CAPTION><A NAME=MARKER-9-1></A> Modem Configuration Scripts</CAPTION>
<TH>Modem<TH>Configuration Script<TR>
<TD>Telebit T2500, T1600, QBlazer, T3000, and WorldBlazer<TD><I>fix-telebit</I><TR>
<TD>ZyXEL U-1496<TD><I>fix-zyxel</I><TR>
<TD>Intel 14.4ex<TD><I>fix-intel</I><TR>
<TD>DSI 9624 models<TD><I>fix-dsi</I><TR>
<TD>US Robotics (also called USR)<TD><I>fix-usr</I><TR>
<TD>Hayes ACCURA (also called Hayes14)<TD><I>fix-hayes</I></TABLE>
<P>
<P><LI>Check that the UUCP software is installed. The <I>eoe.sw.uucp</I> subsystem must be installed on your system. It is shipped with your IRIX system software distribution, but it is not installed by default. You can determine whether <I>eoe.sw.uucp </I>is installed by using the command
<P><CODE><CODE><B>versions</B></CODE> <CODE><B>| grep uucp</B></CODE></CODE>
<P>Check the <I>versions</I> output for the following line:<P>
<P><CODE>I eoe.sw.uucp uucp utilities</CODE>
<P>If the line above is not present, <I>eoe.sw.uucp</I> is not installed. See <I><A NAME=MARKER-18-59></A>IRIX Admin: Software Installation and Licensing<A NAME=MARKER-19-4></A></I> for instructions on installing a subsystem and install <I>eoe.sw.uucp</I>.<P>
<P><LI>Check the baud rate of the modem. The installation procedure examples assume you are using a 28,800- or 14,400-baud modem. Be sure to substitute your modem baud rate where applicable.
<P><LI>Check your serial port interface speed. The interface speed is the maximum speed of your computer's serial port, generally 38,400 or 115,200 bps. Check your system <I>Owner's Guide</I> to be sure. Use the maximum speed common to both modem and computer.
<P><LI>If your modem supports hardware flow control (RTS/CTS), be sure to use it to disable support for software flow control (XON/XOFF).
<P><LI>Determine how you want to use your modem: dial-in only, dial-out only, or dial-in/dial-out.
</UL>
<P><B>Warning:  </B><B><IMG SRC="pdchap1-1.gif">Be sure you are not violating a site security policy by installing a modem on your system. If your system is networked to other systems, access to your system by modem provides a potential point of unauthorized access to the entire network.</B>
<A NAME=HEADING12-27></A>
<H3> <A NAME=MARKER-9-27></A>Setting Up the Modem Software</H3>
<P>The major tasks for setting up the modem software are similar, no matter how you choose to use your modem. <P>
<P><A HREF=#MARKER-9-2>Table 1-2</A> provides an overview of the major tasks for each of the three usage modes. An "x" in the table denotes that the task is performed.
<P><TABLE BORDER="1">
<CAPTION><A NAME=MARKER-9-2></A> Overview of Modem Software Setup</CAPTION>
<TH>Task<TH>Dial-In<BR>Only<TH>Dial-Out<BR>Only<TH>Dial-In/<BR>Dial-Out<TR>
<TD>Turn off the port<BR>in <I>/etc/inittab</I><TD>x<TD>x<TD>x<TR>
<TD>Execute <I>telinit q</I> to<BR>reinitialize the port<TD>x<TD>x<TD>x<TR>
<TD>Run<I> fix-modem</I> <BR>configuration script<TD>x<TD>x<TD>x<TR>
<TD>Edit <I>Devices</I> file<TD>&nbsp;<TD>x<TD>x<TR>
<TD><I>Chown</I> device to <I>uucp</I><TD>&nbsp;<TD>x<TD>x<TR>
<TD>Update action field in<I> /etc/inittab</I><TD>x<TD>&nbsp;<TD>x</TABLE>
<P>
<A NAME=HEADING12-30></A>
<H4> <A NAME=MARKER-9-28></A>Modem Software Setup, All Modes</H4>
<P>The installation procedure in this section is used to start the software setup for the three usage modes. Follow the procedure until you reach the section that is specific for the usage mode you have chosen. Then continue with that section. For example, if you are configuring your modem for dial-in only, complete the procedures in this section and the <A HREF=#MARKER-9-30>"Dial-In Mode"</A> section.<P>
<OL>
<P><LI>Log in as root.
<P><LI>Edit <I>/etc/inittab</I> to turn off the port you will be using for your modem so that you can configure it correctly.
<P>Find the line for the port. The line begins with <CODE>t<I>portnumber</I></CODE>, where <I>portnumber</I> is the number of a serial port. For example, if you connected your modem to port 2, look for a line similar to the following:<P>
<P><CODE>t2:23:respawn:/etc/getty -N ttyd2 co_9600 #port 2</CODE>
<P>Change respawn to <CODE><B>off</B></CODE>. This tells the system not to restart the <I>/etc/getty</I> program when it exits. If it is already off, continue to the next step. The line should look like this when you are finished:<P>
<P><CODE>t2:23:<CODE><B>off</B></CODE>:/etc/getty -N ttyd2 co_9600 #port 2</CODE>
<P><LI>Write and exit the <I>/etc/inittab</I> file.
<P><LI>Inform <I>init</I> about the change to <I>inittab</I> with the following command:
<P><CODE><CODE><B>telinit q</B></CODE> </CODE>
<P><LI>Run the modem configuration script for your modem type (see <A HREF=#MARKER-9-1>Table 1-1</A>). Select the appropriate argument for its usage mode from <A HREF=#MARKER-9-3>Table 1-3</A> for the port you are configuring.
<P><TABLE BORDER="1">
<CAPTION><A NAME=MARKER-9-3></A> Determining the Usage Mode for Modem Configuration</CAPTION>
<TH>Dial-In<TH>Dial-Out<TH>Dial-In/Dial-Out<TR>
<TD><B>-i</B><TD><B>-o</B><TD><B>-io</B></TABLE>
 
<P><B>Note:  </B>Be sure to view the entire configuration script for information and command arguments specific to your modem type before running the script.
<P>For example, if you want to configure a US Robotics Sportster modem for dial-in/dial-out connected to port 2, use the <I>fix-usr</I> command and specify a dial-in/dial-out argument (<B>-io</B>) and the port number to which the modem is connected. For example, enter the command<P>
<P><CODE><CODE><B>/etc/uucp/fix-usr -io 2</B></CODE> </CODE>
<P>You can also specify the optional modem model type and the modem speed using the command<P>
<P><CODE><CODE><B>/etc/uucp/fix-usr -io -m SPORT -s 38400 2</B></CODE> </CODE>
<P>As another example, to configure a Telebit modem for dial-in only mode, use the <I>fix-telebit</I> command and specify a dial-in modem (<B>-i</B>), the model of the modem (tb+, t1000, t1600, t2500) and its speed, and the port number to which the modem is connected. <P>
<P>In this example, if a T2500 modem is connected to port 2 at 19,200 baud, dial-in only, enter the following command:<P>
<P><CODE><CODE><B>/etc/uucp/fix-telebit -i -m t2500 -s 19200 2</B></CODE> </CODE>
</OL>
<UL>
<P><LI>If you are configuring a dial-out modem, continue with the section, <A HREF=#MARKER-9-29>"Dial-Out Mode"</A>.
<P><LI>If you are configuring a dial-in modem, continue with the section, <A HREF=#MARKER-9-30>"Dial-In Mode"</A>. 
<P><LI>If you are configuring a dial-in/dial-out modem, continue with the section, <A HREF=#MARKER-9-29>"Dial-Out Mode"</A>, followed by <A HREF=#MARKER-9-30>"Dial-In Mode"</A>.
</UL>
<A NAME=HEADING12-53></A>
<H4> <A NAME=MARKER-9-29></A>Dial-Out Mode</H4>
<P>This section describes additional steps for configuring dial-out only and dial-in/dial-out modems. Be sure you have completed the steps in <A HREF=#MARKER-9-28>"Modem Software Setup, All Modes"</A> before starting the setup in this section.<P>
<P>You turn on dial-out modem software by editing the <I>/etc/uucp/Devices</I> file. You also have to change ownership of the port to UUCP.<P>
<OL>
<P><LI>Edit the <I>/etc/uucp/Devices</I> file to specify the port to which the modem is connected and to set the correct baud rate for the modem. Also, add a direct line for use in debugging problems. The lines have the following forms:
<P><CODE>ACU tty<I>nportnumber</I> null <I>baud</I> 212 x <I>dialer</I> <BR>Direct ttyd<I>portnumber</I> - <I>baud</I> direct</CODE>
<UL>
<P><LI>If your modem runs at 2,400 baud or lower, the <I>n</I> field should be <B>m</B>. 
<P><LI>If it runs faster than 2,400 baud and supports hardware flow control, the <I>n</I> field should be <B>f</B>.
<P><LI>All other cases can use <B>d</B>. 
<P>The value for <I>portnumber</I> is the number of the serial port to which the modem is connected. The <I>baud</I> variable is the baud rate at which the modem runs. The <I>dialer</I> variable is the model tag, as listed in the first field of the <I>/etc/uucp/Dialers</I> file. <P>
<P><B>Note:  </B>If your modem type is not listed in the <I>Dialers</I> file, you may want to obtain the most up-to-date version of the <I>Dialers</I> file. It is available online from Silicon Graphics with the <I>ftp</I> utility.
<P>For example, for a US Robotics modem connected to serial port 2 that can accept and send data at 38,400 baud (using RTS/CTS hardware flow control), add the following lines to the <I>Devices</I> file:<P>
<P><CODE>ACU ttyf2 null 38400 212 x usr<BR>Direct ttyd2 - 38400 direct<BR>Direct ttyf2 - 38400 direct</CODE>
<P>For a Telebit modem connected to serial port 2 and running at 19,200 baud, add the following lines:<P>
<P><CODE>ACU ttyf2 null 19200 212 x telebit<BR>Direct ttyd2 - 19200 direct<BR>Direct ttyf2 - 19200 direct</CODE>
<P>Save and exit the <I>Devices</I> file.<P>
</UL>
<P><LI>Change the ownership of the device files. For example, if you are using serial port 2, give the following command (substituting the appropriate <I>tty</I> device as determined above):
<P><CODE><CODE><B>chown uucp /dev/tty</B></CODE>[<I>dfm</I>]<CODE><B>2</B></CODE></CODE>
</OL>
<UL>
<P><LI>If you are configuring your modem for dial-in/dial-out mode, continue with the section <A HREF=#MARKER-9-30>"Dial-In Mode"</A> below.
</UL>
<P>When you have finished the above process, try to dial out through the modem to verify the dial-out setup, as described in <A HREF=#MARKER-9-32>"Dialing Out to Another Modem"</A>. For more information on dialer options, see the file <I>/etc/uucp/Dialers</I>.<P>
<A NAME=HEADING12-72></A>
<H4> <A NAME=MARKER-9-30></A>Dial-In Mode</H4>
<P>Be sure you have completed the steps in <A HREF=#MARKER-9-28>"Modem Software Setup, All Modes"</A>. For dial-in/dial-out mode, be sure you have also completed the steps in <A HREF=#MARKER-9-29>"Dial-Out Mode"</A>.<P>
<P>Complete the configuration by editing the file <I>/etc/inittab</I>. Perform the following steps:<P>
<OL>
<P><LI>Edit the file <I>/etc/inittab</I> again so that the system recognizes that the port is used for the modem (as opposed to a terminal). This editing also sets the interface speed on the port and enables user logins through the port.
<P>Find the line for the port to which the modem is connected. The line begins with <CODE>t<I>portnumber</I></CODE>, where <I>portnumber</I> is the number of a serial port. For example, if you connected your modem to port 2, look for a line similar to the following:<P>
<P><CODE>t2:23:off:/etc/getty -N ttyd2 co_9600 #port 2 </CODE>
<P>Make the following changes to this line: <P>
<UL>
<P><LI>Change <CODE>off<I> </I></CODE>to <CODE>respawn</CODE>.
<P><LI>Change <I>/etc/getty</I> to <I>/usr/lib/uucp/uugetty</I>.
<P><LI>Add the dial-in <B>-i</B> option with the modem model argument. Pick the modem model variable from <A HREF=#MARKER-9-4>Table 1-4</A> (or check the <I>/etc/uucp/Dialers</I> file for additional variables):
<P><TABLE BORDER="1">
<CAPTION> <A NAME=MARKER-9-4></A>The inittab File Dial-In Options by Modem Type</CAPTION>
<TH>Modem Type<TH>-i Argument<TR>
<TD>Telebit T2500, T1600, QBlazer, T3000, and WorldBlazer<TD>telebitin,conn<TR>
<TD>ZyXEL U-1496<TD>zyin,conn<TR>
<TD>Intel 14.4ex<TD>intelin,conn<TR>
<TD>DSI 9624 models<TD>dsiin,conn<TR>
<TD>US Robotics (also called USR)<TD>usrin,conn<TR>
<TD>Hayes ACCURA (also called Hayes14)<TD>hayesin,conn</TABLE>

<P><LI>Change <CODE>ttyd2</CODE> to <CODE>ttyf2</CODE>. 
<P><LI>Change <CODE>co_9600</CODE> to <CODE>dx_115200</CODE>. (This is the serial port interface speed. It lets the modem answer and connect at the maximum and slower baud rates.) This should be the highest possible speed for the serial port that your system supports. Refer to your <I>Owner's Guide</I> for your serial port's maximum interface speed.
<P><LI>Change the comment at the end of the line to note that this port is now used for a modem; include its phone number for reference.
<P>For example, if you connected a US Robotics modem to serial port 2, and found a line similar to this line in <I>/etc/inittab</I><P>
<P><CODE>t2:23:off:/etc/getty -N ttyd2 co_9600 #port 2</CODE>
<P>you would change it to read<P>
<P><CODE>t2:23:<CODE><B>respawn</B></CODE>:<CODE><B>/usr/lib/uucp/uugetty -Nt60 -iusrin,conn ttyf2</B></CODE> <CODE><B>dx_38400</B></CODE> #<CODE><B>Modem 555-2345</B></CODE></CODE>

<P>If you are setting up a Telebit modem to serial port 2, and found a line similar to this one<P>
<P><CODE>t2:23:off:/etc/getty -N ttyd2 co_9600 #port 2</CODE>
<P>you would change it to read<P>
<P><CODE>t2:23:<CODE><B>respawn</B></CODE>:<CODE><B>/usr/lib/uucp/uugetty -Nt60</B></CODE> <CODE><B>-itelebitin,conn ttyf2</B></CODE> <CODE><B>dx_19200</B></CODE> #<CODE><B>Modem 555-3456</B></CODE></CODE>
</UL>
<P><LI>Write and exit the <I>/etc/inittab</I> file.
<P><LI>Inform <I>init</I> about the change to <I>/etc/inittab</I> with the following command:
<P><CODE><CODE><B>telinit q</B></CODE> </CODE>
</OL>
<P>To test the dial-in setup, have someone try to dial in to the system through this modem.<P>
<P>To dial out through the modem to verify the dial-out setup, continue with the section <A HREF=#MARKER-9-32>"Dialing Out to Another Modem."</A><P>
<A NAME=HEADING12-99></A>
<H4> Timing Out a Dial-In Connection</H4>
<P>There is no standard way to configure the system to time out dial-in connections after a set amount of time. One way to accomplish this, however, is by using a shell for the dial-in account that supports time-outs after a specified period (for example, <I>tcsh</I>).<P>
<P><B>Warning:  </B><B><A NAME=MARKER-10-31></A>You should not change root's shell to <I>/usr/bin/tcsh</I> if <I>/usr</I> is a separate filesystem because it may not be mounted in single-user mode.</B>
<P><B>Note:  </B>The <I>tcsh</I> timeout does not work for dial-in connections that use PPP, SLIP, or UUCP.
<P>Alternatively, you could write a script that determines the length of time a user is logged in and acts accordingly (refer to <EM>last(1)</EM>, <EM>grep(1)</EM>, and <EM>who(1)</EM> for more information).<P>

<A NAME=HEADING12-105></A>
<H3> <A NAME=MARKER-9-32></A>Dialing Out to Another Modem</H3>
<P>The <I>cu</I> utility dials your modem. Before you attempt to dial out, make sure your local modem is connected to both your system and a working telephone line. Also, make sure the modem is turned on. The <I>cu</I> syntax to dial the number 1-800-555-1234 is<P>
<PRE>
<P><CODE><B>cu 18005551234</B></CODE>
</PRE>
<P>Refer to the <EM>cu(1C)</EM> reference page for complete information on <I>cu</I>. If everything is working, you should hear the modem dialing and after a short time you should see the following message on your console:<P>
<PRE>
<P>Connected
</PRE>
<UL>
<P><LI>If no login prompt is displayed, press <CODE><B>&lt;Enter&gt;</B></CODE> once. 
<P><LI>If a prompt is displayed, continue and log in to the remote system. 
<P><LI>To disconnect, press the <CODE><B>&lt;Enter&gt;</B></CODE> key, the tilde key (~), a period (.), and the <CODE><B>&lt;Enter&gt;</B></CODE> key again. 
<P><LI>If you cannot connect, refer to the troubleshooting tips in <A HREF=Periphrls_32.html#MARKER-9-2>"Troubleshooting Your Modem Setup" in Chapter 5</A>.
</UL>
<HR>
<DL>
<DT><A HREF="Periphrls_12.html#HEADING12-13"><B></B>Before You Begin</A><DD>
<DT><A HREF="Periphrls_12.html#HEADING12-27"><B></B>Setting Up the Modem Software</A><DD>
<DT><A HREF="Periphrls_12.html#HEADING12-30"><B></B>Modem Software Setup, All Modes</A><DD>
<DT><A HREF="Periphrls_12.html#HEADING12-53"><B></B>Dial-Out Mode</A><DD>
<DT><A HREF="Periphrls_12.html#HEADING12-72"><B></B>Dial-In Mode</A><DD>
<DT><A HREF="Periphrls_12.html#HEADING12-99"><B></B>Timing Out a Dial-In Connection</A><DD>
<DT><A HREF="Periphrls_12.html#HEADING12-105"><B></B>Dialing Out to Another Modem</A><DD>
</DL>

<HR>
<A HREF=Periphrls_13.html>Next</A> | <A HREF=Periphrls_11.html>Prev</A> | <A HREF=Periphrls_9.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
</BODY>
</HTML> 