<!-- Generated by Harlequin Webmaker 2.1.3; Transducer 1.0.2 --> <HTML> <HEAD>
<TITLE>Configuring the BSD lpr Spooler System</TITLE>
</HEAD>
<BODY Y BGCOLOR="efefef" LINK="0000FF" ALINK="FF0000" VLINK="551a8b">
<A NAME=HEADING19></A>
<A HREF=Periphrls_20.html>Next</A> | <A HREF=Periphrls_18.html>Prev</A> | <A HREF=Periphrls_15.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
<HR>
<A NAME=HEADING19-0></A>
<H2> <A NAME=MARKER-9-58></A>Configuring the BSD lpr Spooler System</H2>
<P>The IRIX print spooler can accept print jobs from remote systems that use the BSD <I>lpr</I> protocol. This means the print spooler supports the <I>lpr</I> protocol used by many PCs and other non-IRIX systems and can act as a print server for those systems.<P>
<P>Silicon Graphics does supply the BSD <I>lpr</I> print spooler software, which can be installed and configured if you wish to use it on the IRIX system. Silicon Graphics does not support configuring the BSD <I>lpr</I> print spooler locally (you cannot have the printer physically connected to a Silicon Graphics system). For information about configuring a BSD <I>lpr</I> print spooler on another system, refer to any documentation describing the standard BSD operating system (see <A HREF=Periphrls_8.html#MARKER-9-3>"Additional Resources"</A>). Print requests can be submitted to a BSD print server once it is configured.<P>

<P>The BSD <I>lpr</I> print spooler allows you to access print servers that are attached to other systems on the network. Be sure to check the other systems, or contact the system administrator, to verify the type of spooling system those systems are using. Generally speaking, if a system has an <I>/etc/printcap</I> file configured, it is using the BSD <I>lpr</I> print spooling system.<P>
<P>Verify that the System Administrator of the BSD print server system includes your hostname in the print server system's <I>/etc/hosts.equiv</I> file and that your IP address and hostname appear in the print server system's <I>/etc/hosts</I> file. You must add the print server system's IP address and hostname to your system's <I>/etc/hosts</I> file. <P>
<P>If your files (documents) do not print once you have configured the BSD print spooler, see <A HREF=Periphrls_33.html#MARKER-9-10>"Troubleshooting the BSD lpr Spooling System"</A>. The troubleshooting section takes you to the point where you can see a copy of your document on the print server system. If the document disappears from the print server system's queue without printing, contact the System Administrator.<P>
<A NAME=HEADING19-7></A>
<H4> Verifying Installation of the BSD lpr Subsystem</H4>
<P>Enter the following command to verify that the BSD <I>lpr</I> print spooling system was properly installed:<P>
<PRE>
<CODE><B>versions -av | grep print.sw.bsdlpr</B></CODE> 
</PRE>
<P>A sample output of this command looks like this:<P>
<PRE>
I print.sw.bsdlpr 08/07/96 Berkeley 'lpr' Printer Spooler
</PRE>
<P>The BSD spooler is not loaded by default. Check to see if the subsystem is installed. If it is not, refer to <I><A NAME=MARKER-18-59></A>IRIX Admin: Software Installation and Licensing<A NAME=MARKER-19-4></A></I> and your release notes. Most users must use the <I>inst </I>command to install this subsystem.<P>
<P>Use the <I>versions</I> command (<I>versions</I> <I>-av</I> | <I>grep</I> <I>print.sw.bsdlpr</I>) to verify that you have the entire subsystem loaded. Creating an <I>/etc/printcap</I> file is not sufficient.<P>
<P>After you verify that the <I>print.sw.bsdlpr</I> subsystem is installed, edit the <I>/etc/printcap</I> file to configure the <I>lpr</I> spooling system. There are no tools to perform this function, so you need to edit the file manually. The remainder of this subsection takes you through this process. Be sure that you format the entries correctly. The <I>/etc/printcap</I> file expects information in a format similar to that in the <I>/etc/termcap</I> file.<P>
<A NAME=HEADING19-15></A>
<H4> Configuring the printcap File </H4>
<P>Before you begin editing the <I>/etc/printcap</I> file, log in to your system as root.<P>
<P><B>Note:  </B>The <I>printcap</I> file is sensitive to syntax errors. The name field must begin at the first character on a line. The print server names must be separated by pipe symbols (the vertical bar "|"). The name line must be terminated with a colon followed by a backslash (":\"). Make sure that there are no spaces, tabs, or any other character after the backslash.
<P>The definition lines must begin with a tab character followed by a colon (:), followed by the field you are defining, followed by an equal sign. The definition line must end with a colon. See <A HREF=#MARKER-9-61>"printcap Examples."</A><P>
<P>One name and three definition fields must be defined. They are<P>
<DL>
<P><DT><I>name</I>
<P><DD> This field must contain all the names the print server can be accessed as. It should include <I>lp</I> because, by default, <I>lpr</I> looks for <I>lp</I> in the name field of the <I>/etc/printcap</I> file. The names are separated with pipe symbols.
<P><DT>:<I>rm</I>
<P><DD> Remote print server system name. This is the name of the system that has the print server physically connected to it.
<P><DT>:<I>rp</I>
<P><DD> Remote print server name. This is the name of the remote print server on the print server system that you are trying to access.
<P><DT>:<I>sd</I>
<P><DD> Spool directory. This is the name of your local spool directory. If you do not use the default directory <I>/usr/spool/lpd</I>, you must create the directory using the <I>mkdir </I>command.
</DL>
<A NAME=HEADING19-24></A>
<H4> <A NAME=MARKER-9-61></A>printcap Examples</H4>
<P>Following are two examples that can help you edit the <I>/etc/printcap</I> file. <A HREF=#MARKER-9-62>Example 2-11</A> shows how to configure the printer configuration file in two lines. <A HREF=#MARKER-9-63>Example 2-12</A> shows how to configure each option of the <I>printcap</I> file on a separate line. The examples are followed by explanations.<P>
<P>
<B>Example 2-11 </B>: <I><A NAME=MARKER-9-62></A>printcap</I> Example 1
<P>
<PRE>
<P>lp|sleepy|sleepyprinter:\ 
<P>     :lp=:\:rm=snowwhite.story.land:rp=doc:sd=/usr/spool/lpd:
</PRE>
<P> <P>

<P>
<B>Example 2-12 </B>: <I><A NAME=MARKER-9-63></A>printcap</I> Example 2
<P>
<PRE>
lp|sleepy|sleepyprinter:\
    :lp=:\
    :rm=snowwhite.story.land:\
    :rp=doc:\
    :sd=/usr/spool/lpd:
</PRE>
<P>The examples show that the print server can be accessed by the names lp, sleepy, and sleepyprinter.<P>
<P>The print server system (where the print server is physically attached) is called snowwhite.story.land.<P>
<P>The name of the print server on the print server system is doc.<P>
<P>The local spool directory is called <I>/usr/spool/lpd</I>.<P>
<A NAME=HEADING19-41></A>
<H4> Using the lpr Command to Print</H4>
<P>Now that you have the <I>/etc/printcap</I> file configured, make sure that the daemon is running. Enter the following command:<P>
<PRE>
<P><CODE><B>ps -ef | grep lpd</B></CODE> 
</PRE>
<P>Your system should return something similar to<P>
<PRE>
<P>root 195 1 0 11:06:04 ? 0:00 /usr/etc/lpd 
root 1293 753 2 13:20:39 ttyq6 0:00 grep lpd
</PRE>
<P>The <I>/usr/etc/lpd</I> path at the end of the line indicates that the daemon is running. If only one line was returned (<CODE>grep lpd</CODE>), then start the <I>lpd</I> daemon by entering the following command:<P>
<PRE>
<P><CODE><B>/usr/etc/lpd</B></CODE> 
</PRE>
<P>Now, if you type <I>ps</I> <I>-ef</I> <I>|</I> <I>grep</I> <I>lpd</I>, you should see two lines.<P>

<P>As shown in <A HREF=#MARKER-9-61>"printcap Examples"</A>, the print server can be accessed by three names: lp, sleepy, and sleepyprinter. By default, the <I>lpr</I> command looks for the field <I>lp</I> in the <I>/etc/printcap</I> file. If this is not the first name in the name field, you need to do one of two things:<P>
<UL>
<P><LI>Whenever you enter the <I>lpr</I> command you must use the <B>-P</B> option to specify a printer name other than <I>lp</I>.
<P><CODE><CODE><B>lpr -Psleepyprinter <I>filename</I></B></CODE> </CODE>
<P><LI>Alternatively, in your shell you can set the environment variable PRINTER to the name of the print server you wish to use.
<P>In the C shell:<P>
<P><CODE>setenv PRINTER sleepy </CODE>
<P>In the Bourne shell:<P>
<P><CODE>PRINTER=sleepy; export PRINTER </CODE>
</UL>
<P>Now you can enter the command<P>
<PRE>
<P><CODE><B>lpr <I>filename</I></B></CODE> 
</PRE>
<P>After submitting your request to the print server, you can see if your job has made it to the print spooling queue by entering the following command:<P>
<PRE>
<P><CODE><B>lpq</B></CODE> 
</PRE>
<P>Your system should return something similar to<P>
<PRE>
lp is ready and printing 
Rank Owner Job Files Total Size 
1st nina 113 filename 851 bytes
</PRE>
<P><P>

<HR>
<DL>
<DT><A HREF="Periphrls_19.html#HEADING19-7"><B></B>Verifying Installation of the BSD lpr Subsystem</A><DD>
<DT><A HREF="Periphrls_19.html#HEADING19-15"><B></B>Configuring the printcap File </A><DD>
<DT><A HREF="Periphrls_19.html#HEADING19-24"><B></B>printcap Examples</A><DD>
<DT><A HREF="Periphrls_19.html#HEADING19-41"><B></B>Using the lpr Command to Print</A><DD>
</DL>

<HR>
<A HREF=Periphrls_20.html>Next</A> | <A HREF=Periphrls_18.html>Prev</A> | <A HREF=Periphrls_15.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
</BODY>
</HTML> 