<!-- Generated by Harlequin Webmaker 2.1.3; Transducer 1.0.2 --> <HTML> <HEAD>
<TITLE>Installing an ASCII Terminal </TITLE>
</HEAD>
<BODY Y BGCOLOR="efefef" LINK="0000FF" ALINK="FF0000" VLINK="551a8b">
<A NAME=HEADING11></A>
<A HREF=Periphrls_12.html>Next</A> | <A HREF=Periphrls_10.html>Prev</A> | <A HREF=Periphrls_9.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
<HR>
<A NAME=HEADING11-0></A>
<H2> <A NAME=MARKER-9-10></A>Installing an ASCII Terminal </H2>
<P><A NAME=MARKER-2-11></A>This section describes the procedures for connecting and configuring an ASCII terminal. (Refer to the Serial Device Manager in your System Manager to accomplish many of the same tasks described in this section if you prefer to use a GUI to a command-line interface.) <P>
<P>The <I>diagnostics terminal</I>, or <I>console</I>, is the ASCII terminal connected to a serial port on the I/O panel of a server. It can be connected to any of these ports, depending on your system:<P>
<UL>
<P><LI>The alternate console port on a graphics system
<P><LI>The console port (labeled port 1 or port 2) on a nongraphics system
<P><LI>Any of the four serial ports on larger systems such as the CHALLENGE M or Onyx
</UL>
<P>The messages produced by the power-on diagnostics appear on the screen of this terminal.<P>

<A NAME=HEADING11-8></A>
<H3> Configuring the Terminal Software </H3>
<P>This section tells you how to configure IRIX software to use an ASCII terminal with your computer system. <A NAME=MARKER-2-12></A><P>
<P>During configuration, you need to<P>
<UL>
<P><LI>Edit the file <I>/etc/ttytype</I> to associate the TTY port you have chosen with a file that describes your terminal settings. These terminal descriptor files reside in the directory <I>/usr/lib/terminfo</I>.
<P><LI>Update the file <I>/etc/inittab</I> to allow a login to that port.
</UL>
<P><B>Note:  </B>The utilities described in this section are distributed as part of the <I>eoe.sw.terminfo</I> package. You must have installed this package on your system in order to use these utilities. See <I><A NAME=MARKER-18-59></A>IRIX Admin: Software Installation and Licensing<A NAME=MARKER-19-4></A></I> for information and specific instructions on installing this package. 
<P>The <I>/usr/lib/terminfo</I> directory contains files that describe different terminal models, their capabilities, and how they operate. For most ASCII terminal models, you do not need to edit this database.<P>
<P><B>Note:  </B>If your terminal is not in the database, or if it does not work properly after you have configured the software, you may need to write a terminal description. Refer to the optional <I><A NAME=MARKER-18-15></A>Topics in IRIX Programming<A NAME=MARKER-19-4></A></I> and the <EM>tset(1)</EM>, <EM>stty(1)</EM>, and <EM>terminfo(4)</EM> reference pages. Additionally, your terminal may support a compatible terminal mode (such as VT100). Check your terminal documentation for compatibility modes.
<P>The directory <I>/usr/lib/terminfo</I> is divided into numeric and alphabetic subdirectories. Each subdirectory contains entries for terminals whose names begin with that character. For example, <I>/usr/lib/terminfo/v</I> contains the entry for the Visual 50. The entry name listed in the subdirectory is <I>v50am</I>.<P>
<P>To find the entry name for your terminal and to configure software for an ASCII terminal, follow these steps:<P>
<OL>
<P><LI>Log in as root<B> </B>or become the superuser by entering the su command. 
<P><LI>To change directories to <I>/usr/lib/terminfo</I>, type
<P><CODE><CODE><B>cd /usr/lib/terminfo</B></CODE> </CODE>

<P><LI>Find the entry name for your terminal. Issue the <I>fgrep</I> command with a string that you suspect could make up part of your terminal name. 
<P><CODE><CODE><B>ls -R | fgrep -i <I>string</I></B></CODE> </CODE>
<P>If this fails, examine the subdirectories of <I>/usr/lib/terminfo</I>, which contain all the terminal entries.<P>
<P><LI><A NAME=MARKER-2-17></A>Once you find the terminal name as it appears in <I>/usr/lib/terminfo</I>, issue the <I>infocmp</I> command to determine the model name of your terminal. For example, for a Visual 50, issue this command:
<P><CODE><CODE><B>infocmp -I v50am</B></CODE> </CODE>
<P>You will see a display that begins with this line:<P>
<P><CODE><CODE>v50am|visual50 (v50 emulation) with automatic margins</CODE>,</CODE>
<P>The data in the first field (<CODE>v50am</CODE>) is the model name of your terminal. <P>
<P><B>Note:  </B>If it looks as if there are many terminal names that could apply, use this sample shell script to help speed up the search. This example uses the string <CODE>wy60*</CODE> to help locate all the Wyse60 models. Substitute your own string, as appropriate.
<P><CODE><CODE><B>sh</B></CODE></CODE>
<P><CODE><CODE><B>for i in wy60*</B></CODE></CODE>
<P><CODE><CODE><B>do</B></CODE></CODE>
<P><CODE><CODE><B>infocmp -I $i</B></CODE></CODE>
<P><CODE><CODE><B>done</B></CODE></CODE>
<P>If you choose an incorrect model name, you can change it later; the line still works, but screen-based commands do not display correctly.<P>
<P><LI><A NAME=MARKER-2-18></A>Edit <I>/etc/ttytype</I> and enter the model name. 
<P>This file associates the model name with the port where the terminal is connected. In the line that contains the port you are using, replace <CODE>v50am</CODE> with the model name of your terminal.<P>

<P>An <I>/etc/ttytype</I> might look like this example:<P>
<P><CODE><CODE>iris-ansi systty<BR>?v50am    ttyd1<BR>?v50am    ttyd2<BR>?v50am    ttyd3<BR>?v50am    ttyd4<BR>?v50am    ttyd5<BR>?v50am    ttyd6<BR>?v50am    ttyd7<BR>?v50am    ttyd8<BR>?v50am    ttyd9<BR>?v50am    ttyd10<BR>?v50am    ttyd11<BR>?v50am    ttyd12</CODE></CODE>
<P>The optional question mark (?) at the beginning of a line in <I>/etc/ttytype</I> causes <I>tset</I> to display the model name as supplied (for example, <CODE>v50am</CODE> here) and prompts for the model name you are currently using. If you are not using the model name as provided, type in the name that you are using; otherwise, press <CODE><B>&lt;Enter&gt;</B></CODE> to accept the default. This provides an easy way to switch terminal settings if you use more than one type of terminal.<P>
<P><I>tset</I> is normally called in your login startup script (.<I>login</I> or .<I>profile</I>). <I>tset</I> commands use information from <I>/etc/ttytype</I> and <I>/usr/lib/terminfo </I>to initialize the terminal. These files also provide information on setting environment variables so that editors and other programs know how to communicate with the terminal. See <EM>tset(1)</EM> for detailed information.<P>
<P><LI>Edit <I>/etc/inittab</I> so that you can log in. <I>/etc/inittab</I> provides information about how the computer ports behave. This sample is from an <I>/etc/inittab</I> file:
<P><CODE>t1:23:respawn:/etc/getty -s console ttyd1 co_9600 # port 1</CODE>
<P><CODE>t2:23:off:/etc/getty -N ttyd2 co_9600 # port 2 </CODE>
<P><CODE>t3:23:off:/etc/getty -N ttyd3 co_9600 # port 3 </CODE>
<P><CODE>t4:23:off:/etc/getty -N ttyd4 co_9600 # port 4 </CODE>

<P>Here are two sample entries, with an explanation of each field in the entries:<P>
<P><CODE><CODE>t1:23:respawn:/etc/getty -s console ttyd1 co_9600</CODE></CODE>
<P><CODE><CODE>t2:23:off:/etc/getty -N ttyd2 co_9600</CODE></CODE>
<DL>
<P><DT><I>t1</I> <I>t2 </I>
<DD> uniquely identifies the entry.<P>
<P><DT><I>23</I> <I></I>
<DD> defines the <I>init</I> run level in which this entry is to be processed. A 23 means this entry is to be processed in run levels two and three. Refer to <EM>init(1M)</EM> for more information about run levels.<P>
<P><DT><I>off</I> 
<DD> means do not perform the action on the process field of <I>init</I>.<P>
<P><DT><I>respawn</I> 
<DD> means start the program in the process field of <I>init</I> and restart it every time the process terminates. See <EM>inittab(4)</EM> for a description of all possible actions.<P>
<P><DT><I>/etc/getty -s console ttyd1 co_9600</I> 
<DD> <BR>runs the <I>getty</I> process on the port labeled 1 at the baud rate and with the options specified in the <I>co_9600</I> entry in the <I>/etc/gettydefs</I> file. The <B>-s console</B> option instructs <I>getty</I> that the login shell generated is a system console and therefore receives system error messages.<P>
<P><DT><I>/etc/getty -N ttyd2 co_9600 </I>
<DD> <BR>runs the <I>getty</I> process on the port labeled 2 at the baud rate and with the options specified in the <I>co_9600</I> entry in the <I>/etc/gettydefs</I> file. The <B>-N</B> option instructs <I>getty</I> to honor the presence of the <I>/etc/nologin</I> file, which does not allow remote logins over the network.<P>
<P><DT>#
<DD> text following this symbol is a comment to the end of line.<P>
<P>To enable you to log in to the terminal connected to the port labeled 2, find this line:<P>
<P><CODE><CODE>t2:23:off:/etc/getty -N ttyd2 co_9600</CODE> </CODE>
<P>Change it to<P>
<P><CODE><CODE>t2:23:<CODE><B>respawn:/etc/getty -N ttyd2 co_9600</B></CODE></CODE> </CODE>
</DL>
<P><LI>If you do not plan to run the terminal at 9,600 baud, replace <CODE>co_9600</CODE> in <I>/etc/inittab</I> with the correct entry name from <I>/etc/gettydefs</I>. 
<P><I>/etc/inittab</I> refers to <I>/etc/gettydefs</I> for information about the terminal line settings. In the example from <I>/etc/inittab </I>above, <CODE>co_9600</CODE> refers to the name of an entry in <I>/etc/gettydefs</I>; it defines a 9,600 baud console setting.<P>
<P>To see what entries are defined in <I>/etc/gettydefs</I>, examine the file or see <A HREF=Periphrls_13.html#MARKER-9-34>"Checking Line Settings Using IRIX Shell Commands"</A>. To make a new entry, see <A HREF=Periphrls_13.html#MARKER-9-35>"Creating and Testing Line Settings"</A>. <P>
<P><LI>Inform <I>init</I> of the change to <I>/etc/inittab </I>and start a <I>getty</I> process for the port:
<P><CODE><CODE><B>telinit q</B></CODE> </CODE>
<P><LI>Power on the terminal. The workstation sends a login prompt to the terminal screen. Press <CODE><B>&lt;Enter&gt;</B></CODE> if the login prompt does not appear. 
</OL>
<P><B>Note:  </B>If the default line speed set in <I>/etc/inittab</I> is incorrect, the prompt may be garbled or may not appear. Choose another line speed.
<A NAME=HEADING11-71></A>
<H3> Setting Terminal Options</H3>
<P>The TTY system described thus far establishes a basic style of communication between the user's terminal and the IRIX operating system. Once a user has successfully logged in, he or she may prefer terminal options other than the default set.<P>
<P>The <I>stty</I> command controls terminal options. Many users add an <I>stty</I> command to their <I>.profile</I> or <I>.login</I> file so that the options they want are automatically set as part of the login process. Here is an example of a simple <I>stty</I> command:<P>
<P><CODE><B>stty cr0 nl0 echoe -tabs erase '^H'</B></CODE> <P>
<P>The options in the example and their meanings are<P>
<DL>
<P><DT><I>cr0</I> <I>nl0</I> 
<P><DD> No delay for carriage return or newline. Delays are not used on a video display terminal but are necessary on some printing terminals to allow time for the mechanical parts of the equipment to move.
<P><DT><I>echoe</I> 
<P><DD> Erases characters as you backspace.
<P><DT>-<I>tabs</I> 
<P><DD> Expands tabs to spaces when printing.
<P><DT><I>erase</I> '^<I>H</I>' 
<P><DD> Changes the character-delete character to a ctrl-H. The default character-delete character is the pound sign (#). Most terminals transmit a ctrl-H when the <CODE><B>&lt;Backspace&gt;</B></CODE> key is pressed. Specifying this option makes <CODE><B>&lt;Backspace&gt;</B></CODE> delete the character that was just typed.
</DL>
<P>Refer to the <EM>stty(1)</EM> reference page for a full list of <I>stty</I> options.<P>
<HR>
<DL>
<DT><A HREF="Periphrls_11.html#HEADING11-8"><B></B>Configuring the Terminal Software </A><DD>
<DT><A HREF="Periphrls_11.html#HEADING11-71"><B></B>Setting Terminal Options</A><DD>
</DL>

<HR>
<A HREF=Periphrls_12.html>Next</A> | <A HREF=Periphrls_10.html>Prev</A> | <A HREF=Periphrls_9.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
</BODY>
</HTML> 