<!-- Generated by Harlequin Webmaker 2.1.3; Transducer 1.0.2 --> <HTML> <HEAD>
<TITLE>Troubleshooting Your Printing System</TITLE>
</HEAD>
<BODY Y BGCOLOR="efefef" LINK="0000FF" ALINK="FF0000" VLINK="551a8b">
<A NAME=HEADING33></A>
<A HREF=Periphrls_34.html>Next</A> | <A HREF=Periphrls_32.html>Prev</A> | <A HREF=Periphrls_31.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
<HR>
<A NAME=HEADING33-0></A>
<H2> <A NAME=MARKER-9-3></A>Troubleshooting Your Printing System</H2>
<P>If you<A NAME=MARKER-2-4></A><A NAME=MARKER-2-5></A> send a print request to a printer with <I>lp</I> and do not receive any output, use the checklists below to make sure your system is ready for printing. These lists supplement the troubleshooting information in the manufacturer's hardware manual.<A NAME=MARKER-2-6></A> <P>
<A NAME=HEADING33-2></A>
<H3> Hardware Troubleshooting Checklist</H3>
<P>Use the following list of questions to determine whether your printer hardware is working as designed:<P>
<UL>
<P><LI>Is the printer turned on?
<P>Printers do not always indicate clearly whether they are turned on. Make sure the printer is plugged into the power socket and the power switch is on. <P>
<P><LI>Does the printer have paper?
<P>Frequently, printers run out of paper in a high-volume situation. <P>
<P><LI>Is there a paper jam?
<P>Make sure the entire paper pathway is clear of sheets or fragments of paper. Refer to your printer hardware documentation before attempting to put any unusual paper or other media through your printer. <P>
<P><LI>Is the printer set to the correct baud? 
<P>Be sure the baud rate of the printer matches that of the serial port. <P>
<P><LI>Is the serial cable attached correctly?
<P>Often, reseating the serial cable where it connects to the printer restores correct operation.<P>
<P><LI>Is the correct cable being used?
<P>The use of the pins in serial cables varies somewhat in different applications. Cables designed for specific hardware may or may not function correctly with different hardware. Check your system <I>Owner's Guide</I> and the documentation supplied with your printer and cable to determine whether the cable is correct for your hardware.<P>
</UL>
<A NAME=HEADING33-16></A>
<H3> Software Troubleshooting Checklist </H3>
<P>The lp<A NAME=MARKER-2-7></A> scheduler is the program in charge of spooling your files to the printer, and it is invoked whenever you use the lp print command. The scheduler can be in a number of states, and each printer registered with lp can be in a number of states as well.<P>
<P>To check on the complete status of the lp system, type<P>
<PRE>
<P><CODE><B>lpstat -t</B></CODE> 
</PRE>
<P>This gives you a complete description of the status of <I>lp</I>. You may also want to examine the contents of the file <I>/var/spool/lp/log</I>. Use the information you find to answer the following questions:<P>
<UL>
<P><LI>Is your printer registered with <I>lp</I>? 
<P>If you do not see the name of your printer in the list of information produced by <I>lpstat</I>, then you must register your printer with <I>lp</I>. <P>
<P><LI>Is the printer enabled?
<P>If your printer is not enabled, the <I>lpstat</I> listing contains this line:<P>
<P><CODE><CODE>printer <I>yourprinter disabled since...</I></CODE></CODE>
<P>To enable the printer, type<P>
<P><CODE><CODE><B>enable</B></CODE> <I>yourprinter</I> </CODE>
<P><I>lp</I> sometimes disables a printer automatically if it is unable to send a file to a print server, so a disabled printer often indicates a hardware problem, such as a host that is not communicating with the network. <P>
<P><LI>Is the printer accepting requests?
<P>If the printer is not accepting requests, the <I>lpstat</I> listing contains this line:<P>
<P><CODE><I>yourprinter</I> <CODE>not accepting requests since...</CODE></CODE>
<P>You must use the <I>accept</I> command for that printer destination. Become the superuser (with <I>su</I>) and type<P>
<P><CODE><CODE><B>/usr/lib/accept</B></CODE> <I>yourprinter</I> </CODE>

<P><LI>Is the <I>lp</I> scheduler running?
<P>If the scheduler is not running, the <I>lpstat</I> listing contains the message<P>
<P><CODE><CODE>scheduler is not running</CODE> </CODE>
<P>To restart the <I>lp</I> scheduler, become superuser (with <I>su</I>) and type<P>
<P><CODE><CODE><B>/usr/lib/lpsched</B></CODE> </CODE>
<P><LI>Did you specify the right printer?
<P>If your system has more than one printer, and you wish to send a job to a printer other than the default, remember to use the <B>-d</B> option:<P>
<P><CODE><CODE><B>lp -d<I>otherprinter</I></B></CODE> </CODE>
</UL>
<A NAME=HEADING33-43></A>
<H4> <A NAME=MARKER-9-8></A>Troubleshooting Network Printers </H4>
<P>If you are<A NAME=MARKER-2-9></A> having trouble with a printer you are accessing over a network, check the status of the <I>lp</I> scheduler on your workstation or the print server's host system.<P>
<A NAME=HEADING33-45></A>
<H4> Emergency Measures </H4>
<P>If none of the above procedures work, there are several "last resort" procedures:<P>
<OL>
<P><LI>Stop the <I>lp</I> scheduler and then restart it. As root, type the following sequence of commands:
<P><CODE><CODE><B>/usr/lib/lpshut</B></CODE> </CODE>
<P>Then kill any jobs running as <I>lp.</I> You can identify these processes with the command<P>
<P> <CODE><B>ps -fu lp</B></CODE> <P>
<P>Then type the command<P>
<P><CODE><CODE><B>/usr/lib/lpsched</B></CODE> </CODE>
<P><LI>Remove the offending printer destination from the <I>lp</I> scheduler and then register it again. Before you can do this you must either cancel any print requests going to the printer or move them to another print destination (if you have more than one). 
<P><LI>As an absolute last resort, remove all printers from the <I>lp</I> system, reboot the computer, and register them all once again.
</OL>
<A NAME=HEADING33-55></A>
<H4> <A NAME=MARKER-9-10></A>Troubleshooting the BSD lpr Spooling System </H4>
<P>If your print request does not make it to the queue, then<P>
<UL>
<P><LI>Check for error messages. 
<P><LI>Double-check the command that you entered. 
<P><LI>Try submitting the <I>/etc/group</I> file to the queue.
</UL>
<P>The file you submitted may not be in the proper format for the print server to print your request.<P>
<P>If your print request makes it to the queue and never gets to the print server, then<P>
<UL>
<P><LI>Do you have the print server system's IP address and hostname in the <I>/etc/hosts</I> file?
<P><LI>Does the print server system name match the name in the <I>/etc/hosts</I> file? Do they match the hostname of the print server system?
<P><LI>Did you get this error message? <CODE>Waiting</CODE> <CODE>for</CODE> <CODE>remote</CODE> <CODE>queue</CODE> <CODE>to</CODE> <CODE>be</CODE> <CODE>enabled</CODE>.
<P>This message usually means that your hostname is not in the print server system's <I>/etc/hosts.equiv</I> file. If your print request disappears from the queue and does not print, or prints incorrect information, then<P>
<OL>
<P><LI>Become root and enter the commands:
<P><CODE><CODE><B>/usr/etc/lpc stop lp</B></CODE> <I>(or your printer name)</I> </CODE>
<P><CODE><CODE><B>lpr /etc/group</B></CODE> </CODE>
<P><CODE><CODE><B>cd /usr/spool/lpd</B></CODE> <I>(or your spool directory)</I> </CODE>
<P><CODE><CODE><B>ls -l</B></CODE> </CODE>
<P>Your system should return something similar to<P>
<P><CODE>-rw-rw---- 1 root lp 69 Aug 23 14:02 cfA117tls </CODE>
<P><CODE>-rw-rw---- 1 root lp 227 Aug 23 14:02 dfA117tls </CODE>
<P><CODE>-rwxr----- 1 root lp 0 Aug 23 14:01 lock </CODE>
<P><CODE>-rw-rw-r-- 1 root lp 25 Aug 23 14:46 status</CODE>

<P><LI>Check the contents of the control file with the following command:
<P><CODE><CODE><B>cat cfA117tls</B></CODE> </CODE>
<P>Your system should return something similar to<P>
<P><CODE>Htls H the hostname that sent the print request </CODE>
<P><CODE>Proot P the person who sent the request </CODE>
<P><CODE>Jgroup J the jobname </CODE>
<P><CODE>Ctls C class/hostname </CODE>
<P><CODE>Lroot L the person who sent the request </CODE>
<P><CODE>fdfA117tls f name of the file to print </CODE>
<P><CODE>UdfA117tls U name of the file to remove after printing </CODE>
<P><CODE>N/etc/group N the original file name</CODE>
<P><LI>Check the copy of the print file.
<P>It is recommended that you use the <I>more </I>command just in case your test file is not as short as the<I> /etc/group</I> file. The <I>df</I> file should look exactly like the file you attempted to print. In this case, the file <I>dfA117tls</I> should be exactly the same as the <I>/etc/group</I> file.<P>
<P><CODE><CODE><B>more dfA117tls</B></CODE> </CODE>
<P>The system should return something similar to<P>
<P><CODE>sys::0:root,bin,sys,adm </CODE>
<P><CODE>root::0:root </CODE>
<P><CODE>daemon::1:root,daemon </CODE>
<P><CODE>bin::2:root,bin,daemon </CODE>
<P><CODE>adm::3:root,adm,daemon </CODE>
<P><CODE>mail::4:root </CODE>
<P><CODE>uucp::5:uucp </CODE>
<P><CODE>rje::8:rje,shqer </CODE>
<P><CODE>lp::9: </CODE>
<P><CODE>nuucp::10:nuucp </CODE>
<P><CODE>user::20: </CODE>
<P><CODE>other::995: </CODE>
<P><CODE>demos:*:997: </CODE>
<P><CODE>guest:*:998:</CODE>
<P>Now that you have verified that the request is properly spooling on the local system, check the print server system. You may need to contact the System Administrator of the print server system first; you need the root password. Once you enter the <I>stop</I> command on that system, no print requests are printed. Instead, they remain in the queue. Make sure that there are no requests in the queue that are currently printing.<P>
<P><LI>On the print server system, log in as root and enter the command
<P><CODE><CODE><B>/usr/etc/lpc stop lp</B></CODE> </CODE>
<P><LI>On the local system, enter the command
<P><CODE><CODE><B>/usr/etc/lpc start lp</B></CODE> </CODE>
<P><LI>On the print server system, <I>cd</I> to the spool directory.
<P>If you do not know where the spool directory is, use the <I>cat </I>or <I>more </I>command with<I> </I>the <I>/etc/printcap</I> file to look at what is set in the <I>sd:</I> variable.<P>
<P><LI>On the print server system (after step 6), enter the following command:
<P><CODE><CODE><B>ls -l</B></CODE> </CODE>
<P>The print server system should return something similar to<P>
<P><CODE>-rw-r----x 1 root 4 Aug 15 10:27 .seq </CODE>
<P><CODE>-rw-rw---- 1 root 69 Aug 23 14:02 cfA117tls.csd.sgi.com </CODE>
<P><CODE>-rw-rw---- 1 root 227 Aug 23 14:02 dfA117tls </CODE>
<P><CODE>-rwxr------ 1 root 0 Aug 23 14:01 lock </CODE>
<P><CODE>-rw-rw-r-- 1 root 25 Aug 23 14:46 status</CODE>
<P><LI>Check the contents of the control file.
<P><CODE><CODE><B>cat cfA117tls.csd.sgi.com</B></CODE> </CODE>
<P>The print server system should return something similar to<P>
<P><CODE>Htls H the hostname that sent the print request </CODE>
<P><CODE>Proot P the person who sent the request </CODE>
<P><CODE>Jgroup J the jobname </CODE>
<P><CODE>Ctls C class/hostname </CODE>
<P><CODE>Lroot L the person who sent the request </CODE>
<P><CODE>fdfA117tls f name of the file to print </CODE>
<P><CODE>UdfA117tls U name of the file to remove after printing</CODE>
<P><CODE>N/etc/group N the original file name</CODE>

<P><LI>Examine the <I>df*</I> file by entering the following command:
<P><CODE><CODE><B>more dfA117tls</B></CODE> </CODE>
<P>The system should return something similar to<P>
<P><CODE>sys::0:root,bin,sys,adm </CODE>
<P><CODE>root::0:root </CODE>
<P><CODE>daemon::1:root,daemon </CODE>
<P><CODE>bin::2:root,bin,daemon </CODE>
<P><CODE>adm::3:root,adm,daemon </CODE>
<P><CODE>mail::4:root </CODE>
<P><CODE>uucp::5:uucp </CODE>
<P><CODE>rje::8:rje,shqer </CODE>
<P><CODE>lp::9: </CODE>
<P><CODE>nuucp::10:nuucp </CODE>
<P><CODE>user::20:</CODE>
<P><CODE>other::995: </CODE>
<P><CODE>demos:*:997: </CODE>
<P><CODE>guest:*:998:</CODE>
<P>The <I>df</I> file should look exactly like the file you attempted to print. In this case, the print server system's <I>dfA117tls</I> file should be exactly the same as the <I>dfA117tls</I> file that was on your system.<P>
<P><LI>On the print server system, enter the following command:
<P><CODE><CODE><B>/usr/etc/lpc start lp</B></CODE> </CODE>
<P>Your file should now print on the printer. It should look exactly like the output of the <I>more</I> command. If it does not, then contact the System Administrator of the print server system.<P>

</OL>
</UL>
<HR>
<DL>
<DT><A HREF="Periphrls_33.html#HEADING33-2"><B></B>Hardware Troubleshooting Checklist</A><DD>
<DT><A HREF="Periphrls_33.html#HEADING33-16"><B></B>Software Troubleshooting Checklist </A><DD>
<DT><A HREF="Periphrls_33.html#HEADING33-43"><B></B>Troubleshooting Network Printers </A><DD>
<DT><A HREF="Periphrls_33.html#HEADING33-45"><B></B>Emergency Measures </A><DD>
<DT><A HREF="Periphrls_33.html#HEADING33-55"><B></B>Troubleshooting the BSD lpr Spooling System </A><DD>
</DL>

<HR>
<A HREF=Periphrls_34.html>Next</A> | <A HREF=Periphrls_32.html>Prev</A> | <A HREF=Periphrls_31.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
</BODY>
</HTML> 