<!-- Generated by Harlequin Webmaker 2.1.3; Transducer 1.0.2 --> <HTML> <HEAD>
<TITLE>Command Interface to lp </TITLE>
</HEAD>
<BODY Y BGCOLOR="efefef" LINK="0000FF" ALINK="FF0000" VLINK="551a8b">
<A NAME=HEADING17></A>
<A HREF=Periphrls_18.html>Next</A> | <A HREF=Periphrls_16.html>Prev</A> | <A HREF=Periphrls_15.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
<HR>
<A NAME=HEADING17-0></A>
<H2> Command Interface to lp <A NAME=MARKER-9-8></A></H2>
<P>The command interface to <I>lp</I> consists of a set of commands for users sending their jobs to the printer and a set of administrator commands for managing printer resources.<P>
<P>The <I>lp</I> spooling utility allows<P>
<UL>
<P><LI>Grouping printers together into logical classes to maximize throughput. (These printers need not be the same type.) 
<P><LI>Configuring your system to spool to a class of printers. 
<P><LI>Queueing print requests (jobs) so they can be processed by the next available printer. 
<P><LI>Canceling a print request so that an unnecessary job is not printed. 
<P><LI>Starting and stopping <I>lp</I> from processing print requests. 
<P><LI>Changing printer configurations. 
<P><LI>Reporting the status of the <I>lp</I> scheduler. 
<P><LI>Restarting any printing that was not completed if the system was powered down. 
<P><LI>Moving print requests and queues from one printer or class of printers to another.
</UL>
<A NAME=HEADING17-12></A>
<H3> User Command Summary </H3>
<P>The commands described in this section allow users on workstations and across the network to access the printing facilities. Users should use the <I>lp</I> and <I>cancel</I> commands most frequently, the <I>lpstat</I> command occasionally, and the <I>enable</I> and <I>disable</I> commands infrequently, if ever. No special privileges are necessary to use these commands.<P>
<P>This<A NAME=MARKER-2-9></A><A NAME=MARKER-2-10></A> section describes the five basic <I>lp</I> commands.<P>
<DL>
<P><DT><I>lp</I>
<P><DD> Routes jobs to a destination and places them in a queue. The destination may be either a single printer or a class of printers.
<P><DT><I>cancel</I>
<P><DD> Cancels spooled print requests.
<P><DT><I>lpstat</I> 
<P><DD> Reports the status of the <I>lp</I> spooling system.
</DL>
<A NAME=HEADING17-18></A>
<H4> lp: Send a Print Job to a Printer</H4>
<P>The<A NAME=MARKER-2-11></A> <I>lp</I> command routes a print job request to a destination where it is placed in a queue to await printing. The destination may be a single printer or a class of printers. If you do not specify a destination, the request is routed to the default destination. For information on how to set the default printer destination, see <A HREF=Periphrls_18.html#MARKER-9-48>"Changing the Default Printer Destination"</A>.<P>
<P>The form of the <I>lp</I> command is<P>
<PRE>
<P><CODE><B>lp </B></CODE>[<I>options</I>]<I> filename...</I> 
</PRE>
<P>Every time an <I>lp</I> request is made, a request ID is assigned to the job and a record of the request is sent to you. The request ID has this form:<P>
<PRE>
<P><I>destination-seqnum</I> 
</PRE>
<P><I>destination</I> is the printer or class of printers to which the job has been routed. <I>seqnum</I> is an arbitrary sequence number assigned to the job by the <I>lp</I> system.<P>
<P><I>lp</I> has three options that are particularly useful: <B>-n</B>,<B> -d</B>, and <B>-c</B>.<P>
<UL>
<P><LI>Use <B>-n</B> to print more than one copy of a document:
<P><CODE><CODE><B>lp -n<I>number</I></B></CODE> </CODE>
<P><I>number</I> is the number of copies to print. Note that there is no space between <B>-n</B> and <I>number</I>.<P>
<P><LI>Use <B>-d</B> to specify a printer or class of printers other than the default printer (assuming your system has more than one printer defined):
<P><CODE><CODE><B>lp -d<I>destination</I></B></CODE> <I>filename...</I> </CODE>
<P><LI>Use <B>-c</B> (for <I>copy</I>) to send a copy of the file to the printer. This ensures that edits you make to your files after you have issued a print request do not show up in the printed output:
<P><CODE><CODE><B>lp -c <I>filename...</I></B></CODE> </CODE>
</UL>
<P>You can combine these command options in any order. For a complete list of <I>lp</I> options, see the <EM>lp(1)</EM> reference page. <A HREF=#MARKER-9-12>Example 2-1</A> and <A HREF=#MARKER-9-13>Example 2-2</A> show some uses of the <I>lp</I> command.<P>

<P>
<B>Example 2-1 </B>: <A NAME=MARKER-9-12></A>Simple <I>lp</I> Print Requests 
<P>
<PRE>
<P>lp myfile 
<P>lp &lt; myfile 
<P>cat myfile | lp 
</PRE>
<P>To request a printout, you can use the <I>lp</I> command several different ways. The entries in <A HREF=#MARKER-9-12>Example 2-1</A> perform identical functions, sending a simple print request to the default printer. <P>
<P>
<B>Example 2-2 </B>: <A NAME=MARKER-9-13></A>Complex <I>lp</I> Print Request
<P>
<PRE>
<P>lp -n3 -dfoo -c myfile 
</PRE>
<P>The entry in <A HREF=#MARKER-9-13>Example 2-2</A> prints three copies on printer <I>foo</I> and creates a copy of the file for the printer to process, ensuring that if changes are made to the file after the print request, the original file is printed.<A NAME=MARKER-2-14></A><A NAME=MARKER-2-15></A> <P>
<A NAME=HEADING17-43></A>
<H4> cancel: Remove a Print Request </H4>
<P>The <I>cancel</I> command removes a job from the queue. You can cancel a job either before or after it starts printing.<P>
<P>Any user can cancel any other user's job. If you cancel another user's print request, mail is sent to that user. Once you cancel a job, you can request that it be printed again only with the <I>lp</I> command:<P>
<PRE>
<P><CODE><B>cancel <I>printer-name</I></B></CODE> 
<P><CODE><B>cancel <I>request-ID</I></B></CODE> ...
</PRE>
<P>Using the <I>printer-name</I> cancels the job currently being printed. Using the <I>request-ID</I> cancels the specified job(s) whether or not it is currently being printed, as shown in <A HREF=#MARKER-9-16>Example 2-3</A>.<P>
<P>
<B>Example 2-3 </B>: <A NAME=MARKER-9-16></A>Using the <I>cancel</I> Command
<P>
<PRE>
<P><CODE><B>cancel myprinter</B></CODE> 
<CODE>request &quot;myprinter-16&quot; cancelled</CODE> 
<P><CODE><B>cancel myprinter-17</B></CODE> 
<CODE>request &quot;myprinter-17&quot; cancelled</CODE>
</PRE>
<P>Issuing a <I>cancel</I> command does not work when the job is being printed on a remote printer.<A NAME=MARKER-2-17></A><A NAME=MARKER-2-18></A> To cancel a print job on a remote printer, log in to the remote system and issue the <I>cancel</I> command. <P>
<A NAME=HEADING17-53></A>
<H4> <A NAME=MARKER-9-19></A>lpstat: Report lp Status </H4>
<P>The <I>lpstat</I> command reports the status of various aspects of the <I>lp</I> system. To check <I>lp</I> status, type<P>
<P><CODE><B>lpstat</B></CODE> [<I>options</I>] <P>
<P>Use the <B>-t</B> option to display a complete report on the status of the <I>lp</I> system. <P>
<P>For a complete list of options, see the <EM>lpstat(1)</EM> reference page. <P>
<P><A HREF=#MARKER-9-20>Example 2-4</A> shows a sample <I>lpstat</I> <B>-t</B> command and its result:<P>
<P>
<B>Example 2-4 </B>: <A NAME=MARKER-9-20></A>Using the <I>lpstat</I> Command
<P>
<PRE>
<P><CODE><B>lpstat -t</B></CODE> 
<CODE>scheduler is running</CODE> 
<CODE>system default destination: myprinter</CODE> 
<CODE>members of class foo:</CODE> 
<CODE>myprinter</CODE> 
<CODE>device for myprinter: /dev/plp</CODE> 
<CODE>myprinter accepting requests since Jul 31 21:40</CODE> 
<CODE>foo accepting requests since Jul 30 12:23</CODE> 
<CODE>printer myprinter now printing foo-18</CODE> 
<CODE>enabled since Aug 5 15:34</CODE> 
<CODE>foo-18 mylogin 3156 Aug 7 17:11 on myprinter</CODE> 
</PRE>

<A NAME=HEADING17-72></A>
<H3> Administrator Command Summary</H3>
<P>This section summarizes the administrative commands that control the <I>lp</I> system. To execute administrative commands, you must be logged in as either root (that is, the superuser) or lp. Inexperienced users should not use the <I>lp</I> administrative commands.<P>
<DL>
<P><DT><I>lpsched</I>
<P><DD> Starts the <I>lp</I> scheduler
<P><DT><I>lpshut</I>
<P><DD> Stops the <I>lp</I> scheduler
<P><DT><I>disable</I>
<P><DD> Prevents a printer from printing jobs that are in the queue
<P><DT><I>enable</I>
<P><DD> Allows a printer to print jobs in the queue
<P><DT><I>reject</I>
<P><DD> Prevents jobs from queueing at a particular destination
<P><DT><I>accept</I>
<P><DD> Permits job requests to queue at a particular destination
<P><DT><I>lpmove</I>
<P><DD> Moves job requests from one destination to another
<P><DT><I>lpadmin</I>
<P><DD> Configures the <I>lp</I> system
</DL>
<A NAME=HEADING17-82></A>
<H4> lpsched: Start the lp Scheduler </H4>
<P>The<A NAME=MARKER-2-21></A><A NAME=MARKER-2-22></A> <I>lpsched</I> command starts the <I>lp</I> scheduler, the background daemon responsible for scheduling <I>lp</I> requests. <I>lp</I> prints jobs only when the scheduler is running on that system. <I>lpsched</I> is executed automatically each time the computer is booted.<P>
<P>Every time <I>lpsched</I> is executed, it creates a file called <I>SCHEDLOCK</I> in <I>/var/spool/lp</I>. When the scheduler is stopped under normal conditions, <I>SCHEDLOCK</I> is automatically removed. As long as this file exists, the system does not allow another <I>lp</I> scheduler process to run. If the scheduler stops abnormally (for example, if the system shuts down abnormally), you must remove <I>SCHEDLOCK</I> before you use the <I>lpsched</I> command. <P>
<P>To start the lp scheduler, type<P>
<PRE>
<P><CODE><B>/usr/lib/lpsched</B></CODE> 
</PRE>
<P>There is no response from the system to acknowledge the <I>lpsched</I> command; to verify that the scheduler is running, use <I>lpstat</I>.<A NAME=MARKER-2-23></A> <P>

<P>You can disable <I>lpsched</I> from starting at boot time using <EM>chkconfig(1M)</EM>. The command<P>
<P><CODE><B>chkconfig lp off</B></CODE><P>
<P>prevents <I>lpsched</I> from running at system startup. To enable <I>lpsched</I> at system startup, enter<P>
<P><CODE><B>chkconfig lp on</B></CODE><P>
<A NAME=HEADING17-93></A>
<H4> lpshut: Stop the lp Scheduler </H4>
<P>The <I>lpshut</I> command stops the <I>lp</I> scheduler and ends all printing activity. All requests that are being printed when you issue the <I>lpshut</I> command are reprinted in their entirety when the scheduler is restarted.<P>
<P>To stop the <I>lp</I> scheduler, type<P>
<PRE>
<P><CODE><B>/usr/lib/lpshut</B></CODE> 
</PRE>
<A NAME=HEADING17-97></A>
<H4> disable: Stop Printer From Processing Requests </H4>
<P>The <I>disable</I> command prevents the printer from printing jobs in the queue. Possible reasons for disabling the printer include malfunctioning hardware, paper jams, running out of paper, or end-of-day shutdowns. If a printer is busy at the time it is disabled, the request it was printing is reprinted in its entirety when you reenable the printer.<P>
<P>You can send job requests to a printer that has been disabled. The jobs are put in the queue but are not printed until the printer is enabled.<P>
<P>To <I>disable</I> a printer, type<P>
<PRE>
<P><CODE><B>disable </B></CODE>[<CODE><B>-c</B></CODE>] [<CODE><B>-r</B></CODE>&quot;<I>reason</I>&quot;] <I>printer(s)</I> 
</PRE>
<UL>
<P><LI>Use the <B>-c</B> option to cancel the request currently being printed and disable the printer. This is useful if the current request causes the printer to behave abnormally.
<P><LI>Use the<B> -r</B> option to tell other users why you disabled a printer. <I>reason</I> is a character string and must be enclosed in double quotation marks (&quot; &quot;). This string is displayed to anyone trying to use the disabled printer or to anyone issuing the <I>lpstat</I> command.
</UL>
<A NAME=HEADING17-104></A>
<H4> <A NAME=MARKER-2-24></A>enable: Allow Printer to Process Requests </H4>
<P>The <I>enable</I> command permits a printer that has been disabled to begin printing jobs from the queue. <A HREF=#MARKER-9-25>Example 2-5</A> shows how to use the <I>enable</I> command. To <I>enable</I> a printer, type<P>
<PRE>
<P><CODE><B>enable <I>printer...</I></B></CODE> 
</PRE>
<P> <P>
<P>
<B>Example 2-5 </B>: <A NAME=MARKER-9-25></A>Using the <I>enable</I> Command
<P>
<PRE>
<P><CODE><B>disable -r&quot;paper jam&quot; myprinter</B></CODE> 
<CODE>printer &quot;myprinter&quot; now disabled</CODE> 
<P><CODE><B>enable myprinter</B></CODE> 
<CODE>printer &quot;myprinter&quot; now enabled</CODE> 
</PRE>
<A NAME=HEADING17-111></A>
<H4> reject: Prevent Print Requests </H4>
<P>The<A NAME=MARKER-2-26></A> <I>reject</I> command stops <I>lp</I> from routing requests to a destination queue. For example, if a printer has been removed for repairs, or has received too many requests, you may wish to prevent new jobs from being queued at that destination.<P>
<P>If the printer is enabled, all requests that are in the queue when you issue the <I>reject</I> command are printed.<P>
<P>The <I>reject</I> command takes the form<P>
<PRE>
<P><CODE><B>/usr/lib/reject</B></CODE> [<CODE><B>-r</B></CODE>&quot;<I>reason</I>&quot;] <I>destination</I> 
</PRE>
<P>Use the <B>-r</B> option to tell other users why print requests are being rejected. <I>reason</I> is a character string and is enclosed in double quotation marks (&quot; &quot;). This string is reported to anyone trying to use <I>lp</I> to send requests to the specified destination.<P>
<A NAME=HEADING17-117></A>
<H4> <A NAME=MARKER-2-27></A>accept: Allow Print Requests </H4>
<P>The <I>accept</I> command allows job requests to be placed in a queue at the named printer(s) or class(es) of printer(s). As shown in <A HREF=#MARKER-9-28>Example 2-6</A>, <I>accept</I> allows a printer to receive job requests and <I>reject</I> disables printing:<P>
<P>
<B>Example 2-6 </B>: <A NAME=MARKER-9-28></A>Using the <I>accept</I> and <I>reject</I> Commands
<P>
<PRE>
<P><CODE><B>/usr/lib/accept myprinter</B></CODE> 
<CODE>destination &quot;myprinter&quot; now accepting requests</CODE> 
<P><CODE><B>/usr/lib/reject -r&quot;printer broken&quot; myprinter</B></CODE> 
<CODE>destination &quot;myprinter&quot; is no longer accepting requests</CODE> 
</PRE>
<A NAME=HEADING17-122></A>
<H4> lpmove: Move a Request to Another Printer </H4>
<P>The <I>lpmove<A NAME=MARKER-2-29></A></I> command moves print requests from one destination to another. For example, if you have a printer removed for repairs, you may want to move all jobs pending on the queue to a destination with a working printer. You may also use <I>lpmove</I> to move specific requests from one destination to another but only after you have halted the scheduler with the <I>lpshut</I> command. <I>lpmove</I> automatically rejects job requests rerouted to a destination without a printer. The <I>lpmove</I> command takes two forms:<P>
<PRE>
<P><CODE><B>/usr/lib/lpmove</B></CODE> <I>dest1</I> <I>dest2</I> 
<P><CODE><B>/usr/lib/lpmove</B></CODE> <I>request(s)</I> <I>destination</I> 
</PRE>
<P><I>dest1</I>, <I>dest2</I>, and <I>destination</I> are printers or classes of printers. <I>request</I> is a specific request ID.<P>
<P>In the first form of the command, all requests are moved from <I>dest1</I> to <I>dest2</I>. After the move, the printer or printers at <I>dest1</I> does not accept requests until you issue an accept command. All rerouted requests are renamed <I>dest2-nnn</I>, where <I>nnn</I> is a new sequence number in the queue for destination <I>dest2</I>. In the second form, which you can issue only after you stop the scheduler, the rerouted requests are renamed <I>destination</I>-<I>nnn</I>. When you restart the scheduler, the original destinations still accept new requests. <A HREF=#MARKER-9-30>Example 2-7</A> demonstrates the use of the <I>lpmove</I> and <I>lpshut</I> commands.<P>
<P>
<B>Example 2-7 </B>: <A NAME=MARKER-9-30></A>Using the <I>lpmove</I> and <I>lpshut</I> Commands
<P>
<PRE>
<P><CODE><B>/usr/lib/lpmove <I>myprinter yourprinter</I></B></CODE> 
<P><CODE><B>lpshut</B></CODE> 
<P><CODE><B>/usr/lib/lpmove foo-19 foo-20 <I>yourprinter</I></B></CODE> 
<CODE>total of 2 requests moved to yourprinter</CODE> 
</PRE>

<A NAME=HEADING17-133></A>
<H4> lpadmin: Configure Printers </H4>
<P>The <I>lpadmin</I> command has two primary uses: <P>
<UL>
<P><LI>Adding new printers to the system
<P><LI>Changing printer classes and destinations
</UL>
<P>Unlike most IRIX commands, <I>lpadmin</I> requires an option. The <I>lpadmin</I> command takes three forms:<P>
<PRE>
<P><CODE><B>lpadmin -d<I>destination</I></B></CODE> 
<P><CODE><B>lpadmin -x<I>destination</I></B></CODE> 
<P><CODE><B>lpadmin -p<I>printer</I></B></CODE> [<I>options</I>] 
</PRE>
<UL>
<P><LI>Use the <B>-d</B> option to set the system default destination. The <I>destination</I> must already be installed when you issue the command. 
<P><LI>Use the <B>-x</B> option to remove the specified <I>destination</I> from the <I>lp</I> system.
<P>You cannot remove a destination (printer or class) if it has pending requests; you must first either remove all requests with the <I>cancel</I> command or move them to other destinations with <I>lpmove</I>.<P>
<P>Removing the last remaining member of a class deletes that class from <I>lp</I>. Removal of a class, however, does not imply the removal of printers assigned to that class. <P>
<P><B>Note:  </B>The <I>rmprinter</I> command can also be used to remove a printer. See <A HREF=Periphrls_18.html#MARKER-9-43>"Removing a Printer"</A>.
<P><LI>Use the<B> -p</B> option to reassign printers to different classes. This option has two options of its own. With these options, the <I>lpadmin</I> command takes the form
<P><CODE><CODE><B>lpadmin -p<I>printer</I></B></CODE> [<CODE><B>-c<I>class</I></B></CODE>] [<CODE><B>-r<I>class</I></B></CODE>] </CODE>
<UL>
<P><LI>Use the <B>-c</B> option to assign a <I>printer</I> to the specified <I>class.</I>
<P><LI>Use the<B> -r</B> option to remove a <I>printer</I> from the specified <I>class.</I>
<P>The <B>-p</B> option does not work while the scheduler is running. <P>

</UL>
</UL>
<P>In <A HREF=#MARKER-9-31>Example 2-8</A>, the first entry shuts down the <I>lp</I> scheduler. The second entry removes the printer myprinter from the <I>lp</I> spooling system. The printer myprinter is then removed from the foo class and assigned to the boo class with the third entry.<P>
<P>
<B>Example 2-8 </B>: <A NAME=MARKER-9-31></A>Using the <I>lpadmin</I> Command
<P>
<PRE>
<P><CODE><B>/usr/lib/lpshut</B></CODE>
<P><CODE><B>/usr/lib/lpadmin -xmyprinter</B></CODE> 
<P><CODE><B>/usr/lib/lpadmin -pmyprinter -rfoo -cboo</B></CODE> 
</PRE>
<P>For a complete list of options, see the <EM>lpadmin(1M)</EM> reference page. <P>
<HR>
<DL>
<DT><A HREF="Periphrls_17.html#HEADING17-12"><B></B>User Command Summary </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-18"><B></B>lp: Send a Print Job to a Printer</A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-43"><B></B>cancel: Remove a Print Request </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-53"><B></B>lpstat: Report lp Status </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-72"><B></B>Administrator Command Summary</A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-82"><B></B>lpsched: Start the lp Scheduler </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-93"><B></B>lpshut: Stop the lp Scheduler </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-97"><B></B>disable: Stop Printer From Processing Requests </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-104"><B></B>enable: Allow Printer to Process Requests </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-111"><B></B>reject: Prevent Print Requests </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-117"><B></B>accept: Allow Print Requests </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-122"><B></B>lpmove: Move a Request to Another Printer </A><DD>
<DT><A HREF="Periphrls_17.html#HEADING17-133"><B></B>lpadmin: Configure Printers </A><DD>
</DL>

<HR>
<A HREF=Periphrls_18.html>Next</A> | <A HREF=Periphrls_16.html>Prev</A> | <A HREF=Periphrls_15.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
</BODY>
</HTML> 