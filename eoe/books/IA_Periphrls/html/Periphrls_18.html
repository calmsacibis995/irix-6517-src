<!-- Generated by Harlequin Webmaker 2.1.3; Transducer 1.0.2 --> <HTML> <HEAD>
<TITLE>Managing the lp System</TITLE>
</HEAD>
<BODY Y BGCOLOR="efefef" LINK="0000FF" ALINK="FF0000" VLINK="551a8b">
<A NAME=HEADING18></A>
<A HREF=Periphrls_19.html>Next</A> | <A HREF=Periphrls_17.html>Prev</A> | <A HREF=Periphrls_15.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
<HR>
<A NAME=HEADING18-0></A>
<H2> <A NAME=MARKER-9-32></A>Managing the lp System</H2>
<P>This se<A NAME=MARKER-2-33></A>ction contains procedures for adding a printer, removing a printer, changing your default printer, clearing printer <I>log</I> files, and printing over a network.<A NAME=MARKER-2-34></A> <P>
<A NAME=HEADING18-2></A>
<H3> <A NAME=MARKER-9-35></A>Adding a Printer<A NAME=MARKER-2-36></A></H3>
<P>To send print requests to your printer, you must first add your printer by registering it with the lp spooler. The procedures for adding a printer with <I>lp</I> vary. The procedures are divided into the following groups, depending on the type of printer and how it is used:<P>
<UL>
<P><LI>Parallel and serial printers on the local system; see <A HREF=#MARKER-9-37>"Adding Parallel and Serial Printers"</A>.
<P><LI>SCSI printers; see <A HREF=#MARKER-9-38>"Adding a SCSI Printer"</A>.
<P><LI>Printers connected to remote print server systems; see <A HREF=#MARKER-9-39>"Adding a Network Print Server"</A>.
<P><B>Note:  </B>The utilities described in this section, <I>mkcentpr</I>, <I>mkserialpr</I>, <I>mkscsipr</I>, and <I>mknetpr</I>, should be used whenever possible. For a list of supported printers, see the directory <I>/var/spool/lp/model</I>. Additionally, these utilities list the printers they support when they are executed.

</UL>
<A NAME=HEADING18-9></A>
<H4> <A NAME=MARKER-9-37></A>Adding Parallel and Serial Printers</H4>
<P>Silicon Graphics systems are equipped with at least one parallel and one serial port. Both ports are on the back of the workstation and are clearly labeled. <P>
<P>The special file <I>/dev/plp</I> is the interface to the parallel printer port. Some larger servers have multiple parallel ports. <P>
<P>If you have more than one parallel port on your system, the device files that refer to the ports are named according to the board slot in which the CPU board is installed. For example, if you have an IO4 board in slot 2 and another in slot 4, the device files for the parallel ports are <I>/dev/plp2</I> and <I>/dev/plp4</I>. One of these devices (the parallel port attached to the board designated as the primary board) is linked to the default <I>/dev/plp</I>.<P>
<P>Normally, <I>/dev/plp</I> is directly accessed only by a print spooling mechanism such as the <I>lp</I> subsystem. The special file <I>/dev/plp</I> may only be opened for writing one process at a time. However, several processes may open the device in read-only mode to find out the printer status. A printer reset is issued whenever the device file is opened for writing. For a complete description of the parallel printer interface, see the <EM>plp(7)</EM> reference page.<P>
<P>Parallel and serial printers are installed with a similar procedure but to different ports. Your printer hardware documentation should detail the cabling requirements for the printer's interface. Connect the printer interface cable to your printer and to the appropriate port on the back of your workstation.<P>
<P>To register printers connected directly to your computer via a parallel or serial port, follow these steps:<P>
<OL>
<P><LI>Become the superuser with the <I>su</I> command. 
<P><LI>Stop the print spooler. Type
<P><CODE><CODE><B>/usr/lib/lpshut</B></CODE> </CODE>

<P><LI>Choose one of the following commands, depending on the type of port your printer is attached to:
<UL>
<P><LI>Assuming you have a printer attached to the parallel port, use the <I>mkcentpr</I> utility to install the printer in the lp system. Type
<P><CODE><CODE><B>mkcentpr</B></CODE> </CODE>
<P>The <I>mkcentpr</I> utility is an interactive script that prompts you for all necessary information about your printer and then automatically registers it. You should be prepared to specify the device file for the parallel port (<I>/dev/plp</I> unless you have multiple CPU boards installed) and other specific information. Consult the <EM>mkcentpr(1M)</EM> reference page for complete information about <I>mkcentpr</I> syntax. <P>
<P><LI>Assuming you have a printer attached to the serial port, use the <I>mkserialpr</I> utility to install the printer in the lp system. Type
<P><CODE><CODE><B>mkserialpr</B></CODE> </CODE>
<P>The <I>mkserialpr</I> command is similar to <I>mkcentpr</I> except that it is used for the serial port. Consult the <EM>mkserialpr(1M)</EM> reference page for complete information about <I>mkserialpr</I> syntax.<P>
</UL>
<P><LI>To set up the printer as the default printer, type the following command and substitute the printer name by which the printer is known to its users for the <I>printer-name</I>:
<P><CODE><CODE><B>/usr/lib/lpadmin -d<I>printer-name</I></B></CODE> </CODE>
</OL>
<P>Your printer is now registered with the <I>lp</I> system and is ready for printing.<P>
<A NAME=HEADING18-30></A>
<H4> <A NAME=MARKER-9-38></A>Adding a SCSI Printer</H4>
<P>SCSI printers are supported by Impressario. If you have Impressario installed on a nongraphics system, use the <I>mkscsipr</I> command supplied with Impressario to register the printer. Consult the <EM>mkscsipr(1M)</EM> reference page for complete information about <I>mkscsipr</I> syntax.<P>

<A NAME=HEADING18-33></A>
<H4> <A NAME=MARKER-9-39></A>Adding a Network Print Server</H4>
<P>Network print servers allow several users to use the same printer, thus avoiding the expense of having a printer attached to each workstation. In a network, printers attached to remote systems are called print servers, remote systems with print servers attached are called print server systems, and the workstations accessing the print servers are called print clients, as shown in <A HREF=#MARKER-9-40>Figure 2-3</A>. <P>
<P> <IMG SRC="clients.and.servers.gif"><P>
<P>
<B>Figure 2-3 </B>: <A NAME=MARKER-9-40></A>Print Clients, Print Server Systems, and Print Servers
<P>
<P>Print servers must be configured on the print server system before remote clients can configure them successfully across the network.<P>

<P>To configure a print server for use across a network, follow these steps:<P>
<OL>
<P><LI>Log in as the superuser to the print server system (the system where the print server is physically attached). 
<P><LI>Replace <I>client_name </I>in the command below with the hostname of the client that needs access to the print server. Type
<P><CODE><CODE><B>addclient</B></CODE> <I>client_name</I></CODE>
<P><I>addclient</I> grants permission for the specified <I>client_name </I>to access print servers across the network. <P>
<P><B>Note:  </B>The <I>addclient</I> command allows anyone who has access to the <I>lp</I> account on the print client to have the privileges of the <I>lp</I> account on the print server system. This means that your <I>lp</I> system can be modified by the client system users. 
<P>If you want all remote workstations to be able to use print servers on the print server system, type<P>
<P><CODE><CODE><B>addclient -a </B></CODE></CODE>
<P><LI>Both print client and print server systems must be able to communicate across the network. For additional information on network communications, see <A NAME=MARKER-18-41></A><I>IRIX Admin: Networking and Mail<A NAME=MARKER-19-4></A></I>.
<P><LI>On the print client, become superuser. 
<P><LI>On the print client, add the print server to the <I>lp</I> spooler with the script <I>mknetpr</I>:
<P><CODE><CODE><B>mknetpr</B></CODE></CODE>
<P><I>mknetpr</I> then prompts you for name of the queue, hostname, and printer name. You should be prepared to supply this information. Refer to <EM>mknetpr(1M)</EM> for more information. <P>
<P><LI>To set up this print server as the default printer, type this command on the print client, using the <I>printer-name</I> variable from the previous step:
<P><CODE><CODE><B>/usr/lib/lpadmin -d<I>printer-name</I></B></CODE> </CODE>

</OL>
<A NAME=HEADING18-55></A>
<H3> <A NAME=MARKER-9-43></A>Removing a Printer</H3>
<P><A NAME=MARKER-2-44></A><A NAME=MARKER-2-45></A>Under some circumstances, you may want to remove one or more printers from the <I>lp</I> system. The <I>rmprinter</I> utility allows you to remove a specified printer. The <I>preset</I> utility allows you to reset your entire <I>lp</I> system to the way it was when you received your workstation from Silicon Graphics. To remove a specified printer, follow these steps:<P>
<OL>
<P><LI>Become the superuser. 
<P><LI>Remove the printer by entering the command below. Replace printer-name with the name by which the printer is known to users accessing it:
<P><CODE><CODE><B>rmprinter <I>printer-name</I></B></CODE> </CODE>
</OL>
<P>Your printer is now removed from the <I>lp</I> system.<P>
<P>To remove all printers on your system, use the <I>preset</I> command.<P>
<P><B>Caution:  </B>Use <I>preset</I> with extreme care: it removes all printer configuration information.
<OL>
<P><LI>Become the superuser. 
<P><LI>Type
<P><CODE><CODE><B>preset</B></CODE> </CODE>
</OL>
<P>Your <I>lp</I> system is now completely reset and all printers are removed. <A NAME=MARKER-2-46></A><A NAME=MARKER-2-47></A><P>
<A NAME=HEADING18-67></A>
<H3> <A NAME=MARKER-9-48></A>Changing the Default Printer Destination </H3>
<P>The default printer destination for a system can be an individual printer or a printer class. You can set it by using the <I>lpadmin</I> command with the <B>-d</B> option. The system default must be set by the user. A destination must already exist on the <I>lp</I> system before you can designate it as the default destination. See <A HREF=#MARKER-9-35>"Adding a Printer"</A> for setting up a printer.<P>
<P>The <I>lp</I> command determines a request's destination by checking for a <B>-d</B> option on the command line, which, if present, takes precedence over any other established destination. If <B>-d</B> is not present, <I>lp</I> checks to see if the user's environment variable LPDEST is set. If LPDEST is set, it is used; if LPDEST is not set, then the request is routed to the default destination. Setting the environment variable LPDEST allows a user to have a default destination other than the system default.<P>
<A NAME=HEADING18-70></A>
<H3> Managing Printing on Print Server Systems</H3>
<P>Remote<A NAME=MARKER-2-49></A><A NAME=MARKER-2-50></A> printing on the print server system allows users to send print jobs over the network with the same commands that send jobs to a local printer. After the print client's <I>lp</I> spooler queues the print request, it is sent across the network to the remote print server system, where it is processed by that system's <I>lp</I> spooler. As a result of this, you cannot accurately determine the status of a remote print request by using the <I>lpstat</I> command on the local system.<P>
<P>This section covers two aspects of remote printing:<P>
<UL>
<P><LI><A HREF=#MARKER-9-51>"Checking Print Server Status"</A> 
<P><LI><A HREF=#MARKER-9-55>"Canceling Print Server Requests"</A>
</UL>
<A NAME=HEADING18-75></A>
<H4> <A NAME=MARKER-9-51></A>Checking Print Server Status </H4>
<P>When<A NAME=MARKER-2-52></A> you send a print request across the network to a print server, the local <I>lp</I> system always reports that the request is being printed, regardless of its actual status in the print server system's <I>lp</I> spooler. To check the true status, you must remotely access (using <I>rsh</I> or <I>rlogin</I>) the print server system that is processing the job. The remote <I>lp</I> scheduler changes the request ID of any job sent to it over the network to reflect the actual name of the print server and gives it a new sequence number corresponding to its place in the print server queue. To determine a specific job's status, use the <I>lpstat</I> command. <A HREF=#MARKER-9-53>Example 2-9</A> uses <I>rsh</I> to access the print server system:<P>
<P>
<B>Example 2-9 </B>: <A NAME=MARKER-9-53></A>Checking the Print Server's <I>lp</I> Status
<P>
<PRE>
<P><CODE><B>rsh <I>hostname</I></B></CODE> <CODE><B>lpstat -t</B></CODE>
</PRE>
<P><I>hostname</I> is the name of the print server system. <A NAME=MARKER-2-57></A><P>

<A NAME=HEADING18-81></A>
<H4> <A NAME=MARKER-9-55></A>Canceling Print Server Requests </H4>
<P>Once you know the remote print server status, you can use the <I>cancel</I> command on the print server system to cancel jobs on the print server's queue. You must cancel a remote print job from the print server once it has been sent over the network by the local <I>lp</I> system.<P>
<P><A HREF=#MARKER-9-56>Example 2-10</A> uses <I>rsh</I> to access the print server system:<P>
<P>
<B>Example 2-10 </B>: <A NAME=MARKER-9-56></A>Canceling Print Server Requests
<P>
<PRE>
<P><CODE><B>rsh <I>hostname</I></B></CODE> <CODE><B>cancel <I>print-server-name</I></B></CODE> 
<P><CODE><B>rsh <I>hostname</I></B></CODE> <CODE><B>cancel <I>request-ID</I></B></CODE> 
</PRE>
<P><I>hostname</I> is the name of the print server system. Using the <I>print-server-name</I> cancels the job currently being printed. Using the <I>request-ID</I> cancels the specified job whether or not it is currently being printed <A NAME=MARKER-2-57></A><P>
<HR>
<DL>
<DT><A HREF="Periphrls_18.html#HEADING18-2"><B></B>Adding a Printer</A><DD>
<DT><A HREF="Periphrls_18.html#HEADING18-9"><B></B>Adding Parallel and Serial Printers</A><DD>
<DT><A HREF="Periphrls_18.html#HEADING18-30"><B></B>Adding a SCSI Printer</A><DD>
<DT><A HREF="Periphrls_18.html#HEADING18-33"><B></B>Adding a Network Print Server</A><DD>
<DT><A HREF="Periphrls_18.html#HEADING18-55"><B></B>Removing a Printer</A><DD>
<DT><A HREF="Periphrls_18.html#HEADING18-67"><B></B>Changing the Default Printer Destination </A><DD>
<DT><A HREF="Periphrls_18.html#HEADING18-70"><B></B>Managing Printing on Print Server Systems</A><DD>
<DT><A HREF="Periphrls_18.html#HEADING18-75"><B></B>Checking Print Server Status </A><DD>
<DT><A HREF="Periphrls_18.html#HEADING18-81"><B></B>Canceling Print Server Requests </A><DD>
</DL>

<HR>
<A HREF=Periphrls_19.html>Next</A> | <A HREF=Periphrls_17.html>Prev</A> | <A HREF=Periphrls_15.html>Up</A> | <A HREF=Periphrls_1.html>Top</A> | <A HREF=Periphrls_3.html>Contents</A> | <A HREF=Periphrls_39.html>Index</A><BR>
</BODY>
</HTML> 