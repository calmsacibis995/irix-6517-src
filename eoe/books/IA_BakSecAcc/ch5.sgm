<!-- Produced by version 3.14 (11/22/96) of SGI Frame/SGML translator -->
<CHAPTER LBL="5"><TITLE><XREFTARGET ID="31929">Network Security</TITLE><PARAGRAPH>This chapter discusses various ways to make your network more secure. In general, you may need to establish policies regarding network access within a trusted local group, and other policies regarding access to and from external, untrusted networks such as the Internet.<INDEXTARGET ID="ch51"><!-- POSTPROCESSDATA: ch51|security:network --></PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>The System Manager GUI provides a Security and Access Control tasks which you can use to help manage security on your local network. Refer to the <DOCTITLE></DOCTITLE>
<EXTREF IDREF="96534" BOOK="PerSysAdmin" FILE="" HDG="96534" INFO="">Personal System Administration Guide</EXTREF>
<DOCTITLE></DOCTITLE> for details. The discussion in this chapter is based on the command-line and file interface to many of the same functions controlled with the GUI.</NOTE>
<PARAGRAPH>This chapter contains the following sections:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="21803" TYPE="TITLE">&ldquo;Local Area Network Access&rdquo;</XREF> discusses security issues to consider when creating or connecting to a local area network.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="66837" TYPE="TITLE">&ldquo;About Network Security and Firewalls&rdquo;</XREF> introduces issues concerned with how to build a &ldquo;firewall,&rdquo; or barrier, between your local system or site and external, untrusted networks such as the Internet.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="24996" TYPE="TITLE">&ldquo;Hardware Configuration for Firewalls&rdquo;</XREF> summarizes network hardware design configurations from the point of view of security.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="40397" TYPE="TITLE">&ldquo;IRIX Configuration for Security&rdquo;</XREF> describes the details of how to configure an IRIX host to serve as a firewall.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="92547" TYPE="TITLE">&ldquo;Internal Network Security Configuration&rdquo;</XREF> summarizes issues relating to configuring Sendmail and DNS on your firewall and internal network.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<NOTE><PREFIX>Note</PREFIX>This chapter assumes you already have taken measures to secure your host system(s) as described in <XREF IDREF="42210" TYPE="TITLE">Chapter&nbsp;4</XREF>.</NOTE>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="21803">Local Area Network Access<INDEXTARGET ID="ch52"><!-- POSTPROCESSDATA: ch52|security:LAN --></TITLE><PARAGRAPH>Within your local area network, you may be able to allow a degree of internetwork access that is not possible or desirable with networks outside of your control. This section discusses the use of network host and user permission files to control access within your local network.</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>Network Access Control Files<INDEXTARGET ID="ch53"><!-- POSTPROCESSDATA: ch53|network:access control --></TITLE><PARAGRAPH>Three files that help you control access to a host within your network are:<INDEXTARGET ID="ch54"><!-- POSTPROCESSDATA: ch54|<ITALICS>/etc/hosts.equiv</ITALICS> fileetchostsequiv file --><INDEXTARGET ID="ch55"><!-- POSTPROCESSDATA: ch55|<ITALICS>.rhosts</ITALICS> file rhosts file --><INDEXTARGET ID="ch56"><!-- POSTPROCESSDATA: ch56|<ITALICS>/etc/passwd</ITALICS> file etcpasswd file --></PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM><FILENAME>/etc/hosts.equiv</FILENAME> </HANGITEM>
<HANGBODY><PARAGRAPH>A list of hosts that are considered trusted, or <ITALICS>equivalent</ITALICS> to you.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><FILENAME>.rhosts</FILENAME> </HANGITEM>
<HANGBODY><PARAGRAPH>A list of hosts that are allowed access to a specific user account.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><FILENAME>/etc/passwd</FILENAME> </HANGITEM>
<HANGBODY><PARAGRAPH>The list of system accounts and their encrypted passwords.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
<PARAGRAPH>These three files control whether access is granted or denied when a remote host issues an <REFPAGE>rlogin(1C)</REFPAGE>, <REFPAGE>rcp(1C)</REFPAGE>, <REFPAGE>rsh(1C)</REFPAGE>, or <REFPAGE>rdist(1)</REFPAGE> request.</PARAGRAPH>
<PARAGRAPH>When a request for access is received, the file <FILENAME>hosts.equiv</FILENAME> is checked, and if the host is listed in that file, and the target user account is listed in <FILENAME>/etc/passwd</FILENAME>, no further checking is performed and remote access is allowed. In this case, a remote user with a local user ID has equivalent access from a remote host. By default, all successful remote accesses are logged to the <FILENAME>SYSLOG</FILENAME> file as auth.info messages; see <REFPAGE>syslogd(1M)</REFPAGE>.</PARAGRAPH>
<PARAGRAPH>Users can expand this equivalence by listing hosts and specific accounts in .<FILENAME>rhosts</FILENAME> files in their home directories. The <ITALICS>root</ITALICS> login bypasses the <FILENAME>/etc/hosts.equiv</FILENAME> file and uses only the <FILENAME>/.rhosts </FILENAME>file in the <ITALICS>root</ITALICS> directory for equivalence checking. If there is an entry in the <FILENAME>/.rhosts</FILENAME> file for <ITALICS>root</ITALICS>, the <ITALICS>root</ITALICS> user on the remote system will have <ITALICS>root</ITALICS> privilege on your system. For obvious reasons, this is not a secure practice. It is much more secure to handle file transfers through a non-privileged account such as <FILENAME>guest</FILENAME>. Note also that a <FILENAME>.rhosts</FILENAME> file with a system name &ldquo;localhost&rdquo; allows <COMMAND>su</COMMAND> to work without requiring passwords. Refer to <REFPAGE>su(1M)</REFPAGE> for more information.</PARAGRAPH>
<PARAGRAPH>The owner of the .<FILENAME>rhosts</FILENAME> file must be either the user in whose home directory it resides, or the superuser, <ITALICS>root</ITALICS>. If it is owned by another user, or if the file permissions allow anyone who is not the owner of the file to modify it, the contents of a user's .<FILENAME>rhosts</FILENAME> file are automatically disregarded for security reasons.</PARAGRAPH>
<PARAGRAPH>You may wish to disallow use of <FILENAME>.rhosts</FILENAME> files altogether if connecting to an untrusted network (you can add the <CMDLINEOPT>-l</CMDLINEOPT> option to the <COMMAND>rshd</COMMAND> invocation in <FILENAME>/etc/inetd.conf </FILENAME>and thereby disallow these files. See <REFPAGE>rshd(1M)</REFPAGE> for more information). The more secure configurations for such connections are as discussed later in this chapter under <XREF IDREF="66837" TYPE="TITLE">&ldquo;About Network Security and Firewalls&rdquo;</XREF>. For complete information about the <FILENAME>/etc/hosts.equiv</FILENAME> and .<FILENAME>rhosts</FILENAME> files, see the<REFPAGE>&space;hosts.equiv(4)</REFPAGE> reference page.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Local inetd Services </TITLE><PARAGRAPH>The <INDEXTARGET ID="ch57"><!-- POSTPROCESSDATA: ch57|<ITALICS>inetd </ITALICS> daemon --><INDEXTARGET ID="ch58"><!-- POSTPROCESSDATA: ch58|<ITALICS>/etc/inetd.conf</ITALICS> file etcinetdconf file --><COMMAND>inetd</COMMAND> process controls a number of network services that you may or may not want to support on your local area network. You can limit which services you offer and log access to those services by editing the <FILENAME>/etc/inetd.conf</FILENAME> file. See <XREF IDREF="75595" TYPE="TITLE">&ldquo;Limiting inetd Services&rdquo;</XREF>, but note that that discussion refers to limiting these services when connecting to an untrusted network. You may wish to be more lenient in your configuration of <COMMAND>inetd</COMMAND> if you are concerned only with determining policy for a trusted local network.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>X11 Network Access</TITLE><PARAGRAPH>With the X Window System, workstations can run client programs transparently on other hosts on the network. This access is completely independent of controls such as login accounts and passwords and is controlled instead through X protocols.<INDEXTARGET ID="ch59"><!-- POSTPROCESSDATA: ch59|X server access:controlling --></PARAGRAPH>
<PARAGRAPH>In particular, certain system files and a user command, <REFPAGE>xhost(1)</REFPAGE>, control access to the local X server. Configuration of these files and control of this command determine remote access to the server. The system control files are <FILENAME>/var/X11/xdm/Xsession</FILENAME>, <FILENAME>/var/X11/xdm/Xsession.dt</FILENAME>, and <FILENAME>/var/X11/xdm/xdm-config</FILENAME>. These files and the <COMMAND>xhost</COMMAND> command are discussed in detail in the following sections.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>The new default system configuration disables remote access by X servers. In earlier versions remote access was enabled by default. To change the default and allow X server access to a host, refer to <XREF IDREF="34430" TYPE="TITLE">&ldquo;Limiting Access with the xhost Command&rdquo;</XREF>.</NOTE>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="44227">Security and X Server Initialization</TITLE><PARAGRAPH>When the X server starts, it first checks for the existence of an <FILENAME>/etc/X*.hosts</FILENAME><FTNOTE>In the configuration file's name, the asterisk (*) corresponds to the number of the X server on the local host. This is usually 0, so for most workstations the file is <FILENAME>/etc/X0.hosts</FILENAME>. When X server 0 starts, it checks for the file <FILENAME>/etc/X0.hosts</FILENAME>, X server 1 checks for <FILENAME>/etc/X1.hosts</FILENAME>, and so forth. </FTNOTE>
 file. If this file does not exist (this is the IRIX default, shipped configuration), all remote host access to the local X server is disallowed, pending evaluation of the <FILENAME>Xsession</FILENAME> files, which occurs next. The X server next reads the <FILENAME>/var/X11/xdm/Xsession</FILENAME> and <FILENAME>/var/X11/xdm/Xsession.dt</FILENAME> files, and if they do not execute an <FILENAME>xhost</FILENAME> command (this is the default&mdash;the <COMMAND>xhost +</COMMAND> command is commented out), no remote host access to the local X server is allowed. </PARAGRAPH>
<PARAGRAPH>The default X server initialization can be modified as described in the following sections.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Limiting Access with the X0.hosts File</TITLE><PARAGRAPH>You can selectively allow access to remote hosts by listing their names in an <FILENAME>/etc/X*.hosts </FILENAME>file. For example, if the file <FILENAME>/etc/X0.hosts</FILENAME> contains the following line, the remote host bronx is the only workstation allowed to access the local server for X server 0:</PARAGRAPH>
<CODE>
<SCREENDISPLAY>bronx</SCREENDISPLAY>
</CODE>
<PARAGRAPH>In the above example, all other hosts are denied access to the local server at server initialization. (Assuming, that is, that no conflicting <COMMAND>xhost</COMMAND> command is then issued in the <FILENAME>/var/X11/xdm/Xsession</FILENAME> or <FILENAME>/var/X11/xdm/Xsession.dt </FILENAME>files at server startup or subsequently by a user.)</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>Do not link the file <FILENAME>X*.hosts</FILENAME> to any other network host database, such as <FILENAME>/etc/hosts</FILENAME> or <FILENAME>/etc/hosts.equiv</FILENAME>. When the X server starts, it attempts to establish a connection to all hosts that are allowed access permission in the <FILENAME>X*.hosts</FILENAME> file. If this file contains a large number of hosts that are allowed access to the server, you have to wait until connections are established with each of the hosts before the server is started.</NOTE>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="34430">Limiting Access with the xhost Command</TITLE><PARAGRAPH>The <INDEXTARGET ID="ch510"><!-- POSTPROCESSDATA: ch510|security:<ITALICS>xhost</ITALICS> command --><INDEXTARGET ID="ch511"><!-- POSTPROCESSDATA: ch511|<ITALICS>xhost</ITALICS> command --><COMMAND>xhost</COMMAND> command modifies the internal state of the X server. Using <COMMAND>xhost</COMMAND>, you can allow or deny server access for specific hosts, or for all hosts. Note that the <COMMAND>xhost</COMMAND> options that affect access control can be run only from the same workstation as the server.</PARAGRAPH>
<PARAGRAPH>For example, to allow all other hosts access to the X server, remove the comment from the <COMMAND>xhost</COMMAND> line in <FILENAME>/var/X11/xdm/Xsession </FILENAME>and<FILENAME>&space;/var/X11/xdm/Xsession.dt</FILENAME>. By default the entry looks like this:</PARAGRAPH>
<CODE>
# Gives anyone on any host access to this display
# /usr/bin/X11/xhost +
</CODE>
<PARAGRAPH>To allow access to all remote hosts, it should look like this:</PARAGRAPH>
<CODE>
# Gives anyone on any host access to this display
/usr/bin/X11/xhost +
</CODE>
<PARAGRAPH>To limit remote access to a specific server, say one named brooklyn, change the entry to look like this:</PARAGRAPH>
<CODE>
# Gives anyone on any host access to this display
/usr/bin/X11/xhost +brooklyn
</CODE>
<PARAGRAPH>The following section provides more examples of <COMMAND>xhost</COMMAND> commands you may want to place in these files.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Interactive Use of the xhost Command</TITLE><PARAGRAPH>The <COMMAND>xhost</COMMAND> command can also be used interactively. To completely deny access to all hosts on your network through X protocols, use this command:</PARAGRAPH>
<CODE>
<SCREENDISPLAY># </SCREENDISPLAY><USERINPUT>xhost -</USERINPUT>&space;
</CODE>
<PARAGRAPH>To allow complete access to all hosts on your network, use this command:</PARAGRAPH>
<CODE>
<SCREENDISPLAY>#</SCREENDISPLAY><USERINPUT>&space;xhost +</USERINPUT>&space;
</CODE>
<PARAGRAPH>To selectively grant or deny access, specify the name of the specific host or hosts on the command line. For example, this command grants access to a host named brooklyn:</PARAGRAPH>
<CODE>
<SCREENDISPLAY>#</SCREENDISPLAY><USERINPUT>&space;xhost +brooklyn</USERINPUT>&space;
</CODE>
<PARAGRAPH>(When granting access, the plus sign (+) is optional.)</PARAGRAPH>
<PARAGRAPH>This command denies access to both brooklyn and bronx:</PARAGRAPH>
<CODE>
<SCREENDISPLAY>#</SCREENDISPLAY><USERINPUT>&space;xhost -brooklyn -bronx</USERINPUT>&space;
</CODE>
<PARAGRAPH>To see which hosts are currently allowed access to the server, run <INDEXTARGET ID="ch512"><!-- POSTPROCESSDATA: ch512|X server access:checking --><COMMAND>xhost</COMMAND> from the command line with no options:</PARAGRAPH>
<CODE>
<SCREENDISPLAY>#</SCREENDISPLAY><USERINPUT>&space;xhost</USERINPUT>
</CODE>
<PARAGRAPH>You can advise users not to use <COMMAND>xhost +</COMMAND>, or you may delete the command from the system if it is a perceived security risk.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>X Authority</TITLE><PARAGRAPH>For even better security than the default X server configuration described in <XREF IDREF="44227" TYPE="TITLE">&ldquo;Security and X Server Initialization&rdquo;</XREF>, you can enable X authority. To do this, change the <SCREENDISPLAY>DisplayManager*authorize</SCREENDISPLAY> entry in <FILENAME>/var/X11/xdm/xdm-config</FILENAME> to say:</PARAGRAPH>
<PARAGRAPH><SCREENDISPLAY>DisplayManager*authorize: on</SCREENDISPLAY></PARAGRAPH>
<PARAGRAPH>This makes <COMMAND>xdm</COMMAND> generate &ldquo;magic cookies&rdquo; (put in each user's <FILENAME>$HOME/.Xauthority</FILENAME> file), which are then required for any X client to connect to the X server. This provides a good means of X server access control. (Note that this may already be the default on your system.)</PARAGRAPH>
<PARAGRAPH>For more information about X security and authorization, see the<REFPAGE>&space;xsecurity(1)</REFPAGE>, <REFPAGE>xhost(1)</REFPAGE>, <REFPAGE>xauth(1)</REFPAGE>, <REFPAGE>xserver(1)</REFPAGE>, and <REFPAGE>X(1)</REFPAGE> reference pages.</PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="66837">About Network Security and Firewalls</TITLE><PARAGRAPH>After establishing your host and site security policies, you may want to connect your site to external networks such as the Internet. This section is concerned with establishing such a connection with an &ldquo;untrusted&rdquo; network in which you do not control security. This requires special consideration of the interface between your internal, trusted network and the external network. This interface, if it stops some untrusted traffic from entering your trusted network, is called a &ldquo;firewall&rdquo; and is the subject of this section. The remainder of the discussion refers specifically to connecting to the Internet, but you can also apply it to connecting to any untrusted network. <INDEXTARGET ID="ch513"><!-- POSTPROCESSDATA: ch513|firewalls --></PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>About the Internet</TITLE><PARAGRAPH>The Internet is a vast, connected network of heterogeneous computer resources, spanning the globe and growing daily. Increasingly, individuals and organizations are finding access to the Internet to be of importance for a wide variety of services and resources pertinent to their businesses and other interests, including electronic mail, access to vast information archives, and keeping abreast of current developments in a host of areas.<INDEXTARGET ID="ch514"><!-- POSTPROCESSDATA: ch514|Internet, definitioninternet definition --></PARAGRAPH>
<PARAGRAPH>Undoubtedly the most recent spur to the growth of interest in Internet access is the development of the World Wide Web, which provides for both a &ldquo;friendly&rdquo; graphical interface to Internet resources and a standardized means of presenting and accessing them. Products designed for this market, such as WebFORCE, allow their users to establish an Internet presence that can be accessed from around the world.</PARAGRAPH>
<PARAGRAPH>The Internet presents ways to share data that you want to share, but you must take measures to protect data that you want protected. This section addresses an important aspect of this internetworked accessibility: the need to establish and maintain the security of local computers and computer networks. Specifically, computer sites have a need and a right to determine the privacy and safety of their data from competitive interests as well as outright software vandalism. </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Network Security Issues</TITLE><PARAGRAPH>If you are connecting to the Internet, you should configure your connection so that you do not unwittingly risk the exposure or corruption of important data. You should know exactly which (if any) data you are making publicly accessible, and you should guard against the possibility of unwanted intruders gaining access to your site. The Internet has many known (and some famous) instances of unwanted intrusions, vandalism, and so on, and acknowledging and taking measures to prevent such acts is the best way to ensure that your Internet presence is a pleasurable and profitable one.<INDEXTARGET ID="ch515"><!-- POSTPROCESSDATA: ch515|network: security  issues --></PARAGRAPH>
<PARAGRAPH>While it is beyond the scope of this chapter to detail particular instances of malicious or criminal activity on computer networks, a great deal of such information is available on the Internet itself, and makes for useful reading for those responsible for computer security (refer to <XREF IDREF="19364" TYPE="TITLE">&ldquo;Additional Resources&rdquo;</XREF> for pointers to additional information).</PARAGRAPH>
<PARAGRAPH>In general, you need to establish a line of defense between your trusted computer resources (your <ITALICS>internal</ITALICS> network) and the computer resources publicly accessible through the Internet (the <ITALICS>external</ITALICS> network). This line of defense should shield you from direct, external access, and it may be as simple as a single router or computer host or as complex as multiple routers and an entire computer network. (This section is concerned with establishing the secure firewalls possible with a computer host or network, not with the limited firewall protection of a router-only configuration.) Behind this line, you choose the degree to which you want to allow internal, trusted users access to the Internet, and the degree to which external users can access internal resources.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>About Firewalls</TITLE><PARAGRAPH>The line between the external world of untrusted hosts and the internal world of trusted hosts is established by creating a firewall. A firewall is a combination of computer hardware and software that allows you to restrict interactions with the external network (often the Internet) to the degree you desire. The simple formula is the more access you allow, the greater the security concerns; the greater the restrictions you place on access, the easier it is to monitor and maintain security. The tradeoff is one of ease of use versus peace of mind. For system and network administrators, this often translates as balancing the wishes of users with the needs and capacities of the administrator(s).<INDEXTARGET ID="ch516"><!-- POSTPROCESSDATA: ch516|firewall:definition --></PARAGRAPH>
<PARAGRAPH>The downside of a firewall is that employees sometimes require legitimate access to packets that are filtered for security reasons. The alternative, practiced at some sites, is to maintain a high level of security on every networked computer.</PARAGRAPH>
<PARAGRAPH>An example of a simple firewall is shown in <XREF IDREF="83003" TYPE="GRAPHIC">Figure&nbsp;5-1</XREF>. In this illustration, a single computer host is configured with two network interfaces to become what is known as a dual-homed host&mdash;a host with a presence on each of two different networks. When it is configured as described in this chapter, it represents a single, controlled obstruction between your internal network and the Internet where you can focus your security efforts. In this chapter, the term firewall host refers to an IRIX host configured for network security. (Gauntlet for IRIX is an example of a commercial firewall implementation for IRIX&mdash;see your sales representative for details.)</PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="firewall_env.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="5-1"><PREFIX>Figure 5-1 </PREFIX><XREFTARGET ID="83003">A Simple Firewall Environment</CAPTION>
</FIGURE>
</PARAGRAPH>
<PARAGRAPH>The firewall does not in any way restrict interactions on your internal network. Local hosts may share resources in the same way they did before connecting to the firewall. What is different now is how these hosts may interact with external sites as determined by your site policy&mdash;your policy determines how much or how little interaction is allowed. <XREF IDREF="92547" TYPE="TITLE">&ldquo;Internal Network Security Configuration&rdquo;</XREF> presents some scenarios of how you might configure a network with a dual-homed host.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Firewall Design Philosophy</TITLE><PARAGRAPH>The key to administering network security is the firewall. While there are important issues concerning internal security, those issues are the same regardless of whether or not you are connected to the Internet. (See <INDEXTARGET ID="ch517"><!-- POSTPROCESSDATA: ch517|firewall:design philosophy --><XREF IDREF="42210" TYPE="TITLE">Chapter&nbsp;4</XREF> for information on host security and <XREF IDREF="21803" TYPE="TITLE">&ldquo;Local Area Network Access&rdquo;</XREF> for information on local network security.)</PARAGRAPH>
<PARAGRAPH>Regarding the firewall itself:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>Limit users&mdash;if possible, limit users to the sole administrator of the system. If additional users are necessary, refer to <XREF IDREF="42210" TYPE="TITLE">Chapter&nbsp;4</XREF> for a discussion of issues regarding password protection and educating users.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Limit services&mdash;the more services you allow, the more possible security holes you present. In addition and in general, the more complex the software providing these services, the more chance for compromise, and the newer the software, the less chance it has been well tested in the &ldquo;real world.&rdquo;</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Monitor the system&mdash;this document helps you configure the IRIX software of your firewall to maintain log files that can provide information on accesses to your firewall host, including time of access and unsuccessful access attempts. Also, make use of the many standard IRIX tools such as <REFPAGE>w(1)</REFPAGE>, <REFPAGE>ps(1)</REFPAGE>, and so on that give you snapshots of current system activities (see <XREF IDREF="32835" TYPE="TABLE">Table&nbsp;4-3</XREF> for a list of security-related commands).</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Do not run applications on the firewall&mdash;any additional software, besides containing possible security weaknesses, further complicates the software environment, making security control more problematic.</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Monitoring the Firewall</TITLE><PARAGRAPH>Having a firewall does little good if you fail to monitor it adequately. There are several useful tools for checking the security of a firewall:<INDEXTARGET ID="ch518"><!-- POSTPROCESSDATA: ch518|monitoring the firewall firewall: monitoring security --></PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM>Cops</HANGITEM>
<HANGBODY><PARAGRAPH>Checks permission modes, poor passwords, <FILENAME>/etc/password</FILENAME> and <FILENAME>/etc/group</FILENAME> integrity, cron(tab) files, <VARIABLE>setuid</VARIABLE> files, checksum of important binary files, home directories and startup files, anonymous <COMMAND>ftp</COMMAND> setup, unrestricted access methods, superuser (root) security, dates of CERT advisories versus key files, and uses the Kuang expert system.</PARAGRAPH>
<PARAGRAPH>Cops is available from <LAUNCHWORD APP="/usr/sbin/nr" PARMS="ftp://ftp.cert.org/pub/tools/cops">ftp://ftp.cert.org/pub/tools/cops</LAUNCHWORD>
.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>Tripwire</HANGITEM>
<HANGBODY><PARAGRAPH>Checks file and directory integrity, and compares designated files and directories against information in a previously generated database. Any differences are flagged and logged, including added or deleted entries. When run regularly, changes in critical system files are flagged so that damage control measures can be taken immediately.</PARAGRAPH>
<PARAGRAPH>Tripwire is available from <LAUNCHWORD APP="/usr/sbin/nr" PARMS="ftp://ftp.cert.org/pub/tools/tripwire">ftp://ftp.cert.org/pub/tools/tripwire</LAUNCHWORD>
.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>World Wide Web Security Issues</TITLE><PARAGRAPH>There is the same security issue inherent in accessing software on the World Wide Web that has always been an issue when acquiring software from any unknown or untrusted source. When a user clicks on a browser button for a network resource, what is invoked is unknown. A click, for example, could download an executable file with a potential for damage. Users should be aware of this issue. If this is a serious concern at your site, you may consider isolating and limiting those hosts having World Wide Web access.<INDEXTARGET ID="ch519"><!-- POSTPROCESSDATA: ch519|World Wide Web:and securityworld wide web and security --></PARAGRAPH>
<PARAGRAPH>Refer to <XREF IDREF="19364" TYPE="TITLE">&ldquo;Additional Resources&rdquo;</XREF> for a pointer (URL) to additional information on security issues related to the World Wide Web.</PARAGRAPH>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="24996">Hardware Configuration for Firewalls</TITLE><PARAGRAPH>This section discusses how to configure network hardware to serve as the hardware portion of a firewall solution. (For information on how to configure Silicon Graphics software in a firewall solution, refer to <INDEXTARGET ID="ch520"><!-- POSTPROCESSDATA: ch520|firewall:hardware configurationhardware configuration:firewall --><XREF IDREF="40397" TYPE="TITLE">&ldquo;IRIX Configuration for Security&rdquo;</XREF>.) Only setups that include an IRIX host as part of the solution are discussed, as router-only solutions tend to be too limited. A firewall host has the advantages of permitting and restricting specific applications, maintaining log files, and adding authentication to network access.</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>Routers and Firewalls</TITLE><PARAGRAPH>The firewall host is typically combined with a router, whether provided as part of your connection to your Internet service provider or added by you to your private configuration. <INDEXTARGET ID="ch521"><!-- POSTPROCESSDATA: ch521|hardware configuration:routersrouters and firewalls --></PARAGRAPH>
<PARAGRAPH>Routers, if properly configured, provide a certain degree of security by filtering IP packets. You can use your IRIX host as an IP packet filter as described in the <REFPAGE>ipfilterd(1M)</REFPAGE> reference page. Usually, routers are complete hardware devices that provide high-speed IP packet filtering. While many routers can be configured to provide IP packet-level security, they do not support such features as <ITALICS>proxies</ITALICS> and <ITALICS>authentication</ITALICS>. </PARAGRAPH>
<PARAGRAPH>Proxies are proxy servers, which provide for application specific control of network resources.<FTNOTE>For example, the Netscape Proxy Server offers application proxies for several common network services including World Wide Web HTTP servers.</FTNOTE>
 Authentication is a technique you can employ to require users to verify that they are who they say they are. To add these features and more, you must have a network hardware configuration such as the IRIX host setups described in the following sections.</PARAGRAPH>
<PARAGRAPH>You can use IP packet filtering <ITALICS>and</ITALICS> application-level controls by combining routers with firewalls. When using a router with a firewall host, configure it to allow traffic only to the firewall host. You should filter out:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>ICMP<FTNOTE>Internet Control Message Protocol </FTNOTE>
 redirects not from the router</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>IP packets specifying the loose source routing option</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>external packets claiming to be from the internal network (known as &ldquo;spoofing&rdquo;).</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>Consult with your Internet service provider to determine the packet filtering options available for your Internet connection. You can also add routers to your firewall configuration as described in the next section, and then configure your routers with additional filtering options (refer to the router vendor documentation for details). (See also &ldquo;Packet Filtering Gateways,&rdquo; in <DOCTITLE>Firewalls and Internet Security</DOCTITLE>, by Cheswick and Bellovin, referenced in <XREF IDREF="19364" TYPE="TITLE">&ldquo;Additional Resources&rdquo;</XREF>.)</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Hardware Configurations for Use as Firewalls</TITLE><PARAGRAPH>This section discusses general hardware configuration issues for the basic setup of a dual-homed host acting as the firewall, and then presents the &ldquo;screened host&rdquo; and &ldquo;screened subnet&rdquo; firewall configurations.</PARAGRAPH>
<SECTION3 LBL="" HELPID = ""><TITLE>Dual-Homed Host Firewall</TITLE><PARAGRAPH>You can configure your Silicon Graphics host hardware for use in a firewall by making it a dual-homed gateway&mdash;that is, giving it two network connections. <INDEXTARGET ID="ch522"><!-- POSTPROCESSDATA: ch522|host:dual-homeddual-homed host:hardware setup --><XREF IDREF="83003" TYPE="GRAPHIC">Figure&nbsp;5-1</XREF> illustrates the general idea of using a dual-homed host as the firewall.</PARAGRAPH>
<PARAGRAPH>Creating a dual-homed host may involve, for example, adding an additional Ethernet controller board, or you may already have two Ethernet connections. For specific information on the network hardware in your system, refer to your system documentation. </PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Screened Host Gateway</TITLE><PARAGRAPH>A screened host scenario uses a router to screen traffic between the Internet and the external network connection of the firewall host. Routers vary, but in general, they screen IP packets for certain addresses or settings that they have been programmed to disallow. They can further limit traffic to a few ports of the firewall host. No traffic is allowed from the outside to any other host on the internal network. This is the typical connection to the Internet in which the router is provided by the Internet service provider. <INDEXTARGET ID="ch523"><!-- POSTPROCESSDATA: ch523|host:screenedscreened host:hardware setup --><XREF IDREF="73088" TYPE="GRAPHIC">Figure&nbsp;5-2</XREF> illustrates the basic screened host scenario.</PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="screened_host.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="5-2"><PREFIX>Figure 5-2 </PREFIX><XREFTARGET ID="73088">Screened Host</CAPTION>
</FIGURE>
</PARAGRAPH>
<PARAGRAPH>An additional level of complexity&mdash;and flexibility&mdash;is added when you expand the screened host scenario to a screened network scenario. The basic design remains the same, but the screened network receives all external traffic. Both the Internet and the internal network have access to the screened network, but traffic involving the internal network must still pass through the firewall host. This is useful for sites that want to make multiple servers available to the Internet and yet maintain a secure internal network. You could, for example, use one of the public hosts as your WWW server and another as an FTP server, depending on what you want to make available and the relative CPU loads expected.<INDEXTARGET ID="ch524"><!-- POSTPROCESSDATA: ch524|network:screenedscreened network:hardware setup --></PARAGRAPH>
<PARAGRAPH><XREF IDREF="89574" TYPE="GRAPHIC">Figure&nbsp;5-3</XREF> illustrates a screened subnet.<FTNOTE>The &ldquo;screened subnet&rdquo; is sometimes called a &ldquo;demilitarized zone&rdquo; (&ldquo;DMZ&rdquo;) or &ldquo;red zone.&rdquo; </FTNOTE>
</PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="screened_subnet.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="5-3"><PREFIX>Figure 5-3 </PREFIX><XREFTARGET ID="89574">Screened Subnet</CAPTION>
</FIGURE>
</PARAGRAPH>
<PARAGRAPH>In the situation shown in <XREF IDREF="89574" TYPE="GRAPHIC">Figure&nbsp;5-3</XREF>, you continue to concentrate your security efforts on the single firewall host. Remember though, that your servers outside of the firewall are more easily compromised as they are protected only by a router. Keep your private data on the internal network and forward important data collected on the public servers to an internal host. (Details on software configuration are discussed in the next section.) </PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="40397">IRIX Configuration for Security<INDEXTARGET ID="ch525"><!-- POSTPROCESSDATA: ch525|firewall:software configuration --></TITLE><PARAGRAPH>This section discusses the basic network addressing configuration required on a firewall host, and then provides details on configuring IRIX software to tighten security on the host.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>Unless specified otherwise, all the software changes discussed in this section are to be performed on the firewall host.</NOTE>
<SECTION2 LBL="" HELPID = ""><TITLE>Network Software Setup on a Dual-Homed Host</TITLE><PARAGRAPH>A dual-homed host is configured in network software as if it were two hosts, each with a different network address and, optionally, a different name. Use separate IP addresses for the two (or more) network interfaces (see <INDEXTARGET ID="ch526"><!-- POSTPROCESSDATA: ch526|dual-homed host:software setup --><DOCTITLE></DOCTITLE>
<EXTREF IDREF="97829" BOOK="IA_NetwkMail" FILE="" HDG="97829" INFO="">IRIX Admin: Networking and Mail</EXTREF>
<DOCTITLE></DOCTITLE>).</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Tightening Security in IRIX</TITLE><PARAGRAPH>This section discusses various modifications you can make to the IRIX operating system software to provide increased network security. Some of these changes are highly desirable on a firewall; others are more a matter of personal choice depending on the level of security you feel is necessary. The issues discussed include why the changes must or might be made.<INDEXTARGET ID="ch527"><!-- POSTPROCESSDATA: ch527|security:tightening for firewall --></PARAGRAPH>
<PARAGRAPH>The following discussion of changes made to the firewall host software also applies to any host made publicly accessible, such as the WWW server and FTP server shown in the screened subnet example in <XREF IDREF="89574" TYPE="GRAPHIC">Figure&nbsp;5-3</XREF>.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>Do not connect your hardware to the external network until you make the changes described in this section. When you have finished the procedures, reboot your firewall system to ensure that all changes take effect. <ITALICS>Many of these changes do not take effect until the system is rebooted</ITALICS>.</NOTE>
<SECTION3 LBL="" HELPID = ""><TITLE>Disabling Forwarding of IP Packets</TITLE><PARAGRAPH>By default, IRIX forwards IP packets on machines with more than one network hardware interface. You must edit a kernel configuration file, run <INDEXTARGET ID="ch528"><!-- POSTPROCESSDATA: ch528|forwarding IP packetsIP packet forwardingdisabling IP packet forwarding --><COMMAND>autoconfig</COMMAND>, and then reboot to disable this default.</PARAGRAPH>
<PARAGRAPH>Follow this procedure to turn off automatic IP packet forwarding:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>As root, edit the file <FILENAME>/var/sysgen/master.d/bsd</FILENAME>, changing the value of<VARIABLE>&space;ipforwarding</VARIABLE> to 0:</PARAGRAPH>
<PARAGRAPH>Change the line</PARAGRAPH>
<CODE>
int ipforwarding = 1;
</CODE>
<PARAGRAPH>to </PARAGRAPH>
<CODE>
int ipforwarding = 0;
</CODE>
</LIST>
<LIST><PARAGRAPH>Save the modified <FILENAME>/var/sysgen/master.d/bsd</FILENAME> file and exit from the editor.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Run <COMMAND>autoconfig</COMMAND> with the<CMDLINEOPT>&space;-f </CMDLINEOPT>option:</PARAGRAPH>
<EXAMPLE>
# <USERINPUT>autoconfig -f</USERINPUT>
</EXAMPLE>
<PARAGRAPH>This creates a <COMMAND>/unix.install</COMMAND> file, which becomes the new <COMMAND>/unix</COMMAND> after the system is rebooted.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Reboot your system (see <REFPAGE>reboot(1M)</REFPAGE>).</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>To verify that IP packet forwarding has been disabled after your system comes back up, use the <COMMAND>netstat</COMMAND> command:</PARAGRAPH>
<CODE>
# <USERINPUT>netstat -s -p ip | grep forwarding</USERINPUT>
</CODE>
<PARAGRAPH>You should see the following:</PARAGRAPH>
<CODE>
0 packets forwarded (forwarding disabled)
</CODE>
<PARAGRAPH>If you do not see this message, repeat steps 1 through 5 until you do. (Be sure that your root filesystem has enough disk space so that the <FILENAME>/unix.install</FILENAME> file is being created correctly. See <REFPAGE>autoconfig(1M)</REFPAGE> for more information.)</PARAGRAPH>
</LIST>
</ORDEREDLIST>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="75595">Limiting inetd Services</TITLE><PARAGRAPH>When your system starts up, the <INDEXTARGET ID="ch529"><!-- POSTPROCESSDATA: ch529|<ITALICS>inetd</ITALICS> services:limitingFTP services --><COMMAND>inetd</COMMAND> process reads the <FILENAME>/etc/inetd.conf</FILENAME> file for a list of TCP/IP services to support. Comment out services listed in this file that are not very secure or that you are not using.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>These services are being disabled on the firewall only. Services that are commented out in the system files on the firewall may still be available on your internal network&mdash;you just can't use them on the firewall host.</NOTE>
<PARAGRAPH>Follow this procedure to disable selected <COMMAND>inetd</COMMAND> services:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Edit the file <FILENAME>/etc/inetd.conf</FILENAME>, and add the <USERINPUT>#</USERINPUT> symbol at the beginning of the following lines to comment them out (some may have already been commented out):</PARAGRAPH>
<CODE>
exec        stream  tcp     nowait  root    /usr/etc/rexecd         rexecd
bootp       dgram   udp     wait    root    /usr/etc/bootp          bootp
rstatd/1-3  dgram   rpc/udp wait    root    /usr/etc/rpc.rstatd     rstatd
walld/1     dgram   rpc/udp wait    root    /usr/etc/rpc.rwalld     rwalld
rusersd/1   dgram   rpc/udp wait    root    /usr/etc/rpc.rusersd    rusersd
rquotad/1   dgram   rpc/udp wait    root    /usr/etc/rpc.rquotad    rquotad
bootparam/1 dgram   rpc/udp wait    root    /usr/etc/rpc.bootparamd bootparam
ypupdated/1 stream  rpc/tcp wait    root    /usr/etc/rpc.ypupdated  ypupdated
rexd/1      stream  rpc/tcp wait    root    /usr/etc/rpc.rexd       rexd
</CODE>
<PARAGRAPH>In other words, they should look like this:</PARAGRAPH>
<CODE>
#exec        stream  tcp     nowait  root    /usr/etc/rexecd         rexecd
#bootp       dgram   udp     wait    root    /usr/etc/bootp          bootp
#rstatd/1-3  dgram   rpc/udp wait    root    /usr/etc/rpc.rstatd     rstatd
#walld/1     dgram   rpc/udp wait    root    /usr/etc/rpc.rwalld     rwalld
#rusersd/1   dgram   rpc/udp wait    root    /usr/etc/rpc.rusersd    rusersd
#rquotad/1   dgram   rpc/udp wait    root    /usr/etc/rpc.rquotad    rquotad
#bootparam/1 dgram   rpc/udp wait    root   /usr/etc/rpc.bootparamd bootparam
#ypupdated/1 stream  rpc/tcp wait    root   /usr/etc/rpc.ypupdated  ypupdated
#rexd/1      stream  rpc/tcp wait    root    /usr/etc/rpc.rexd       rexd
</CODE>
<PARAGRAPH>If you want details on the services you are disabling, refer to their reference pages. For example, refer to <REFPAGE>rexecd(1M)</REFPAGE> for information on the remote execution server, or <REFPAGE>rexd(1M)</REFPAGE> for information on the RPC-based remote execution server.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH><XREFTARGET ID="97356">Comment out or restrict the following entries in <FILENAME>/etc/inetd.conf</FILENAME>:</PARAGRAPH>
<CODE>
ftp     stream  tcp     nowait  root    /usr/etc/ftpd   ftpd -la
telnet  stream  tcp     nowait  root    /usr/etc/telnetd        telnetd
shell   stream  tcp     nowait  root    /usr/etc/rshd           rshd -L
login   stream  tcp     nowait  root    /usr/etc/rlogind        rlogind
tftp    dgram   udp     wait    guest   /usr/etc/tftpd  tftpd -s \&lbreak;/usr/local/boot /usr/etc/boot
</CODE>
<PARAGRAPH>If you comment them out (totally disable them), they should look like this:</PARAGRAPH>
<CODE>
#ftp     stream  tcp     nowait  root    /usr/etc/ftpd   ftpd -l
#telnet  stream  tcp     nowait  root    /usr/etc/telnetd        telnetd
#shell   stream  tcp     nowait  root    /usr/etc/rshd           rshd -L
#login   stream  tcp     nowait  root    /usr/etc/rlogind        rlogind
#tftp    dgram   udp     wait    guest   /usr/etc/tftpd  tftpd -s \&lbreak;/usr/local/boot /usr/etc/boot
</CODE>
<PARAGRAPH>To be safe, it is best to disable all those services with the comment character as shown above. (Doing so means, however, that the host can only be accessed from the local console.) Of these services, enabling <COMMAND>rshd</COMMAND> is probably the most dangerous, and <COMMAND>tftpd</COMMAND> is almost never required on a firewall. Regarding <COMMAND>ftpd</COMMAND>, refer to <DOCTITLE></DOCTITLE>
<EXTREF IDREF="97829" BOOK="IA_NetwkMail" FILE="" HDG="97829" INFO="">IRIX Admin: Networking and Mail</EXTREF>
<DOCTITLE></DOCTITLE>. If, however, you must include any of these services, change them as indicated below so that they record a log of their use in the file <FILENAME>/var/adm/SYSLOG</FILENAME>:</PARAGRAPH>
<CODE>
ftp     stream  tcp   nowait  root   /usr/etc/ftpd   ftpd -ll
shell   stream  tcp   nowait  root   /usr/etc/rshd   rshd -Lal
tftp    dgram   udp   wait    guest  /usr/etc/tftpd  tftpd -s -l -h /dev/null
</CODE>
<PARAGRAPH>Note the logging options added to each daemon invocation. (For more information, refer to the reference page for any daemon you modify.)</PARAGRAPH>
<PARAGRAPH>The <COMMAND>telnetd</COMMAND> and <COMMAND>rlogind</COMMAND> entries have not been included here because remote logins can (and should) be controlled with the use of one-time passwords. One-time passwords are just that&mdash;a password that can be used once to gain access, but any future use of that same password is disallowed. There are various ways to implement one-time passwords, and how (and if) you use them at your site depends on your need for remote login capability and the degree to which you want to authenticate such logins. Refer to the <DOCTITLE>Firewalls and Internet Security</DOCTITLE> book referenced in <XREF IDREF="19267" TYPE="TITLE">&ldquo;Books&rdquo;</XREF>.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>The <COMMAND>fingerd</COMMAND> service is also a potential security hole because it is a source of account names. You can use the <CMDLINEOPT>-S</CMDLINEOPT> option to suppress information about login status, home directory, and shell, which might be used to attack security:</PARAGRAPH>
<CODE>
finger  stream  tcp     nowait  guest   /usr/etc/fingerd        fingerd -S
</CODE>
<PARAGRAPH>Or, to be more secure, you can configure <COMMAND>fingerd</COMMAND> with the <CMDLINEOPT>-f</CMDLINEOPT> option, to return just a message file. In the following example, a message has been placed in <FILENAME>/etc/fingerd.message</FILENAME>:</PARAGRAPH>
<CODE>
finger  stream  tcp     nowait  guest   /usr/etc/fingerd        fingerd -f \&lbreak;/etc/fingerd.message
</CODE>
<PARAGRAPH>The contents of <COMMAND>/etc/fingerd.message</COMMAND> might say something like:</PARAGRAPH>
<CODE>
Thank you for your interest in XYZ company. Please contact us at xyz.email.address or 1-800-XYZ-PHON for more information.
</CODE>
<PARAGRAPH>This message is then returned for any <COMMAND>finger</COMMAND> access.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>When you have finished making changes to the <FILENAME>/etc/inetd.conf</FILENAME> file, write the changes and exit from the editor. The changes take affect after a reboot. If you want to apply them immediately, enter:</PARAGRAPH>
<EXAMPLE>
# <USERINPUT>killall -HUP inetd</USERINPUT>
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Test any modified services to be sure they perform as expected.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Password Protection on the Firewall<INDEXTARGET ID="ch530"><!-- POSTPROCESSDATA: ch530|password:protection --></TITLE><PARAGRAPH>Limit the number of users with login accounts on the firewall system as much as possible. All accounts in <FILENAME>/etc/passwd</FILENAME> should have a password (see <REFPAGE>passwd(1)</REFPAGE>).</PARAGRAPH>
<PARAGRAPH>Check to see if there are any <FILENAME>/etc/hosts.equiv</FILENAME> or <FILENAME>$HOME/.rhosts</FILENAME> files. These files can be configured to allow remote access without password protection, and should not be allowed on a firewall host. Refer to <REFPAGE>hosts.equiv(4)</REFPAGE> for more information.</PARAGRAPH>
<PARAGRAPH>Refer to <XREF IDREF="75080" TYPE="TITLE">&ldquo;Password Administration&rdquo;</XREF> for details on host access password security.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Limiting rpc Services Access on the Firewall</TITLE><PARAGRAPH>You can limit access to the firewall host's RPC services by use of the <INDEXTARGET ID="ch531"><!-- POSTPROCESSDATA: ch531|<ITALICS>RPC</ITALICS> services:limiting --><COMMAND>portmap</COMMAND> command's <CMDLINEOPT>-a</CMDLINEOPT> option. This allows you to specify the host(s) and/or network(s) that are allowed access to RPC-based services. Edit the file <FILENAME>/etc/config/portmap.options</FILENAME> to add options to the <COMMAND>portmap</COMMAND> command that is executed at system startup.</PARAGRAPH>
<PARAGRAPH>For example, suppose you create a <FILENAME>/etc/config/portmap.options</FILENAME> file with the following entries:</PARAGRAPH>
<CODE>
-a 192.0.2.0
-a 192.14.12.0
</CODE>
<PARAGRAPH>This restricts access to firewall host RPC services to hosts on the Class C networks 192.0.2 and 192.13.12.</PARAGRAPH>
<PARAGRAPH>The syntax for the<CMDLINEOPT>&space;-a</CMDLINEOPT> option allows you to specify multiple network masks, network addresses, and host addresses. As usual, the fewer hosts or networks allowed access, the better the security. Refer to the reference page <REFPAGE>portmap(1M)</REFPAGE> for more information.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="58392">Disabling NIS (YP) on the Firewall</TITLE><PARAGRAPH>Because the nature of NIS (formerly called Yellow Pages) does not accommodate security needs, remove it from the firewall host:<INDEXTARGET ID="ch532"><!-- POSTPROCESSDATA: ch532|NIS:disablingdisabling NIS --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Remove the NIS software from the firewall host with the <COMMAND>versions</COMMAND> command:</PARAGRAPH>
<CODE>
# <USERINPUT>versions remove nfs.sw.nis</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Certain databases may have been modified to add NIS information by including a + symbol in a database entry. Use an editor to remove any lines beginning with the + symbol from the files <FILENAME>/etc/passwd</FILENAME>, <FILENAME>/etc/group</FILENAME>, and <FILENAME>/etc/aliases</FILENAME>.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Remove the <FILENAME>/etc/netgroups</FILENAME> file if it exists.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<CAUTION><PREFIX>Caution</PREFIX>You should not run NIS on a firewall. If you must run NIS, be sure the server is secure and have the clients run <COMMAND>ypbind</COMMAND> with the <CMDLINEOPT>-ypsetme</CMDLINEOPT> option which provides some minimal security. </CAUTION>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="75265">Disallowing NFS Access on the Firewall</TITLE><PARAGRAPH>Exporting filesystems and remote-mounting external systems on the firewall presents security problems. <INDEXTARGET ID="ch533"><!-- POSTPROCESSDATA: ch533|NFS:limiting or disablingdisabling NFS --><ITALICS>You should not use NFS on a firewall</ITALICS>&mdash;remove it with <COMMAND>versions remove nfs.sw.nis</COMMAND>. If for some reason you cannot do this, you have a few (less secure) options:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>You can disallow NFS altogether, using this command:</PARAGRAPH>
<CODE>
# <USERINPUT>chkconfig nfs off</USERINPUT>
</CODE>
</BULLET>
<BULLET><PARAGRAPH>You can edit the <FILENAME>/etc/exports</FILENAME> file to limit exported filesystem permissions and access. You can, for example, use the <SCREENDISPLAY>rw=</SCREENDISPLAY><VARIABLE>hostname</VARIABLE> option to limit read-write access to a specific host, or you can use the <SCREENDISPLAY>access=</SCREENDISPLAY><VARIABLE>client</VARIABLE> option to limit mounting to specified hosts. Refer to the reference page for <REFPAGE>exports(4)</REFPAGE> for more information.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>If you choose to mount external systems on the firewall host, use the <COMMAND>mount</COMMAND> command with the <CMDLINEOPT>nosuid</CMDLINEOPT> option to prevent running a Trojan horse. Refer to the <REFPAGE>fstab(4)</REFPAGE> reference page for details.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>In general, you should mount all filesystems other than your system directories with the <CMDLINEOPT>nosuid</CMDLINEOPT>, <CMDLINEOPT>nodev</CMDLINEOPT> options (refer to <REFPAGE>mount(1M)</REFPAGE>).</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>About  Log Files on the Firewall</TITLE><PARAGRAPH>Log files provide useful information to the firewall administrator, recording specific or all attempts at firewall host login. The various options used to turn on logging for different daemons have been covered in the discussions on each daemon. Note that the log files must be reviewed periodically to be of use.<INDEXTARGET ID="ch534"><!-- POSTPROCESSDATA: ch534|log files --></PARAGRAPH>
<PARAGRAPH>Log files are sensitive information and are best not stored on the firewall host. See the <REFPAGE>syslogd(1M)</REFPAGE> reference page for information on how to forward <COMMAND>syslog</COMMAND> messages from the firewall host to a trusted host inside the firewall.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Checking Software Integrity on the Firewall</TITLE><PARAGRAPH>All software on a firewall host should be watched for modification. A record of checksums of software should be kept and compared periodically to detect unauthorized changes. For this reason too, the less software installed on the firewall host the better. You should always be on the watch for such things as device files outside of <INDEXTARGET ID="ch535"><!-- POSTPROCESSDATA: ch535|software: checking integrity --><FILENAME>/dev</FILENAME>, and files with SUID and GUID permissions set.</PARAGRAPH>
<PARAGRAPH>You can use the <COMMAND>versions</COMMAND> command to display a list of system files modified since installation. For example:</PARAGRAPH>
<CODE>
# <USERINPUT>versions changed</USERINPUT>
Configuration Files

m     = modified since initial installation
?     = modification unknown
blank = file is as originally installed

&space; /etc/init.d/netsite
m /etc/init.d/netsite.O
m /etc/init.d/netsite.N
m /etc/uucp/Devices
&space; /etc/uucp/Devices.N
m /var/X11/xdm/Xsession.dt
&space; /var/X11/xdm/Xsession.dt.O
&space; /var/X11/xdm/xdm-config
&lt;etc>
</CODE>
<PARAGRAPH>You can also use the <COMMAND>versions -m</COMMAND> command to list only modified installed files. Refer to <REFPAGE>versions(1M)</REFPAGE> for more information.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Educating Users About the Firewall</TITLE><PARAGRAPH>You can take great pains to make a secure firewall and then have security compromised by users ignorant of the consequences of their actions. If possible, do not allow user accounts on the firewall host. If you do allow user accounts, be sure to tell the account holders:<INDEXTARGET ID="ch536"><!-- POSTPROCESSDATA: ch536|educating users about securityusers and security --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>Don't use <FILENAME>.rhosts</FILENAME> files. (As the superuser, you can add the <CMDLINEOPT>-l</CMDLINEOPT> option to the <COMMAND>rshd</COMMAND> invocation in <FILENAME>/etc/inetd.conf </FILENAME>and thereby disallow these files on the firewall. See <REFPAGE>rshd(1M)</REFPAGE> for more information.)</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Use passwords with long, non-dictionary, ASCII strings, change them frequently, and don't write them down! </PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Don't use the <COMMAND>&ldquo;xhost +&rdquo;</COMMAND> command. (As superuser, you can delete the binary, or limit its execution to the superuser as well).</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>Even your supposedly protected internal network can be compromised by inappropriate actions of users. If, for example, a user on an internal host attaches a modem and establishes a PPP or SLIP session with an external site, you now have a situation in which the external world has two connections to your internal network&mdash;one through the firewall, but the other directly to a non-secure, internal host.</PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="92547">Internal Network Security Configuration</TITLE><PARAGRAPH>While it is beyond the scope of this section to describe how to configure your internal network, this section discusses issues of DNS and Sendmail configuration that relate specifically to firewall security. Refer to <INDEXTARGET ID="ch537"><!-- POSTPROCESSDATA: ch537|internal network configuration --><DOCTITLE></DOCTITLE>
<EXTREF IDREF="97829" BOOK="IA_NetwkMail" FILE="" HDG="97829" INFO="">IRIX Admin: Networking and Mail</EXTREF>
<DOCTITLE></DOCTITLE> for information on basic Sendmail and DNS setup.</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>Domain Name System (DNS) Security Guidelines</TITLE><PARAGRAPH>DNS, the name service used on the Internet, should be configured for your site to give out the addresses that other sites need to contact you. This might include the address of your router, your firewall host, and any other machines you want others to be able to communicate with. In the case of a simple firewall comprised of a dual-homed host, the dual-homed host would be a DNS server, providing the address of the Internet side of its network connection. In the case of a screened subnet, the DNS server could be any of the &ldquo;public&rdquo; hosts in the subnet, and it could provide addresses for all of these hosts and the router.<INDEXTARGET ID="ch538"><!-- POSTPROCESSDATA: ch538|DNS configuration of internal network --></PARAGRAPH>
<PARAGRAPH>You should also set up the DNS Mail eXchanger (MX) record to advertise the name of the host(s) responsible for mail at your site. This may be the firewall host or another host. </PARAGRAPH>
<PARAGRAPH>Do not publish internal hostnames and addresses on the firewall host. If you have a single firewall host performing multiple services, say FTP and WWW serving, use CNAME records to &ldquo;alias&rdquo; the services to the hostname. This makes it easy to move these services to different hosts if you want to separate them later.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Mail Configuration Security Guidelines</TITLE><PARAGRAPH>This section presents some suggestions for limiting the susceptibility of your site to an attack through the electronic mail system. Internet electronic mail is based on the Simple Mail Transfer Protocol, or SMTP. The program that implements SMTP is commonly referred to as <INDEXTARGET ID="ch539"><!-- POSTPROCESSDATA: ch539|mail:configuration of internal network --><COMMAND>sendmail</COMMAND>. <COMMAND>sendmail</COMMAND> is a large and complicated program that is frequently the subject of attack. </PARAGRAPH>
<SECTION3 LBL="" HELPID = ""><TITLE>Sendmail Configuration and Mail Aliases</TITLE><PARAGRAPH>Your mail system should be configured cooperatively with your DNS configuration. That is, whichever machine your DNS server is advertising as your Mail eXchanger (MX) host must have its <INDEXTARGET ID="ch540"><!-- POSTPROCESSDATA: ch540|sendmail:configuration --><COMMAND>sendmail</COMMAND> configured to accept mail for your network, and to do the appropriate thing with it once it is received. Usually that means to forward the mail to a master mail machine on the internal network, which knows users' internal addresses and how to deliver the mail to them.</PARAGRAPH>
<PARAGRAPH>A note about current convention: It is popular to use the domain name of your network as your electronic mail address. For example, user &ldquo;harry&rdquo; at company XYZ corporation, whose domain name is XYZ.com would have the electronic mail address &ldquo;harry@XYZ.com,&rdquo; as opposed to &ldquo;harry@machine1.XYZ.com.&rdquo; Edit the <FILENAME>/etc/sendmail.cf</FILENAME> file to do this (see <DOCTITLE></DOCTITLE>
<EXTREF IDREF="97829" BOOK="IA_NetwkMail" FILE="" HDG="97829" INFO="">IRIX Admin: Networking and Mail</EXTREF>
<DOCTITLE></DOCTITLE>).</PARAGRAPH>
<PARAGRAPH>To reinforce the electronic mail address of your site, and to make it easy for others to reply to your users' mail, it is recommended that you configure your <COMMAND>sendmail</COMMAND> to rewrite all your addresses to conform to the above convention.</PARAGRAPH>
<PARAGRAPH>For details on how to configure <COMMAND>sendmail.cf</COMMAND>, refer to <DOCTITLE></DOCTITLE>
<EXTREF IDREF="97829" BOOK="IA_NetwkMail" FILE="" HDG="97829" INFO="">IRIX Admin: Networking and Mail</EXTREF>
<DOCTITLE></DOCTITLE>.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Mail Spool Isolation</TITLE><PARAGRAPH>If a barrage of email is sent to your firewall host, it can fill up the disk and paralyze further operation. If you are concerned about this possibility, isolate the mail spool by putting it on a disk or disk partition of its own. While this does not prevent email from being overwhelmed, it does keep a crucial system disk partition, such as <INDEXTARGET ID="ch541"><!-- POSTPROCESSDATA: ch541|mail:spool isolation --><FILENAME>/usr</FILENAME>, from filling up.</PARAGRAPH>
</SECTION3>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="40558">About Proxy Servers</TITLE><PARAGRAPH>A proxy server is an application that implements security for a particular network service. It is basically an application-level gateway that, by &ldquo;understanding&rdquo; the particular application protocol, is able to transparently intercept traffic and so implement protocol-specific security, logging, authentication, and so on.<INDEXTARGET ID="ch542"><!-- POSTPROCESSDATA: ch542|proxy servers --></PARAGRAPH>
<PARAGRAPH>Proxy servers provided on the firewall can allow, for example, internal users to use Netscape Navigator to access the World Wide Web, to use <COMMAND>ftp</COMMAND> to transfer files between a host on the internal network and one on the Internet, or to <COMMAND>telnet</COMMAND> to an external host for an interactive session.</PARAGRAPH>
<PARAGRAPH>The two most common proxy server solutions are server-side proxies and the SOCKS proxy server. The proxy servers available with the optional Gauntlet for IRIX firewall implement server-side-only applications, in which one proxy server exists for each supported application. The SOCKS approach utilizes a <COMMAND>socksd</COMMAND> process on the server, and then requires any application that communicates with it to be &ldquo;SOCKSified&rdquo;; that is, compiled with the SOCKS library. The Netscape Navigator, for example, comes already &ldquo;SOCKSified.&rdquo;</PARAGRAPH>
<PARAGRAPH>Refer to <XREF IDREF="19364" TYPE="TITLE">&ldquo;Additional Resources&rdquo;</XREF> for information on creating your own proxy support, or contact your Silicon Graphics sales representative for information on Gauntlet for IRIX and the Netscape Proxy Server.</PARAGRAPH>
</SECTION2>
</SECTION1>
</CHAPTER>
