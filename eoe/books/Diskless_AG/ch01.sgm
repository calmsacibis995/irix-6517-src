<!-- Produced by version 3.14 (11/22/96) of SGI Frame/SGML translator -->
<CHAPTER LBL="1"><TITLE><XREFTARGET ID="15506">Understanding Diskless Operation</TITLE><PARAGRAPH>This chapter explains the fundamentals of diskless operation. It contains the following sections:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="27993" TYPE="TITLE">&ldquo;Setting Up User Accounts&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="36071" TYPE="TITLE">&ldquo;Diskless Client-Server Model&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="10635" TYPE="TITLE">&ldquo;Diskless Tree&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="88268" TYPE="TITLE">&ldquo;Influence of Client Classes&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="27993">Setting Up User Accounts</TITLE><PARAGRAPH>The general procedure for setting up user accounts is provided in <DOCTITLE>IRIX Admin: System Configuration and Operation</DOCTITLE>, in the section titled, &ldquo;Setting Up a Home Directory for a New User.&rdquo; Because the <FILENAME>/usr</FILENAME> directory is readonly mode on diskless systems, you should either place home directories in an alternate location or make the <FILENAME>/usr/people</FILENAME> directory in the share tree a symlink to another directory (<FILENAME>/home</FILENAME> is a conventional location).</PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="36071">Diskless Client-Server Model</TITLE><PARAGRAPH>Diskless software enables computers on a local area network (LAN) to operate using the disk space, operating system, and support software supplied by a remote host. The relationship between the <ITALICS>server</ITALICS> (the computer supplying the resources) and the <INDEXTARGET ID="ch011"><!-- POSTPROCESSDATA: ch011|server:definition of --><ITALICS>client</ITALICS> (the computer using the resources) is dependent upon network protocols to boot the client over the network link, and upon IRIX, IRIX utilities, and NFS services to sustain the client after it is booted. </PARAGRAPH>
<PARAGRAPH><XREF IDREF="30027" TYPE="GRAPHIC">Figure&nbsp;1-1</XREF> illustrates a diskless configuration and the process by which clients obtain boot files from a server. </PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="Fig1-1.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="1-1"><PREFIX>Figure 1-1 </PREFIX><XREFTARGET ID="30027">Elements of Diskless Service</CAPTION>
</FIGURE>
</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>PROM Resources</TITLE><PARAGRAPH>The PROM on a diskless client must include the Internet Bootstrap Protocol, <FILENAME>bootp</FILENAME>, the network protocol that initiates remote booting. During the client's power-up sequence, <FILENAME>bootp</FILENAME> sends a request for a boot file (the <FILENAME>unix</FILENAME> image) to the diskless server. The server downloads the client's boot file using the Trivial File Transfer Protocol,&space;<INDEXTARGET ID="ch012"><!-- POSTPROCESSDATA: ch012|Trivial File Transfer Protocol. <ITALICS>See tftp</ITALICS> protocol. --><INDEXTARGET ID="ch013"><!-- POSTPROCESSDATA: ch013|<ITALICS>tftp</ITALICS> protocol --><FILENAME>tftp</FILENAME>. (The details of this process are explained in <XREF IDREF="24377" TYPE="TITLE">&ldquo;Debugging the Boot Process&rdquo; in Chapter&nbsp;7</XREF>.) </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>IRIX and IRIX Utilities</TITLE><PARAGRAPH>Client installations of IRIX and its utilities are maintained in dedicated directories on the server. With the exception of the kernel, which resides in client memory after it is downloaded, the client retrieves and executes operating system programs and utilities from the server on an as-needed basis. The swap space that is needed for program execution is also furnished by the server (see <XREF IDREF="84195" TYPE="TITLE">&ldquo;Local Disk Resources&rdquo;</XREF> for exceptions). </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>NFS Resources<INDEXTARGET ID="ch014"><!-- POSTPROCESSDATA: ch014|NFS:function in diskless networks --></TITLE><PARAGRAPH>With the exception of the <FILENAME>unix</FILENAME> boot file, all files needed by a diskless client, including the IRIX operating system and IRIX utilities, are provided by the NFS export and mount facilities. For this reason, a diskless server must be running NFS to export the necessary directories, and the NFS application must be available to each diskless client so that it can mount the exported directories. In addition to the required filesystems that it mounts from the server, a diskless client can also mount NFS filesystems and directories from other remote hosts.<INDEXTARGET ID="ch015"><!-- POSTPROCESSDATA: ch015|Network File System. <ITALICS>See</ITALICS> NFS. --><INDEXTARGET ID="ch016"><!-- POSTPROCESSDATA: ch016|exported filesystems --><INDEXTARGET ID="ch017"><!-- POSTPROCESSDATA: ch017|mounted filesystems (NFS) --></PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="84195">Local Disk Resources</TITLE><PARAGRAPH>A diskless client can be equipped with a local disk of its own. The local disk on such a client does not supply the minimal operating system, and the disk is not used for booting, as it is on conventional standalone systems. Rather, the client obtains booting and operating system resources from the server, and the local disk is reserved for specialized uses. Commonly, the disk is configured to provide local swap space or the <INDEXTARGET ID="ch018"><!-- POSTPROCESSDATA: ch018|local disks:uses for --><FILENAME>/tmp</FILENAME> directory for the client.</PARAGRAPH>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="10635">Diskless Tree<INDEXTARGET ID="ch019"><!-- POSTPROCESSDATA: ch019|diskless tree:elements of --></TITLE><PARAGRAPH>The software on a server that is dedicated to supporting its diskless clients is referred to as the <ITALICS>diskless tree</ITALICS>. Ordinarily, the diskless tree occupies an entire filesystem, but a diskless tree can also be configured as a portion of an existing filesystem. <INDEXTARGET ID="ch0110"><!-- POSTPROCESSDATA: ch0110|diskless tree:definition of --></PARAGRAPH>
<PARAGRAPH>All diskless trees are composed of three basic elements: <ITALICS>share tree</ITALICS>s, <ITALICS>client trees</ITALICS>, and <ITALICS>swap trees</ITALICS>. The overall size and configuration of a diskless tree depends on the number of clients that it supports and the number of IRIX versions it offers.</PARAGRAPH>
<PARAGRAPH><XREF IDREF="22659" TYPE="GRAPHIC">Figure&nbsp;1-2</XREF> illustrates the diskless tree for a server supporting three diskless clients on a single version of IRIX. </PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="Fig1-2.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="1-2"><PREFIX>Figure 1-2 </PREFIX><XREFTARGET ID="22659">Simple Diskless Tree</CAPTION>
</FIGURE>
</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>Share Tree<INDEXTARGET ID="ch0111"><!-- POSTPROCESSDATA: ch0111|share tree:contents of --></TITLE><PARAGRAPH>The share tree contains the portion of the IRIX operating system that can be shared by a group of diskless clients. This includes IRIX kernel modules, hardware-specific files for each workstation model that the client supports, IRIX commands, and IRIX files that cannot be modified. The purpose of the share tree is to minimize the amount of disk space that the diskless implementation requires when it includes more than one client. </PARAGRAPH>
<PARAGRAPH>A diskless tree contains one share tree for each release of IRIX that it supports. Two share trees are required to run a 32-bit and a 64-bit version of the same operating system (an IRIX 6.5 share tree for 32-bit clients and a separate IRIX 6.5 for 64-bit clients, for example). The number of share trees that a server can support depends on the amount of disk space it contains and the usage patterns of its clients. </PARAGRAPH>
<PARAGRAPH><XREF IDREF="37918" TYPE="GRAPHIC">Figure&nbsp;1-3</XREF> illustrates what happens to the diskless tree shown in <XREF IDREF="22659" TYPE="GRAPHIC">Figure&nbsp;1-2</XREF> when an additional IRIX release is added. </PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="Fig1-3.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="1-3"><PREFIX>Figure 1-3 </PREFIX><XREFTARGET ID="37918">Diskless Tree with Multiple Share Trees</CAPTION>
</FIGURE>
</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Client Tree<INDEXTARGET ID="ch0112"><!-- POSTPROCESSDATA: ch0112|client trees:contents of --></TITLE><PARAGRAPH>A client tree contains the IRIX kernel for an individual client, the specific hardware files that the client requires, and private files such as <INDEXTARGET ID="ch0113"><!-- POSTPROCESSDATA: ch0113|private files:in client tree --><FILENAME>/etc/hosts</FILENAME>, <FILENAME>/etc/fstab, </FILENAME>and <FILENAME>/etc/sys_id</FILENAME>. All other operating system files reside on the share tree. The diskless tree contains a client tree for each client that it supports. </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Swap Tree<INDEXTARGET ID="ch0114"><!-- POSTPROCESSDATA: ch0114|swap trees:contents of --></TITLE><PARAGRAPH>The swap tree provides the disk space that an individual client needs for virtual memory operations. It contains a single file whose contents support the virtual memory function of that client. The diskless tree typically contains a swap tree for every client that it supports; however, if a client contains a disk, the local disk may supply its swap space (details are explained in <INDEXTARGET ID="ch0115"><!-- POSTPROCESSDATA: ch0115|virtual memory --><XREF IDREF="20787" TYPE="TITLE">&ldquo;Adding a Local Swap Partition&rdquo;</XREF>). </PARAGRAPH>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="88268">Influence of Client Classes</TITLE><PARAGRAPH>A <INDEXTARGET ID="ch0116"><!-- POSTPROCESSDATA: ch0116|client classes --><ITALICS>class</ITALICS> is a group of workstations that contain identical CPU and graphics hardware. A class is generally (but not always) designated by a model name, such as O2<SUPERSCRIPT>&trade;</SUPERSCRIPT> or Octane<SUPERSCRIPT>&trade;</SUPERSCRIPT>. </PARAGRAPH>
<PARAGRAPH>A client class requires its own hardware-specific software modules. For this reason, a share tree must contain all the hardware-specific modules needed to support every class in its client base. By contrast, a client tree contains only those hardware-specific modules needed to support the individual client that is using it (details are explained in <XREF IDREF="26929" TYPE="TITLE">&ldquo;Client Hardware Variables in the Share Tree Configuration File&rdquo;</XREF>).</PARAGRAPH>
</SECTION1>
</CHAPTER>
