<!-- Produced by version 4.3 (11/99) of SGI Frame/SGIDOCBK SGML translator -->
<CHAPTER ID="LE82626-PARENT"><TITLE ID="LE82626-TITLE">Using the Command (PROM) Monitor</TITLE><PARA>This chapter describes the command (PROM) monitor programs, which control the boot environment for all SGI workstations and servers. With the command monitor, you can boot and operate the CPU under controlled conditions, run the CPU in command monitor mode, and load programs (for example, the operating system kernel, <FILENAME>/unix</FILENAME> or special debugging and execution versions of the kernel).</PARA>
<PARA>Refer to the <COMMAND>prom(1M)</COMMAND> man page for detailed information on the PROM monitor.</PARA>
<PARA>This chapter contains information on the following topics:</PARA>
<ITEMIZEDLIST><LISTITEM><PARA>Basic instruction on entering the command monitor. See <XREF LINKEND="LE67275-TITLE">..</PARA></LISTITEM>
<LISTITEM><PARA>A summary of the commands available through the general command monitor. See <XREF LINKEND="LE64159-TITLE">..</PARA></LISTITEM>
<LISTITEM><PARA>How to get help while using the command monitor. See <XREF LINKEND="LE57724-TITLE">..</PARA></LISTITEM>
<LISTITEM><PARA>Instructions for convenient use of the command monitor. See <XREF LINKEND="LE54373-TITLE"> and <XREF LINKEND="LE29934-TITLE">..</PARA></LISTITEM>
<LISTITEM><PARA>Instructions for manipulating the command monitor environment. See <XREF LINKEND="LE63851-TITLE">..</PARA></LISTITEM>
<LISTITEM><PARA>Instructions for booting programs from the command monitor. See <XREF LINKEND="LE37004-TITLE">..</PARA></LISTITEM>
</ITEMIZEDLIST>
<SECTION><TITLE>About the PROM Monitor</TITLE><PARA>PROM stands for Programmable Read-Only Memory. Most PROM chips are placed in your computer at the factory with software programmed into them that allows the CPU to boot and allows you to perform system administration and software installations. The PROMs are not part of your disk or your operating system; they are the lowest level of access available for your system. You cannot erase them or bypass them.</PARA>
<PARA>Since PROMs are not normally changed after the manufacture of the system, some features may not be present on older systems. Some systems have PROM firmware that responds to new programming when the operating system is updated. See your hardware owner's guide and release notes for information specific to your system.</PARA>
<PARA>Newer systems use a PROM called the ARCS PROM. ARCS stands for Advanced Risc Computing Standard. This PROM provides a graphical interface and allows mouse control of booting and execution. ARCS systems also support the use of the keyboard, and the older key syntaxes have been retained for compatibility. Systems that use the ARCS prom include some models of Indigo, Indy, Indigo<SUPERSCRIPT>2</SUPERSCRIPT>, CHALLENGE, Onyx, some Crimson systems, as well as the Origin systems.</PARA>
</SECTION>
<SECTION  ID="LE67275-PARENT"><TITLE  ID="LE67275-TITLE">Entering the Command (PROM) Monitor</TITLE><PARA>To get<INDEXTERM ID="ITch09-0"><PRIMARY>entering the Command Monitor</PRIMARY>
</INDEXTERM>
 int<INDEXTERM ID="ITch09-1"><PRIMARY>Command Monitor, entering</PRIMARY>
</INDEXTERM>
o the <INDEXTERM ID="ITch09-2"><PRIMARY>PROM Monitor, entering</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-3"><PRIMARY>entering the PROM Monitor</PRIMARY>
</INDEXTERM>
command monitor on most systems, follow the steps in <XREF LINKEND="LE33386-TITLE">:</PARA><PROCEDURE  ID="LE33386-PARENT"><TITLE  ID="LE33386-TITLE">Using the Command Monitor</TITLE>
<STEP><PARA>Reboot the system with the <COMMAND>reboot</COMMAND> command, or if the system is already off, turn it on.</PARA>
<PARA>On server systems without graphics capability, you see the following prompt:</PARA>
<LITERALLAYOUT>
Starting up the system....
To perform system maintenance instead, press &lt;Esc&gt;
</LITERALLAYOUT>
<PARA>On systems with graphics, you see similar messages, displayed on your screen as shown in <XREF LINKEND="LE84100-TITLE">.</PARA><FIGURE><GRAPHIC FILEREF="ch10.sysstart.gif" LOCATION="INLINE" SCALE="NO"></GRAPHIC>
<TITLE  ID="LE84100-TITLE">ARCS System Startup Message</TITLE>
</FIGURE>
<PARA>The procedures are substantially the same for graphical or text usage, except that you need not press the <KEYCAP>Esc</KEYCAP> key on graphics systems, instead you can use your mouse cursor to click a button labeled <INTERFACE>Stop for Maintenance</INTERFACE>.</PARA>
</STEP>
<STEP><PARA>Press <KEYCAP>Esc</KEYCAP> or click the button. You see the following menu, or a similar menu:</PARA>
<PROGRAMLISTING>
System Maintenance Menu
1   Start System
2   Install System Software
3   Run Diagnostics
4   Recover System
5   Enter Command Monitor
6   Select Keyboard Layout
</PROGRAMLISTING>
<PARA>The menu items have the following effects:</PARA>
<DEFLIST><DEFLISTENTRY><TERM><INTERFACE>Start System</INTERFACE></TERM>
<LISTITEM><PARA>This option starts the default operating system. </PARA>
</LISTITEM>
</DEFLISTENTRY>
<DEFLISTENTRY><TERM><INTERFACE>Install System Software</INTERFACE></TERM>
<LISTITEM><PARA>This option brings up the standalone version of <COMMAND>inst(1M)</COMMAND>. See <CITETITLE><LINK BOOK="IA_InstLicns" EXTREF="29804">IRIX Admin: Software Installation and Licensing</LINK>
</CITETITLE> for further information on this option. If your system has the ARCS PROM, it allows you to interactively select the type of device you will use to perform the installation (for example, tape drive, network connection, or CD-ROM drive) and then select the specific device from those of the specified type.</PARA>
</LISTITEM>
</DEFLISTENTRY>
<DEFLISTENTRY><TERM><INTERFACE>Run Diagnostics</INTERFACE></TERM>
<LISTITEM><PARA>This option runs a diagnostic program on your system hardware. See your system owner's guide for further information on this option.</PARA>
</LISTITEM>
</DEFLISTENTRY>
<DEFLISTENTRY><TERM><INTERFACE>Recover System</INTERFACE></TERM>
<LISTITEM><PARA>This option allows you to read a previously made system backup onto the system disk. See <CITETITLE><LINK BOOK="IA_BakSecAcc" EXTREF="70848">IRIX Admin: Backup, Security, and Accounting</LINK>
</CITETITLE> for further information on this option. If your system has the ARCS PROM, it allows you to interactively select the type of device you will use to perform the recovery (for example, tape drive, network connection, or CD-ROM drive) and then select the specific device from those of the specified type.</PARA>
</LISTITEM>
</DEFLISTENTRY>
<DEFLISTENTRY><TERM><INTERFACE>Enter Command Monitor</INTERFACE></TERM>
<LISTITEM><PARA>This option allows you to enter the command monitor program, described in this chapter.</PARA>
</LISTITEM>
</DEFLISTENTRY>
<DEFLISTENTRY><TERM><INTERFACE>Select Keyboard Layout</INTERFACE></TERM>
<LISTITEM><PARA>This option allows you to select from several different keyboard layouts for common languages.</PARA>
</LISTITEM>
</DEFLISTENTRY>
</DEFLIST>
</STEP>
<STEP><PARA>Enter the numeral <USERINPUT>5</USERINPUT> and press <KEYCAP>Enter</KEYCAP> or click on the appropriate button. You see the command monitor prompt:</PARA>
<LITERALLAYOUT>
<LITERAL>&gt;&gt;</LITERAL>
</LITERALLAYOUT>
<PARA>You have entered the <STRUCTNAME>command monitor</STRUCTNAME>.</PARA>
</STEP>
</PROCEDURE>
</SECTION>
<SECTION  ID="LE64159-PARENT"><TITLE  ID="LE64159-TITLE">Summary of Command Monitor Commands</TITLE><PARA><INDEXTERM ID="ITch09-4"><PRIMARY>autoboot</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-5"><PRIMARY><COMMAND>boot</COMMAND>
</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-6"><PRIMARY><COMMAND>disable</COMMAND>
</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-7"><PRIMARY>console</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-8"><PRIMARY>help</PRIMARY>
<SECONDARY>during boot up</SECONDARY>
</INDEXTERM>
<XREF LINKEND="LE40987-TITLE"> summarizes the command monitor commands and gives each command's syntax. Note that not all commands work on all systems</PARA><TABLE FRAME="topbot"><TBLTITLE  ID="LE40987-TITLE">Command Monitor Command Summary</TBLTITLE>
<TGROUP COLS="3">
<COLSPEC COLWIDTH="136*">
<COLSPEC COLWIDTH="368*">
<COLSPEC COLWIDTH="284*">
<THEAD><ROW><ENTRY><PARA>Command</PARA></ENTRY>
<ENTRY><PARA>Description</PARA></ENTRY>
<ENTRY><PARA>Syntax</PARA></ENTRY>
</ROW>
</THEAD>
<TBODY><ROW><ENTRY><PARA><COMMAND>auto</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Boots default operating system (no 
arguments). This has the same effect as 
choosing <INTERFACE>Start System</INTERFACE> from the <INTERFACE>PROM 
Monitor</INTERFACE> initial menu.</PARA></ENTRY>
<ENTRY><PARA><COMMAND>auto</COMMAND></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>boot</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Boots the named file with the given 
arguments.</PARA></ENTRY>
<ENTRY><PARA><COMMAND>boot </COMMAND>[<LITERAL>-f</LITERAL> ][<LITERAL>-n</LITERAL>] <REPLACEABLE>pathname</REPLACEABLE></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>date</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Displays or sets the date and time.</PARA></ENTRY>
<ENTRY><PARA><KEYCAP>date</KEYCAP> [<REPLACEABLE>mmddhhmm</REPLACEABLE>
<ACCEL></ACCEL><ACCEL>[<REPLACEABLE></REPLACEABLE><REPLACEABLE>ccyy</REPLACEABLE>|<REPLACEABLE>yy</REPLACEABLE>] 
[<REPLACEABLE>.ss<LITERAL></LITERAL><LITERAL>]]</LITERAL>&ensp;</REPLACEABLE>
</ACCEL>
</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>eaddr</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Prints the Ethernet address of the built-in 
Ethernet controller on this system.</PARA></ENTRY>
<ENTRY><PARA>eaddr</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>exit</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Leaves command monitor and returns to the 
<INTERFACE>PROM</INTERFACE> menu.</PARA></ENTRY>
<ENTRY><PARA><COMMAND>exit</COMMAND></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>help</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Prints a command monitor command 
summary.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>help</USERINPUT> [<REPLACEABLE>command</REPLACEABLE>] <NEWLINE>
<COMMAND>?</COMMAND> [<REPLACEABLE>command</REPLACEABLE>] </PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>hinv</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Prints an inventory of known hardware on 
the system. Some optional boards may not 
be known to the PROM monitor.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>hinv</USERINPUT></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>init</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Partially restarts the command monitor, 
noting changed environment variables. </PARA></ENTRY>
<ENTRY><PARA><USERINPUT>init</USERINPUT></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>ls</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Lists files on a specified device.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>ls</USERINPUT>&ensp;<REPLACEABLE>devicename</REPLACEABLE></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>off</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Turns off power to the system.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>off</USERINPUT></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>passwd</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Sets PROM password.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>passwd</USERINPUT></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>pathname</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Given a valid file pathname, the system 
attempts to find and execute any program 
found in that path.</PARA></ENTRY>
<ENTRY><PARA><REPLACEABLE>pathname</REPLACEABLE></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>printenv</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Displays the current environment variables.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>printenv</USERINPUT> [<REPLACEABLE>env_var_list</REPLACEABLE>]</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>resetenv</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Resets all environment variables to default.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>resetenv</USERINPUT></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>resetpw</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Resets the PROM password to null (no 
password required).</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>resetpw</USERINPUT></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>setenv</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Sets environment variables. Using the <LITERAL>-p</LITERAL> 
flag makes the variable setting persistent, 
that is, the setting remains through reboot 
cycles. </PARA></ENTRY>
<ENTRY><PARA><USERINPUT>setenv</USERINPUT> [<USERINPUT>-p</USERINPUT>] <REPLACEABLE>variable value</REPLACEABLE></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>single</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Boots the system into single-user mode.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>single</USERINPUT></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>unsetenv</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Unsets an environment variable.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>unsetenv</USERINPUT>&ensp;<REPLACEABLE>variable</REPLACEABLE></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><COMMAND>version</COMMAND></PARA></ENTRY>
<ENTRY><PARA>Displays command monitor version.</PARA></ENTRY>
<ENTRY><PARA><USERINPUT>version</USERINPUT></PARA></ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>
</SECTION>
<SECTION  ID="LE57724-PARENT"><TITLE  ID="LE57724-TITLE">Getting Help in the Command Monitor</TITLE><PARA><INDEXTERM ID="ITch09-9"><PRIMARY>getting help</PRIMARY>
</INDEXTERM>
The question mark (<COMMAND>?</COMMAND>) command displays a short description of a specified command. If you do not specify a command, the <COMMAND>?</COMMAND> command displays a summary of all command monitor commands. To get help, type either <USERINPUT>help</USERINPUT> or a question mark (<USERINPUT>?</USERINPUT>).</PARA>
<LITERALLAYOUT>
<USERINPUT>help </USERINPUT>[<REPLACEABLE>command</REPLACEABLE>]
<USERINPUT>?</USERINPUT> [<REPLACEABLE>command</REPLACEABLE>]
</LITERALLAYOUT>
</SECTION>
<SECTION  ID="LE54373-PARENT"><TITLE  ID="LE54373-TITLE">Using Command Monitor Commands</TITLE><PARA>The following sections cover these subjects:</PARA>
<ITEMIZEDLIST><LISTITEM><PARA>The command syntax notation that this chapter uses</PARA>
</LISTITEM>
<LISTITEM><PARA>The function of the commands listed in <XREF LINKEND="LE40987-TITLE"></PARA></LISTITEM>
</ITEMIZEDLIST>
<SECTION><TITLE>About the Command Line Editor in the Command Monitor</TITLE><PARA>You can edit on the command line by using the commands shown in <XREF LINKEND="LE96654-TITLE">.</PARA><TABLE FRAME="topbot"><TBLTITLE  ID="LE96654-TITLE">Command Monitor Command Line Editor</TBLTITLE>
<TGROUP COLS="2">
<COLSPEC COLWIDTH="226*">
<COLSPEC COLWIDTH="558*">
<THEAD><ROW><ENTRY><PARA>Command</PARA></ENTRY>
<ENTRY><PARA>Description </PARA></ENTRY>
</ROW>
</THEAD>
<TBODY><ROW><ENTRY><PARA><USERINPUT>Ctrl+h, Delete</USERINPUT>&ensp;</PARA></ENTRY>
<ENTRY><PARA>Deletes previous character</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><USERINPUT>Ctrl+u</USERINPUT>&ensp;</PARA></ENTRY>
<ENTRY><PARA>Deletes entire line; question mark (<USERINPUT>?</USERINPUT>) prompts for corrected line</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><USERINPUT>Ctrl+c</USERINPUT>&ensp;</PARA></ENTRY>
<ENTRY><PARA>If a command is executing, kills current command</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><USERINPUT>!!</USERINPUT>&ensp;</PARA></ENTRY>
<ENTRY><PARA>Repeats the last command</PARA></ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>
</SECTION>
<SECTION><TITLE><INDEXTERM ID="ITch09-10"><PRIMARY>PROM monitor</PRIMARY>
<SECONDARY>command line editor</SECONDARY>
</INDEXTERM>
Command Monitor Command Syntax</TITLE><PARA>The command monitor command syntax is designed to resemble the syntax of commands used with the IRIX operating system. This chapter uses IRIX notation for command descriptions:</PARA>
<ITEMIZEDLIST><LISTITEM><PARA><LITERAL>Fixed-space font</LITERAL> denotes literal items such as commands, files, routines,  path names, signals, messages, and  programming language structures. Type them as they are shown.</PARA>
</LISTITEM>
<LISTITEM><PARA>Square brackets ([]) surrounding an argument means that the argument is optional. </PARA>
</LISTITEM>
<LISTITEM><PARA>Vertical lines (|) separating arguments mean that you can specify only one optional argument within a set of brackets.</PARA>
</LISTITEM>
<LISTITEM><PARA><REPLACEABLE>file</REPLACEABLE> means that you must specify a filename. A filename includes a device specification as described in <XREF LINKEND="LE61877-TITLE">..</PARA></LISTITEM>
</ITEMIZEDLIST>
</SECTION>
<SECTION  ID="LE61877-PARENT"><TITLE  ID="LE61877-TITLE">Command Monitor Filename Syntax</TITLE><PARA><INDEXTERM ID="ITch09-11"><PRIMARY>PROM monitor</PRIMARY>
<SECONDARY>command syntax</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-12"><PRIMARY>syntax</PRIMARY>
<SECONDARY>PROM monitor</SECONDARY>
</INDEXTERM>
When you specify filenames for command monitor commands, use this syntax:</PARA>
<LITERALLAYOUT>
<REPLACEABLE>device</REPLACEABLE>([<REPLACEABLE>cntrlr</REPLACEABLE>,[<REPLACEABLE>unit</REPLACEABLE>[,<REPLACEABLE>partition</REPLACEABLE>]]])<REPLACEABLE>file</REPLACEABLE>
</LITERALLAYOUT>
<ITEMIZEDLIST><LISTITEM><PARA><REPLACEABLE>device</REPLACEABLE> specifies a device driver name known to the PROM.</PARA>
</LISTITEM>
<LISTITEM><PARA><REPLACEABLE>cntrlr</REPLACEABLE> specifies a controller number for devices that may have multiple controllers. </PARA>
</LISTITEM>
<LISTITEM><PARA><REPLACEABLE>unit</REPLACEABLE> specifies a unit number on the specified controller.</PARA>
</LISTITEM>
<LISTITEM><PARA><REPLACEABLE>partition</REPLACEABLE> specifies a partition number within a unit.</PARA>
</LISTITEM>
<LISTITEM><PARA><REPLACEABLE>file</REPLACEABLE> specifies a pathname for the file to be accessed.</PARA>
</LISTITEM>
</ITEMIZEDLIST>
<PARA>If you do not specify <REPLACEABLE>cntrlr</REPLACEABLE>, <REPLACEABLE>unit</REPLACEABLE>, and <REPLACEABLE>partition</REPLACEABLE>, they default to zero. The notation shows that you can specify only a <REPLACEABLE>cntrlr</REPLACEABLE>, a <REPLACEABLE>cntrlr</REPLACEABLE> and <REPLACEABLE>unit</REPLACEABLE>, or all three variables. The commas are significant as place markers. For example, the <LITERAL>root</LITERAL> partition (partition 0) on a single SCSI disk system is shown as:</PARA>
<LITERALLAYOUT>
dksc(0,1,0)
</LITERALLAYOUT>
<ITEMIZEDLIST><LISTITEM><PARA><COMMAND>dksc</COMMAND> indicates the SCSI driver.</PARA>
</LISTITEM>
<LISTITEM><PARA>The first 0 indicates SCSI controller 0.</PARA>
</LISTITEM>
<LISTITEM><PARA>The 1 indicates drive number 1 on SCSI controller 0</PARA>
</LISTITEM>
<LISTITEM><PARA>The final 0 indicates partition 0 (<LITERAL>root</LITERAL> partition) on drive 1 on SCSI controller 0.</PARA>
</LISTITEM>
</ITEMIZEDLIST>
<PARA>The <FILENAME>/usr</FILENAME> partition (partition 3) on the same disk would be written as:</PARA>
<LITERALLAYOUT>
dksc(0,1,3)
</LITERALLAYOUT>
<SECTION><TITLE>Device Names in the Command Monitor</TITLE><PARA>The command monitor defines the devices shown in <XREF LINKEND="LE77917-TITLE">.</PARA><TABLE FRAME="topbot"><TBLTITLE  ID="LE77917-TITLE">Device Names for Command Monitor Commands</TBLTITLE>
<TGROUP COLS="2">
<COLSPEC COLWIDTH="224*">
<COLSPEC COLWIDTH="560*">
<THEAD><ROW><ENTRY><PARA>Device Name</PARA></ENTRY>
<ENTRY><PARA>Description </PARA></ENTRY>
</ROW>
</THEAD>
<TBODY><ROW><ENTRY><PARA><LITERAL>dksc</LITERAL></PARA></ENTRY>
<ENTRY><PARA>SCSI disk controller (<LITERAL>dks</LITERAL> in IRIX)</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>tpsc</LITERAL></PARA></ENTRY>
<ENTRY><PARA>SCSI tape controller (<LITERAL>tps</LITERAL> in IRIX)</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>tty</LITERAL></PARA></ENTRY>
<ENTRY><PARA>CPU board duart</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>tty(0)</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Local console</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>tty(1)</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Remote console</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>gfx</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Graphics console</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>console</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Pseudo console, which may be one of <LITERAL>gfx(0</LITERAL>), <LITERAL>tty(0)</LITERAL>, or <LITERAL>tty(1</LITERAL>). </PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>bootp</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Ethernet controller using <LITERAL>bootp</LITERAL> and TFTP protocols</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>tpqic</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Quarter-inch QIC02 tape drive</PARA></ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>
<PARA><INDEXTERM ID="ITch09-13"><PRIMARY>PROM monitor</PRIMARY>
<SECONDARY>device names</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-14"><PRIMARY>device names</PRIMARY>
</INDEXTERM>
The PROM device notation is different from IRIX device notation. Certain environment variables (such as <LITERAL>root</LITERAL> and <LITERAL>swap</LITERAL>) are passed to higher level programs, and often require IRIX notation for the <FILENAME>/dev</FILENAME> device name. For example, in PROM notation, a SCSI disk partition most commonly used for <LITERAL>swap</LITERAL> is written:</PARA>
<LITERALLAYOUT>
dksc(0,0,1)
</LITERALLAYOUT>
<PARA>In IRIX notation, the same disk is:</PARA>
<LITERALLAYOUT>
dksc0d0s1
</LITERALLAYOUT>
</SECTION>
<SECTION><TITLE>ARCS PROM Filename Syntax</TITLE><PARA>Systems that use the ARCS prom (including Indy, Indigo<SUPERSCRIPT>2</SUPERSCRIPT>, some models of Indigo, CHALLENGE, and Onyx) use a slightly different syntax for specifying pathnames and disk partitions.</PARA>
<PARA>ARCS pathnames use the same syntax as the hardware inventory. The pathnames are written as a series of <REPLACEABLE>type(unit)</REPLACEABLE> components that parallel the hardware inventory format.</PARA>
<PARA>Old-style pathnames are automatically converted to new-style pathnames; the old names can still be used. The PROM matches the first device described by the pathname; so full pathnames are not always required. Some examples of common pathnames are shown in <XREF LINKEND="LE80277-TITLE">.</PARA><TABLE FRAME="topbot"><TBLTITLE  ID="LE80277-TITLE">ARCS Filenames</TBLTITLE>
<TGROUP COLS="2">
<COLSPEC COLWIDTH="366*">
<COLSPEC COLWIDTH="232*">
<THEAD><ROW><ENTRY><PARA>ARCS Naming Convention</PARA></ENTRY>
<ENTRY><PARA>Pathname or Device</PARA></ENTRY>
</ROW>
</THEAD>
<TBODY><ROW><ENTRY><PARA><FILENAME>scsi(0)disk(1)partition(1)</FILENAME></PARA></ENTRY>
<ENTRY><PARA><FILENAME>dksc(0,1,1)</FILENAME></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><FILENAME>disk(1)part(1)</FILENAME></PARA></ENTRY>
<ENTRY><PARA><FILENAME>dksc(0,1,1)</FILENAME></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><FILENAME>scsi(0)cdrom(5)partition(7)</FILENAME></PARA></ENTRY>
<ENTRY><PARA><FILENAME>dksc(0,5,7)</FILENAME></PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><FILENAME>network(0)bootp()<REPLACEABLE></REPLACEABLE><REPLACEABLE>host:file</REPLACEABLE></FILENAME></PARA></ENTRY>
<ENTRY><PARA><FILENAME>bootp()<REPLACEABLE></REPLACEABLE><REPLACEABLE>host:file</REPLACEABLE></FILENAME>
</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><FILENAME>serial(0)</FILENAME></PARA></ENTRY>
<ENTRY><PARA>First serial port</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>keyboard()</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Graphics keyboard</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><FILENAME>video()</FILENAME></PARA></ENTRY>
<ENTRY><PARA>Graphics display</PARA></ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>
</SECTION>
</SECTION>
</SECTION>
<SECTION  ID="LE29934-PARENT"><TITLE  ID="LE29934-TITLE">Running the Command Monitor</TITLE><PARA>This section describes the commands that you use to run the command monitor. It accepts the commands listed in <XREF LINKEND="LE40987-TITLE">.</PARA><SECTION  ID="LE74390-PARENT"><TITLE  ID="LE74390-TITLE">Reinitializing the Processor from the Command Monitor</TITLE><PARA>The <COMMAND>init</COMMAND> command reinitializes the processor from PROM memory, and returns you to the monitor program.<INDEXTERM ID="ITch09-15"><PRIMARY><COMMAND>init</COMMAND>
 command</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-16"><PRIMARY>PROM monitor</PRIMARY>
<SECONDARY>reinitializing</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-17"><PRIMARY>PROM monitor</PRIMARY>
<SECONDARY>environment variables</SECONDARY>
</INDEXTERM>
&ensp;</PARA>
</SECTION>
<SECTION><TITLE>Setting a PROM Password</TITLE><PARA>Your s<INDEXTERM ID="ITch09-18"><PRIMARY>PROM passwords</PRIMARY>
</INDEXTERM>
ystem<INDEXTERM ID="ITch09-19"><PRIMARY>passwords, PROM</PRIMARY>
</INDEXTERM>
 h<INDEXTERM ID="ITch09-20"><PRIMARY>passwords, system</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-21"><PRIMARY>system passwords</PRIMARY>
</INDEXTERM>
as <INDEXTERM ID="ITch09-22"><PRIMARY>system passwords</PRIMARY>
</INDEXTERM>
a facility that allows you to require a password from users who attempt to gain access to the command monitor. To set the PROM password, perform the steps in <XREF LINKEND="LE28567-TITLE">:</PARA><PROCEDURE  ID="LE28567-PARENT"><TITLE  ID="LE28567-TITLE">Setting the PROM Password</TITLE>
<STEP><PARA>Select option 5 from the <INTERFACE>System Maintenance Menu</INTERFACE> to enter the command monitor. You see the command monitor prompt:</PARA>
<PROGRAMLISTING>
Command Monitor. Type "exit" to return to the menu.
&gt;&gt;
</PROGRAMLISTING>
</STEP>
<STEP><PARA>Enter the command:</PARA>
<PROGRAMLISTING>
<USERINPUT>help</USERINPUT>
</PROGRAMLISTING>
</STEP>
<STEP><PARA>Issue the <COMMAND>passwd</COMMAND> command:</PARA>
<PROGRAMLISTING>
<USERINPUT>passwd</USERINPUT>
</PROGRAMLISTING>
<PARA>You see the prompt:</PARA>
<PROGRAMLISTING>
Enter new password:
</PROGRAMLISTING>
</STEP>
<STEP><PARA>Enter the password you want for your system and press <USERINPUT>Enter</USERINPUT>. You see the prompt:</PARA>
<PROGRAMLISTING>
Confirm new password:
</PROGRAMLISTING>
<PARA>Enter the password again, exactly as you typed it before. If you typed the password the same as the first time, you next see the command monitor prompt again. If you made a mistake, the system prints an error message and you must begin again. If you see no error message, your password is now set. Whenever you access the command monitor, you will be required to enter this password.</PARA>
</STEP>
</PROCEDURE>
<PARA>It is very important that you choose and enter your password carefully, because if it is entered incorrectly or forgotten, you may have to remove a jumper on the CPU board of your system. This procedure is different for each system type, and is described in your owner's guide. Some systems, though, allow you to reset the PROM password from IRIX by logging in as <LITERAL>root</LITERAL> and issuing the following command:</PARA>
<LITERALLAYOUT>
<USERINPUT>nvram passwd_key ""</USERINPUT>
</LITERALLAYOUT>
<PARA>The quotation marks with no characters or space between them are essential to remove the PROM password. You must be <LITERAL>root</LITERAL> to perform this operation.</PARA>
<PARA>The <COMMAND>resetpw</COMMAND> command within the command monitor also resets the PROM password.</PARA>
</SECTION>
</SECTION>
<SECTION  ID="LE63851-PARENT"><TITLE  ID="LE63851-TITLE">Command Monitor Environment Variables</TITLE><PARA>The command monitor maintains an environment, which is a list of variable names and corresponding values (the values are actually text strings). <INDEXTERM ID="ITch09-23"><PRIMARY><COMMAND>init</COMMAND>
 command</PRIMARY>
</INDEXTERM>
These <FIRSTTERM>environment variables</FIRSTTERM> contain information that the command monitor either uses itself or passes to booted programs. The system stores some environment variables&mdash;those that are important and unlikely to change frequently&mdash;in nonvolatile RAM (<LITERAL>nvram</LITERAL>). If you turn off power to the machine or press the reset button, the system remembers these variables. When you change the setting of these variables using the <COMMAND>setenv</COMMAND> command, the PROM code automatically stores the new values in nonvolatile RAM.</PARA>
<PARA>You can also use the <COMMAND>/etc/nvram</COMMAND> command to set or print the values of nonvolatile RAM variables on your system. For complete information on the <COMMAND>nvram</COMMAND> command, see the <COMMAND>nvram(1)</COMMAND> man page.</PARA>
<PARA><XREF LINKEND="LE84447-TITLE"> shows a list of the environment variables that the system stores in nonvolatile RAM.</PARA><TABLE FRAME="topbot"><TBLTITLE  ID="LE84447-TITLE">Environment Variables Stored in Nonvolatile RAM</TBLTITLE>
<TGROUP COLS="2">
<COLSPEC COLWIDTH="164*">
<COLSPEC COLWIDTH="620*">
<THEAD><ROW><ENTRY><PARA>Variable</PARA></ENTRY>
<ENTRY><PARA>Description </PARA></ENTRY>
</ROW>
</THEAD>
<TBODY><ROW><ENTRY><PARA><LITERAL>netaddr</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the local network address for booting across the Ethernet. See the 
<COMMAND>bootp</COMMAND> protocol.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>dbaud</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the diagnostics console baud rate. You can change it by setting this 
variable (acceptable rates include 75, 110, 134, 150, 300, 600, 1200, 2400, 4800, 
9600, and 19200), or by pressing the <KEYCAP>Break</KEYCAP> key. IRIS uses the <LITERAL>dbaud</LITERAL> rate for 
the diagnostics console during the entire system startup. Pressing the <KEYCAP>Break</KEYCAP> 
key changes the baud rate only temporarily; the baud rate reverts to the 
value specified in <LITERAL>dbaud</LITERAL> or <LITERAL>rbaud</LITERAL> when you press the reset switch or issue 
an <COMMAND>init</COMMAND> command.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>rbaud</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the remote console baud rate. The list of acceptable baud rates is the 
same as for <LITERAL>dbaud</LITERAL>, above.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>bootfile</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the name of the file to use for autobooting, normally a standalone 
shell (sash). This variable is valid for pre-ARCS PROMs only. ARCS PROMs 
store this information in the <LITERAL>OSLoader</LITERAL> variable.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>bootmode</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the type of boot in pre-ARCS PROMs. ARCS PROMs store this 
information in the <LITERAL>AutoLoad</LITERAL> variable. The options have these meanings:</PARA><PARA><LITERAL>c</LITERAL> performs a complete cold autoboot, using the file pointed to by the 
<LITERAL>bootfile</LITERAL> variable to boot the kernel; boots <LITERAL>sash</LITERAL>, then boots kernel; and 
runs power-on diagnostics.</PARA><PARA><LITERAL>m</LITERAL> (default) goes straight to the command monitor, clears memory, and runs 
power-on diagnostics.</PARA><PARA><LITERAL>d</LITERAL> goes straight to the command monitor, does not clear memory;,and does 
not run power-on diagnostics.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>boottune</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Selects the boot music string. A value of <LITERAL>0</LITERAL> randomizes the selection each 
time. <LITERAL>1</LITERAL> is the default value. (It is supported only on POWER Indigo<SUPERSCRIPT>2</SUPERSCRIPT> 
systems.)</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>autopower</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Allows systems with software power control to automatically reset after a 
power failure if set to <LITERAL>y</LITERAL>.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>console</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies which console to use. The options have these meanings:</PARA><PARA><LITERAL>G</LITERAL> specifies a graphics console with the SGI logo in the upper left corner.</PARA><PARA><LITERAL>g</LITERAL> (default) specifies a graphics console without the SGI logo.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>keybd</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the type of keyboard used. The default is <LITERAL>df</LITERAL>. Available settings 
depend on the exact PROM revision, but may include some or all of the 
following settings:</PARA><PARA><LITERAL>USA</LITERAL>, <LITERAL>DEU</LITERAL>, <LITERAL>FRA</LITERAL>, <LITERAL>ITA</LITERAL>, <LITERAL>DNK</LITERAL>, <LITERAL>ESP</LITERAL>, <LITERAL>CHE-D</LITERAL>, <LITERAL>SWE</LITERAL>, <LITERAL>FIN</LITERAL>, <LITERAL>GBR</LITERAL>, <LITERAL>BEL</LITERAL>, <LITERAL>NOR</LITERAL>, <LITERAL>PRT</LITERAL>, <LITERAL>CHE-F</LITERAL>.</PARA><PARA>Or on systems with the keyboard layout selector, the settings may include:</PARA><PARA><LITERAL>US</LITERAL>, <LITERAL>DE</LITERAL>, <LITERAL>FR</LITERAL>, <LITERAL>IT</LITERAL>, <LITERAL>DK</LITERAL>, <LITERAL>ES</LITERAL>, <LITERAL>deCH</LITERAL>, <LITERAL>SE</LITERAL>, <LITERAL>FI</LITERAL>, <LITERAL>GB</LITERAL>, <LITERAL>BE</LITERAL>, <LITERAL>NO</LITERAL>, <LITERAL>PT</LITERAL>, <LITERAL>frCH</LITERAL>&ensp;</PARA><PARA>On some systems, <LITERAL>JP</LITERAL> is also acceptable to specify a Japanese keyboard.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>diskless</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies that the system is diskless and must be booted over the network. On 
ARCS systems, diskless system environment parameters should be set as 
follows:</PARA><PARA><USERINPUT>diskless=1</USERINPUT>&ensp;</PARA><PARA><USERINPUT>SystemPartition=bootp()<REPLACEABLE></REPLACEABLE><REPLACEABLE>host:/path</REPLACEABLE></USERINPUT>
</PARA><PARA><USERINPUT>OSLoader=<REPLACEABLE></REPLACEABLE><REPLACEABLE>kernelname</REPLACEABLE></USERINPUT>
</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>monitor</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the monitor resolution on Indy systems when an unrecognized 
brand of monitor is used. Set this variable to <LITERAL>h</LITERAL> or <LITERAL>H</LITERAL> to specify a 
high-resolution monitor, the default is a low-resolution monitor.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>nogfxkbd</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies that the keyboard is not required to be connected if set to <LITERAL>1</LITERAL>.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>notape</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies that no tape drive is attached to the system. If a tape drive is 
attached to the system, this variable must be set to <LITERAL>1</LITERAL> (true) in order to access 
a tape drive on another system on the network.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>volume</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the system speaker volume numerically.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>pagecolor</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the background color of the textport using a set of 6 hexadecimal 
RGB values.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>prompoweroff</LITERAL></PARA></ENTRY>
<ENTRY><PARA>On Indy systems only, this variable specifies that the system should return to 
the PROM monitor before powering off on shutdown if set to <LITERAL>y</LITERAL>.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>rebound</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies that the system should automatically reboot after a kernel panic if 
set to <LITERAL>y</LITERAL>. This variable interacts with the <LITERAL>AutoLoad</LITERAL> variable and the 
<LITERAL>reboot_on_panic</LITERAL> kernel tunable parameter.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>sgilogo</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies that the SGI logo and related information is displayed on the PROM 
monitor graphical screen if set to <LITERAL>y</LITERAL>.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>diagmode</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies the mode of power-on diagnostics. If set to <LITERAL>v</LITERAL>, then diagnostics are 
verbose and extensive.</PARA></ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>
<PARA><XREF LINKEND="LE54647-TITLE"> lists command monitor environment variables that directly affect the IRIX operating system. These are not stored in non-volatile RAM, but they do affect the operation of the PROM and of IRIX and are discarded if the system is powered off.</PARA><TABLE FRAME="topbot"><TBLTITLE  ID="LE54647-TITLE">Environment Variables That Affect the IRIX Operating System</TBLTITLE>
<TGROUP COLS="2">
<COLSPEC COLWIDTH="166*">
<COLSPEC COLWIDTH="618*">
<THEAD><ROW><ENTRY><PARA>Variable </PARA></ENTRY>
<ENTRY><PARA>Description </PARA></ENTRY>
</ROW>
</THEAD>
<TBODY><ROW><ENTRY><PARA><LITERAL>showconfig</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Prints extra information as IRIX boots. If set through <COMMAND>setenv</COMMAND>, its value must 
be <LITERAL>istrue</LITERAL>.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>initstate</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Passed to IRIX, where it overrides the initdefault line in <FILENAME>/etc/inittab</FILENAME>. 
Permitted values are s and the numbers 0-6. See <COMMAND>init(1M)</COMMAND>.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>swap</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies in IRIX notation the swap partition to use. If not set, it defaults to 
the partition configured into the operating system, which is normally 
partition 1 on the drive specified by the <LITERAL>root</LITERAL> environment variable.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>path</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Specifies a list of device prefixes that tell the command monitor where to 
look for a file, if no device is specified.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>verbose</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Tells the system to display detailed error messages.</PARA></ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>
<PARA>When you boot a program from the command monitor, it passes the current settings of all the environment variables to the booted program.</PARA>
<PARA>The ARCS PROM defines some environment variables that are not found in older PROMS, and these are listed in <XREF LINKEND="LE71807-TITLE">.</PARA><TABLE FRAME="topbot"><TBLTITLE  ID="LE71807-TITLE">ARCS PROM Environment Variables</TBLTITLE>
<TGROUP COLS="2">
<COLSPEC COLWIDTH="224*">
<COLSPEC COLWIDTH="560*">
<THEAD><ROW><ENTRY><PARA>Variable</PARA></ENTRY>
<ENTRY><PARA>Description</PARA></ENTRY>
</ROW>
</THEAD>
<TBODY><ROW><ENTRY><PARA><LITERAL>ConsoleIn/Console
Out</LITERAL></PARA></ENTRY>
<ENTRY><PARA>These variables are set automatically at system startup.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>OSLoadPartition</LITERAL></PARA></ENTRY>
<ENTRY><PARA>The disk partition where the operating system kernel is located. This 
is also used as the default <LITERAL>root</LITERAL> partition and is set automatically at 
system startup. </PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>OSLoader</LITERAL></PARA></ENTRY>
<ENTRY><PARA>The operating system loading program. By default, this is <LITERAL>sach</LITERAL> (the 
stand-alone shell). This is set automatically at system startup.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>SystemPartition</LITERAL></PARA></ENTRY>
<ENTRY><PARA>The disk partition where the operating system loading program is 
found. This is set automatically at system startup.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>OSLoadFilename</LITERAL></PARA></ENTRY>
<ENTRY><PARA>The filename of the operating system kernel. By default, this is 
<FILENAME>/unix</FILENAME>. This variable is automatically set at system startup.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>OSLoadOptions</LITERAL></PARA></ENTRY>
<ENTRY><PARA>This variable specifies options to the <COMMAND>boot</COMMAND> command used to load the 
operating system. For more information on <COMMAND>boot</COMMAND> options, see 
<XREF LINKEND="LE37004-TITLE">.</PARA><PARA>.</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>AutoLoad</LITERAL></PARA></ENTRY>
<ENTRY><PARA>This variable specifies whether the operating system will boot 
automatically after a reset or power cycle. This variable supersedes 
<LITERAL>bootmode</LITERAL> and can be set to <LITERAL>yes</LITERAL> or <LITERAL>no</LITERAL>. This variable interacts with 
the <LITERAL>rebound</LITERAL> variable and the <LITERAL>reboot_on_panic</LITERAL> kernel tunable 
parameter.</PARA></ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>
<SECTION><TITLE>Displaying the Current Command Monitor Environment Variables<INDEXTERM ID="ITch09-24"><PRIMARY><COMMAND>printenv</COMMAND>
 command</PRIMARY>
</INDEXTERM>
&ensp;</TITLE><PARA>The <COMMAND>printenv</COMMAND> command displays the command monitor's current environment variables.</PARA>
<LITERALLAYOUT>
<COMMAND>printenv</COMMAND> [<REPLACEABLE>env_var_list</REPLACEABLE>]
</LITERALLAYOUT>
<PARA>To change (reset) the variables, see the next section.</PARA>
</SECTION>
<SECTION  ID="LE16649-PARENT"><TITLE  ID="LE16649-TITLE">Changing Command Monitor Environment Variables <INDEXTERM ID="ITch09-25"><PRIMARY>PROM monitor</PRIMARY>
<SECONDARY>changing variables</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-26"><PRIMARY><COMMAND>setenv</COMMAND>
 command</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-27"><PRIMARY>variables</PRIMARY>
<SECONDARY>environment</SECONDARY>
</INDEXTERM>
</TITLE><PARA>The <COMMAND>setenv</COMMAND> command changes the values of existing environment variables or creates new ones.</PARA>
<LITERALLAYOUT>
<USERINPUT>setenv</USERINPUT>&ensp;<REPLACEABLE>env_var string</REPLACEABLE>
</LITERALLAYOUT>
<PARA><LITERAL>env_var</LITERAL> is the variable you are setting, and <REPLACEABLE>string</REPLACEABLE> is the value you assign to that variable. To see the current monitor settings, use <COMMAND>printenv</COMMAND>.</PARA>
<PARA>When you use <COMMAND>setenv</COMMAND> to change the value of one of the stored environment variables in <XREF LINKEND="LE84447-TITLE">, the system automatically saves the new value in nonvolatile RAM. You do not need to reenter the change the next time the system is turned off and then on again.</PARA></SECTION>
<SECTION><TITLE>Setting the Keyboard Variable <INDEXTERM ID="ITch09-28"><PRIMARY>PROM monitor</PRIMARY>
<SECONDARY>keyboard variables</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-29"><PRIMARY>keyboard</PRIMARY>
<SECONDARY>variables</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-30"><PRIMARY>variables</PRIMARY>
<SECONDARY>keyboard</SECONDARY>
</INDEXTERM>
</TITLE><PARA>If the <LITERAL>keybd</LITERAL> variable is set to anything but the default <LITERAL>df</LITERAL>, the appropriate keyboard translation table is loaded from the volume header of the hard disk. If the table is missing or unable to load, then the default table stored in the PROMs is used. The <LITERAL>keybd</LITERAL> variable can be set to any value, but the keyboard translation table should be loaded from the volume header on the hard disk. This variable overrides the normal system mechanism for determining the kind of keyboard installed in the system. Do not change this variable unless you are performing keyboard diagnostics. <XREF LINKEND="LE17409-TITLE"> lists <LITERAL>keybd</LITERAL> variables suggested for international keyboards: </PARA>
<TABLE FRAME="topbot"><TBLTITLE  ID="LE17409-TITLE">keybd Variables for International Keyboards</TBLTITLE>
<TGROUP COLS="2">
<COLSPEC COLWIDTH="222*">
<COLSPEC COLWIDTH="348*">
<THEAD><ROW><ENTRY><PARA>Variable</PARA></ENTRY>
<ENTRY><PARA>Description </PARA></ENTRY>
</ROW>
</THEAD>
<TBODY><ROW><ENTRY><PARA><LITERAL>BEL</LITERAL> or <LITERAL>BE</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Belgian</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>DNK</LITERAL> or <LITERAL>DK</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Danish </PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>DEU</LITERAL> or <LITERAL>DE</LITERAL></PARA></ENTRY>
<ENTRY><PARA>German</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>DF</LITERAL></PARA></ENTRY>
<ENTRY><PARA>The default</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>FRA</LITERAL> or <LITERAL>FR</LITERAL></PARA></ENTRY>
<ENTRY><PARA>French</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>FIN</LITERAL> or <LITERAL>FI</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Finnish</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>ITA</LITERAL> or <LITERAL>IT</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Italian </PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>JP</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Japanese</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>NOR</LITERAL> or <LITERAL>NO</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Norwegian</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>PRT</LITERAL> or <LITERAL>PT</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Portuguese</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>CHE-F</LITERAL> or <LITERAL>freCH</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Swiss-French</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>CHE-D</LITERAL> or <LITERAL>deCH</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Swiss-German</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>ESP</LITERAL> or <LITERAL>ES</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Spanish</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>SE</LITERAL> or <LITERAL>SWE</LITERAL></PARA></ENTRY>
<ENTRY><PARA>Swedish</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>GB</LITERAL> or <LITERAL>GBR</LITERAL></PARA></ENTRY>
<ENTRY><PARA>United Kingdom (Great Britain)</PARA></ENTRY>
</ROW>
<ROW><ENTRY><PARA><LITERAL>US</LITERAL> or <LITERAL>USA</LITERAL></PARA></ENTRY>
<ENTRY><PARA>United States (available on all models)</PARA></ENTRY>
</ROW>
</TBODY>
</TGROUP>
</TABLE>
</SECTION>
<SECTION><TITLE>Removing Environment Variables<INDEXTERM ID="ITch09-31"><PRIMARY><COMMAND>unsetenv</COMMAND>
 command</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-32"><PRIMARY>variables</PRIMARY>
<SECONDARY>removing</SECONDARY>
</INDEXTERM>
&ensp;</TITLE><PARA>The <COMMAND>unsetenv</COMMAND> command removes the definition of an environment variable.</PARA>
<LITERALLAYOUT>
<USERINPUT>unsetenv</USERINPUT>&ensp;<REPLACEABLE>env_var</REPLACEABLE>
</LITERALLAYOUT>
<PARA><REPLACEABLE>env_var</REPLACEABLE> is the environment variable whose definition you are removing (see <COMMAND>setenv</COMMAND>, above). Note that variables stored in nonvolatile RAM cannot be unset.</PARA>
</SECTION>
</SECTION>
<SECTION  ID="LE37004-PARENT"><TITLE  ID="LE37004-TITLE">Booting a Program from the Command Monitor</TITLE><PARA><INDEXTERM ID="ITch09-33"><PRIMARY>PROM monitor</PRIMARY>
<SECONDARY>booting</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-34"><PRIMARY>booting</PRIMARY>
<SECONDARY>prom monitor</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-35"><PRIMARY>reset button</PRIMARY>
</INDEXTERM>
This section describes each command monitor <COMMAND>boot</COMMAND> command and shows you how to use it. When you reboot or press the <KEYCAP>Reset</KEYCAP> button, you start up the command monitor. Do not press the <KEYCAP>Reset</KEYCAP> button under normal circumstances, that is, when the workstation is running IRIX.</PARA>
<SECTION><TITLE>Booting the Default File with the auto Command</TITLE><PARA><INDEXTERM ID="ITch09-36"><PRIMARY>booting</PRIMARY>
<SECONDARY>default file</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-37"><PRIMARY><COMMAND>auto</COMMAND>
 command</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-38"><PRIMARY>variables</PRIMARY>
<SECONDARY>bootfile</SECONDARY>
</INDEXTERM>
The <COMMAND>auto</COMMAND> command reboots the operating system. It uses the default boot file as though you were powering on the CPU. At the command monitor prompt (<LITERAL>&gt;&gt;</LITERAL>), type:</PARA>
<LITERALLAYOUT>
<USERINPUT>auto</USERINPUT>
</LITERALLAYOUT>
<PARA>The PROM's environment variable <LITERAL>bootfile</LITERAL> specifies the default boot file. In addition, you must set the environment variable <KEYCAP>root</KEYCAP> to the disk partition that IRIX uses as its <LITERAL>root</LITERAL> filesystem. The <COMMAND>auto</COMMAND> command assumes that the desired image of IRIX resides on the partition specified by <LITERAL>root</LITERAL> of the drive specified in the environment variable <LITERAL>bootfile</LITERAL>.</PARA>
<PARA>The <LITERAL>bootfile</LITERAL> name can contain no more than 14 characters. To select a different boot file, see <XREF LINKEND="LE16649-TITLE">..</PARA></SECTION>
<SECTION><TITLE>Booting a Specific Program with the boot Command</TITLE><PARA><INDEXTERM ID="ITch09-39"><PRIMARY><COMMAND>boot</COMMAND>
 command</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-40"><PRIMARY>booting</PRIMARY>
<SECONDARY>command</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-41"><PRIMARY>booting</PRIMARY>
<SECONDARY>specific program</SECONDARY>
</INDEXTERM>
The <COMMAND>boot</COMMAND> command starts the system when you want to use a specific boot program and give optional arguments to that program. The syntax of the <COMMAND>boot</COMMAND> command is: </PARA>
<LITERALLAYOUT>
<COMMAND>boot[-f </COMMAND><REPLACEABLE>program</REPLACEABLE><COMMAND>][-n][</COMMAND><REPLACEABLE>args</REPLACEABLE><COMMAND>]</COMMAND>
</LITERALLAYOUT>
<ITEMIZEDLIST><LISTITEM><PARA><LITERAL>-f</LITERAL> specifies the program you want to boot. The program name must contain fewer than 20 characters. If you do not specify this option, the environment variable <LITERAL>bootfile</LITERAL> specifies the default program. <COMMAND>boot</COMMAND> normally loads <COMMAND>sash</COMMAND>.<INDEXTERM ID="ITch09-42"><PRIMARY>variables</PRIMARY>
<SECONDARY>path</SECONDARY>
</INDEXTERM>
&ensp;</PARA>
<PARA>When you specify a program, you can include a device specification. If you do not, the command monitor uses the device specifications in the environment variable <KEYCAP>path</KEYCAP>. The command monitor tries in turn each device that you specify in <KEYCAP>path</KEYCAP>, until it finds the program you request, or until it has tried all the devices listed in <KEYCAP>path</KEYCAP>.</PARA>
</LISTITEM>
<LISTITEM><PARA><LITERAL>-n</LITERAL> means no go: it loads the specified program, but does not transfer control to it. Instead, <LITERAL>-n</LITERAL> returns you to the command monitor command environment.</PARA>
</LISTITEM>
<LISTITEM><PARA><REPLACEABLE>args</REPLACEABLE> are variables that the command monitor passes to the program you are booting. For an <REPLACEABLE>arg</REPLACEABLE> that starts with a hyphen (-), you must prepend an additional hyphen so that the command monitor does not think that the argument is intended for itself. The command monitor removes the extra hyphen before it passes the argument to the booted program. For more information, see <XREF LINKEND="LE11397-TITLE">.</PARA></LISTITEM>
</ITEMIZEDLIST>
<PARA><INDEXTERM ID="ITch09-43"><PRIMARY>booting</PRIMARY>
<SECONDARY><COMMAND>fx</COMMAND>
</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-44"><PRIMARY>disks</PRIMARY>
<SECONDARY>formatting</SECONDARY>
</INDEXTERM>
For example, to boot the disk formatter/exerciser program (<COMMAND>fx</COMMAND>) from the cartridge tape drive, use this command:</PARA>
<LITERALLAYOUT>
<USERINPUT>boot -f SCSI(0)tape(7)partition(0)fx</USERINPUT>
</LITERALLAYOUT>
<PARA>Without any arguments, <COMMAND>boot</COMMAND> loads the program specified in <LITERAL>bootfile</LITERAL>.</PARA>
</SECTION>
<SECTION  ID="LE11397-PARENT"><TITLE  ID="LE11397-TITLE">About the Standalone Shell (sash)</TITLE><PARA>The command monitor has been designed to keep it independent of operating systems and as small as possible. Therefore, the command monitor cannot directly boot files residing in IRIX or other operating system file trees. However, the command monitor provides a two-level boot mechanism that lets it load an intermediary program that understands filesystems; this program can then find and load the desired boot file.<INDEXTERM ID="ITch09-45"><PRIMARY>standalone shell</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-46"><PRIMARY>sash</PRIMARY>
</INDEXTERM>
 The program is called the <FIRSTTERM>standalone shell</FIRSTTERM>, and is referred to as <COMMAND>sash</COMMAND>. <COMMAND>sash</COMMAND> is a reconfigured and expanded version of the command monitor program, and includes the modules needed to handle operating system file structures. It also has enhanced knowledge about devices.</PARA>
<PARA>After the system software is installed, a copy of <COMMAND>sash</COMMAND> is located in the volume header of the first disk. The header contains a very simple file structure that the command monitor understands. You can also boot <COMMAND>sash</COMMAND> from tape or across the network.</PARA>
</SECTION>
<SECTION><TITLE>Booting the Standalone Shell (sash)</TITLE><PARA>To boot <COMMAND>sash</COMMAND> from your disk, follow the steps in <XREF LINKEND="LE36526-TITLE">:</PARA><PROCEDURE  ID="LE36526-PARENT"><TITLE  ID="LE36526-TITLE">Booting Using sash</TITLE>
<STEP><PARA>Shut down the system</PARA>
</STEP>
<STEP><PARA>When you see the message:</PARA>
<LITERALLAYOUT>
Starting up the system...
To perform system maintenance instead, press Esc
</LITERALLAYOUT>
<PARA>Press the <KEYCAP>Esc</KEYCAP> key. You may have to enter your system's command monitor password, if your system has one. You see a menu similar to the following:</PARA>
<PROGRAMLISTING>
System Maintenance Menu
&ensp;  (1) Start System
&ensp;  (2) Install System Software
&ensp;  (3) Run Diagnostics
&ensp;  (4) Recover System
&ensp;  (5) Enter Command Monitor
</PROGRAMLISTING>
</STEP>
<STEP><PARA>Select option 5, <INTERFACE>Enter Command Monitor</INTERFACE> from the <INTERFACE>System Maintenance Menu</INTERFACE>. You see the following message and prompt:</PARA>
<LITERALLAYOUT>
Command Monitor. Type "exit" to return to the menu.
&gt;&gt;
</LITERALLAYOUT>
</STEP>
<STEP><PARA>Enter the command:</PARA>
<LITERALLAYOUT>
<USERINPUT>boot -f sash</USERINPUT>
</LITERALLAYOUT>
<PARA><COMMAND>sash</COMMAND> operates in interactive command mode. You see the <COMMAND>sash</COMMAND> prompt:</PARA>
<LITERALLAYOUT>
sash:
</LITERALLAYOUT>
</STEP>
</PROCEDURE>
<PARA>To use the multilevel boot feature, set the PROM environment variable <LITERAL>bootfile</LITERAL> to refer to a specific copy of <COMMAND>sash</COMMAND>. In normal configurations, setting <LITERAL>bootfile</LITERAL> to <LITERAL>dksc(0,0,8)sash</LITERAL> tells the command monitor to load <COMMAND>sash</COMMAND> from the SCSI disk controller 0, disk unit 0, partition 8 (the volume header) as follows:</PARA>
<PARA><USERINPUT>setenv </USERINPUT><USERINPUT>bootfile</USERINPUT><USERINPUT>&ensp;"dksc(0)disk(1)partition(8)sash"</USERINPUT></PARA>
<PARA>Then issue a <COMMAND>boot</COMMAND> command, as in this example for a SCSI drive:</PARA>
<LITERALLAYOUT>
<USERINPUT>boot dksc()unix initstate=s</USERINPUT>
</LITERALLAYOUT>
<PARA>The following actions take place:</PARA>
<ITEMIZEDLIST><LISTITEM><PARA><COMMAND>boot</COMMAND> loads <LITERAL>dksc(0)disk(0)partition(8)sash</LITERAL>, as specified by <LITERAL>bootfile</LITERAL>, since the <COMMAND>boot</COMMAND> command does not contain a <LITERAL>-f</LITERAL> argument. (A <LITERAL>-f</LITERAL> argument overrides the default specified by <LITERAL>bootfile</LITERAL>.)</PARA>
</LISTITEM>
<LISTITEM><PARA><COMMAND>sash</COMMAND> gets two arguments: <LITERAL>dksc()unix</LITERAL> and <LITERAL>initstate=s</LITERAL>, which brings the system up in single-user mode. (Note that the command monitor removes the leading hyphen [-] from any argument, so if you use the next layer of software, and need an argument with a leading hyphen, put two hyphens in front of it.)</PARA>
</LISTITEM>
<LISTITEM><PARA><COMMAND>sash</COMMAND> loads the file specified by the first argument (<LITERAL>dksc()unix</LITERAL>) and passes the next argument to that file.</PARA>
</LISTITEM>
</ITEMIZEDLIST>
<PARA>Do not issue the <COMMAND>auto</COMMAND> command from <COMMAND>sash</COMMAND> with the <LITERAL>bootfile</LITERAL> set as shown above. If you do, the system tries to boot <COMMAND>sash</COMMAND> over itself and exits with an error.</PARA>
<PARA>To be able to use the <COMMAND>auto</COMMAND> command from <FILENAME>sash</FILENAME>, set <LITERAL>bootfile</LITERAL> to refer to the kernel, for example, <FILENAME>dksc()unix</FILENAME>. Even better, return to the PROM level to use the <COMMAND>auto</COMMAND> command.</PARA>
</SECTION>
<SECTION><TITLE>About bootp</TITLE><PARA><INDEXTERM ID="ITch09-47"><PRIMARY>booting</PRIMARY>
<SECONDARY>across the network</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-48"><PRIMARY>network booting</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-49"><PRIMARY>Ethernet</PRIMARY>
<SECONDARY>booting</SECONDARY>
</INDEXTERM>
At the heart of the operation of diskless workstations is the <LITERAL>bootp</LITERAL> protocol. The <LITERAL>bootp</LITERAL> protocol is a DARPA standard protocol supported on all SGI servers and workstations. One of the devices that the command monitor can use for booting is the network. SGI provides a TCP/IP boot protocol that lets you boot files that reside on another host in the network, if the other host supports the booting protocol. The network booting protocol is the <LITERAL>bootp</LITERAL> protocol. It is a datagram protocol that uses the User Datagram Protocol (UDP) of TCP/IP to transfer files across the Ethernet network.</PARA>
<SECTION><TITLE>Booting across the Network with bootp</TITLE><PARA>To boot across the network, follow the steps in <XREF LINKEND="LE29812-TITLE">:</PARA><PROCEDURE  ID="LE29812-PARENT"><TITLE  ID="LE29812-TITLE">Booting Using bootp</TITLE>
<STEP><PARA>Determine the Internet address of the machine you want to boot.</PARA>
<PARA>The Internet address is a number assigned by the network administrator of the network to which the system is attached. The format of the number is four decimal numbers between 0 and 255, separated by periods; for example:</PARA>
<LITERALLAYOUT>
<LITERAL>194.45.54.4</LITERAL>
</LITERALLAYOUT>
</STEP>
<STEP><PARA>Use the <COMMAND>setenv</COMMAND> command to set the <LITERAL>netaddr</LITERAL> environment variable to this address; for example:</PARA>
<LITERALLAYOUT>
<USERINPUT>setenv netaddr 194.45.54.4</USERINPUT>
</LITERALLAYOUT>
</STEP>
</PROCEDURE>
<PARA>Once you have set the <LITERAL>netaddr</LITERAL> environment variable, you can use <COMMAND>bootp</COMMAND> to refer to a remote file by using a filename of the form:</PARA>
<LITERALLAYOUT>
<USERINPUT>bootp()</USERINPUT>[<REPLACEABLE>hostname</REPLACEABLE>:]<REPLACEABLE>&ensp;path</REPLACEABLE>
</LITERALLAYOUT>
<ITEMIZEDLIST><LISTITEM><PARA><REPLACEABLE>hostname</REPLACEABLE> is the name of the host where the file resides. The specified host must run the <COMMAND>bootp</COMMAND> server daemon, <COMMAND>bootp</COMMAND>. If you omit <REPLACEABLE>hostname</REPLACEABLE>, <COMMAND>bootp</COMMAND> broadcasts to get the file from any of the hosts on the same network as the system making the request. The first host that answers fills the request. Only hosts that support <COMMAND>bootp</COMMAND> can respond to the request. It is safe to omit the hostname only when you know that the path is unique to a particular host, or when you know that all the copies of the file are interchangeable.<INDEXTERM ID="ITch09-50"><PRIMARY>Ethernet</PRIMARY>
<SECONDARY>gateway</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-51"><PRIMARY>gateway</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-52"><PRIMARY><COMMAND>bootp</COMMAND>
 server</PRIMARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-53"><PRIMARY>booting</PRIMARY>
<SECONDARY>through gateways</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-54"><PRIMARY>booting</PRIMARY>
<SECONDARY>with <COMMAND>bootp</COMMAND>
</SECONDARY>
</INDEXTERM>
&ensp;</PARA>
<PARA><REPLACEABLE>hostname</REPLACEABLE> can be the name of a host on a different Ethernet network from the machine that you are booting, if a gateway on the local Ethernet network provides a route to the remote host. The gateway must be running a <COMMAND>bootp</COMMAND> server that you have configured to do cross-network forwarding.</PARA>
<PARA>For more information about booting through gateways, see <COMMAND>bootp(1M)</COMMAND>. For more information about the <FILENAME>/etc/inetd.conf</FILENAME> configuration file, see <COMMAND>inetd(1M)</COMMAND>.</PARA>
</LISTITEM>
<LISTITEM><PARA><REPLACEABLE>path</REPLACEABLE> is the pathname of a file on the remote host. For example, this command boots the file <FILENAME>/usr/local/boot/unix</FILENAME> from the remote host <LITERAL>wheeler</LITERAL>:</PARA>
<LITERALLAYOUT>
<USERINPUT>boot -f bootp()wheeler:/usr/local/boot/unix</USERINPUT>
</LITERALLAYOUT>
<PARA>The following ommand boots the file <FILENAME>/usr/alice/help</FILENAME> from any host on the network responding to the <COMMAND>bootp</COMMAND> broadcast request that has a file of that name:</PARA>
<LITERALLAYOUT>
<USERINPUT>boot -f bootp()/usr/alice/help</USERINPUT>
</LITERALLAYOUT>
</LISTITEM>
</ITEMIZEDLIST>
<PARA>To configure the gateway to permit cross-network forwarding, follow the steps in <XREF LINKEND="LE13667-TITLE">:</PARA><PROCEDURE  ID="LE13667-PARENT"><TITLE  ID="LE13667-TITLE">Configuring a Gateway</TITLE>
<STEP><PARA>Log in as <LITERAL>root</LITERAL> or become the superuser by issuing the <COMMAND>su</COMMAND> command.</PARA>
</STEP>
<STEP><PARA>Edit the file <FILENAME>/etc/inetd.conf</FILENAME> on the gateway system. This file configures the <COMMAND>bootp</COMMAND> server, which is started by the <COMMAND>inetd(1M)</COMMAND> daemon.</PARA>
</STEP>
<STEP><PARA>Change the <COMMAND>bootp</COMMAND> description so that <COMMAND>inetd</COMMAND> invokes <COMMAND>bootp</COMMAND> with the <LITERAL>-f</LITERAL> flag. Find this line:</PARA>
<LITERALLAYOUT>
bootp  dgram  udp  wait  root  /usr/etc/bootp  bootp
</LITERALLAYOUT>
<PARA>Add the <LITERAL>-f</LITERAL> flag to the final <COMMAND>bootp</COMMAND> on the line:</PARA>
<LITERALLAYOUT>
bootp  dgram  udp  wait  root  /usr/etc/bootp  bootp  <USERINPUT>-f</USERINPUT>
</LITERALLAYOUT>
</STEP>
<STEP><PARA>Change the <COMMAND>tftp</COMMAND> configuration line in one of the following ways:</PARA>
<PARA>Remove the <LITERAL>-s</LITERAL> flag from the argument list for <COMMAND>tftpd</COMMAND>:</PARA>
<LITERALLAYOUT>
tftp   dgram  udp   wait  guest   /usr/etc/tftpd  tftpd -s
</LITERALLAYOUT>
<PARA>This allows <COMMAND>tftpd</COMMAND> access to all publicly readable directories. If you are concerned about a possible security compromise, you can instead explicitly list the directories to which <COMMAND>tftpd</COMMAND> needs access. In this case, you need to add <FILENAME>/usr/etc</FILENAME>:</PARA>
<LITERALLAYOUT>
tftp dgram udp wait guest /usr/etc/tftpd tftpd -s <USERINPUT>/usr/etc</USERINPUT>
</LITERALLAYOUT>
<PARA>See <COMMAND>tftpd(1M)</COMMAND> and <COMMAND>tftp(1C)</COMMAND> for more information.</PARA>
</STEP>
<STEP><PARA>Signal <COMMAND>inetd</COMMAND> to reread its configuration file.</PARA>
<LITERALLAYOUT>
<USERINPUT>killall -1 inetd</USERINPUT>
</LITERALLAYOUT>
</STEP>
</PROCEDURE>
</SECTION>
<SECTION><TITLE>Booting across a Larger Network</TITLE><PARA>If you have access to a larger network, and the bootable file you need is sufficiently remote on the network that the <COMMAND>tftp</COMMAND> and <COMMAND>bootp</COMMAND> timeouts and network delays are keeping you from booting successfully, it is possible to use an intermediary host as a <COMMAND>bootp</COMMAND> server.</PARA>
<PARA>As an example, consider the following situation. You have a host named <LITERAL>local_host</LITERAL> that needs to boot a kernel found on the remote system <LITERAL>far_host</LITERAL>. But the network is heavily used, resulting in <COMMAND>bootp</COMMAND> and <COMMAND>tftp</COMMAND> timing out before the boot operation can take place. However, a third host, <LITERAL>near_host</LITERAL>, has the optional NFS software and has <COMMAND>automount(1M)</COMMAND> running, allowing access to the files on <LITERAL>far_host</LITERAL>. To boot through this method, perform the steps in <XREF LINKEND="LE34181-TITLE">:</PARA><PROCEDURE  ID="LE34181-PARENT"><TITLE  ID="LE34181-TITLE">Booting Using automount</TITLE>
<STEP><PARA>On <LITERAL>near_host</LITERAL>, the system acting as intermediary, log in as <LITERAL>root</LITERAL> and open the file <FILENAME>/etc/inetd.conf</FILENAME>. This file configures the <COMMAND>bootp</COMMAND> server, which is started by the <COMMAND>inetd(1M)</COMMAND> daemon.</PARA>
</STEP>
<STEP><PARA>Change the <COMMAND>bootp</COMMAND> description in the <FILENAME>/etc/inetd.conf</FILENAME> file so that <COMMAND>inetd</COMMAND> invokes <COMMAND>bootp</COMMAND> with the <LITERAL>-f</LITERAL> flag. Find this line:</PARA>
<LITERALLAYOUT>
bootp  dgram  udp  wait  root  /usr/etc/bootp  bootp
</LITERALLAYOUT>
<PARA>Add the <LITERAL>-f</LITERAL> flag to the final <COMMAND>bootp</COMMAND> on the line:</PARA>
<LITERALLAYOUT>
bootp  dgram  udp  wait  root  /usr/etc/bootp  bootp  <USERINPUT>-f</USERINPUT>
</LITERALLAYOUT>
<PARA>Change the <COMMAND>tftp</COMMAND> configuration line in the <FILENAME>/etc/inetd.conf</FILENAME> file in one of the following two ways:</PARA>
<PARA>Remove the <LITERAL>-s /usr/local/boot</LITERAL> string from the argument list for <COMMAND>tftpd</COMMAND>, so that the entry matches the following:</PARA>
<LITERALLAYOUT>
tftp   dgram  udp   wait  guest   /usr/etc/tftpd  tftpd
</LITERALLAYOUT>
<PARA>This allows <COMMAND>tftpd</COMMAND> access to all publicly readable directories. </PARA>
<PARA>If you are concerned about a possible security compromise, you can instead explicitly list the directories to which <COMMAND>tftpd</COMMAND> needs access. In this case, you need to add <FILENAME>/hosts</FILENAME>:</PARA>
<LITERALLAYOUT>
tftp dgram udp wait guest /usr/etc/tftpd tftpd -s <USERINPUT>/hosts</USERINPUT>
</LITERALLAYOUT>
<PARA>See <COMMAND>tftpd(1M)</COMMAND> and <COMMAND>tftp(1C)</COMMAND> for more information.</PARA>
</STEP>
<STEP><PARA>Signal <COMMAND>inetd</COMMAND> to reread its configuration file.</PARA>
<LITERALLAYOUT>
<USERINPUT>killall -1 inetd</USERINPUT>
</LITERALLAYOUT>
</STEP>
<STEP><PARA>On <LITERAL>far_host</LITERAL>, the system on the distant subnetwork, use NFS to export the directory containing the needed bootable kernel (in this case, the file is <FILENAME>/usr/local/boot/unix</FILENAME>). If you need help exporting a directory, see the <COMMAND>export(1M)</COMMAND> man page.</PARA>
</STEP>
<STEP><PARA>On <LITERAL>local_host</LITERAL>, the system you are trying to boot, give the command:</PARA>
<LITERALLAYOUT>
<USERINPUT>boot -f bootp()near_host:/hosts/far_host/usr/local/boot/unix</USERINPUT>
</LITERALLAYOUT>
<PARA>If <COMMAND>bootp</COMMAND> times out, try the command again, as <COMMAND>automount</COMMAND> may require a bit of time to retrieve the files from the remote system.</PARA>
</STEP>
</PROCEDURE>
</SECTION>
</SECTION>
<SECTION><TITLE>Booting from a Disk or Other Device</TITLE><PARA><INDEXTERM ID="ITch09-55"><PRIMARY>booting</PRIMARY>
<SECONDARY>from various media</SECONDARY>
</INDEXTERM>
<INDEXTERM ID="ITch09-56"><PRIMARY>booting</PRIMARY>
<SECONDARY>from a resource list</SECONDARY>
</INDEXTERM>
To tell the command monitor to load standalone commands from various resources (such as a disk or CD-ROM device), set the <LITERAL>path</LITERAL> environment variable. (See <XREF LINKEND="LE16649-TITLE">..) Set the <LITERAL>path</LITERAL> variable as follows:</PARA>
<LITERALLAYOUT>
<USERINPUT>setenv path </USERINPUT>"<REPLACEABLE>device</REPLACEABLE>_name <REPLACEABLE>alternate_path</REPLACEABLE>"
</LITERALLAYOUT>
<PARA>For example, issue the following command:</PARA>
<LITERALLAYOUT>
<USERINPUT>setenv path "dksc(0)disk(0)partition(8)bootp()/altdir/altbootfile"</USERINPUT>
</LITERALLAYOUT>
<PARA>This causes the command monitor to boot the file <FILENAME>dksc(0)disk(0)partition(8)/altdir/altbootfile</FILENAME>. If that file fails, the command monitor boots <FILENAME>bootp()/altdir/altbootfile</FILENAME>. If that file also fails, the command monitor prints the message <LITERAL>command not found</LITERAL>. Note that pathnames are separated with spaces. If the device specification is contained within a command or by <LITERAL>bootfile</LITERAL>, the command monitor ignores <LITERAL>path</LITERAL>. Only <COMMAND>bootp</COMMAND> or volume headers are understood by the PROM.</PARA>
</SECTION>
</SECTION>
</CHAPTER>
