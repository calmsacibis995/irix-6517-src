<!-- Produced by version 3.14 (11/22/96) of SGI Frame/SGML translator -->
<CHAPTER LBL="9"><TITLE><XREFTARGET ID="16817">IRIX sendmail</TITLE><PARAGRAPH>This chapter describes IRIX <COMMAND>sendmail</COMMAND>, a facility for routing mail across an internetwork. This chapter is for system administrators who set up and maintain the mail system on a station or network. It provides the information necessary for a straightforward implementation of <COMMAND>sendmail</COMMAND>. The following topics are covered:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="31599" TYPE="TITLE">&ldquo;About the Mail System&rdquo;</XREF>&space;</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="49363" TYPE="TITLE">&ldquo;Overview of sendmail&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="39905" TYPE="TITLE">&ldquo;About the sendmail Components&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="92998" TYPE="TITLE">&ldquo;Aliases Database for sendmail&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="84203" TYPE="TITLE">&ldquo;sendmail Network Configurations&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="29997" TYPE="TITLE">&ldquo;User-Configurable sendmail Macros and Classes&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="31666" TYPE="TITLE">&ldquo;sendmail Planning Checklist&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="69451" TYPE="TITLE">&ldquo;sendmail Configuration Example&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="72347" TYPE="TITLE">&ldquo;Managing sendmail&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="50008" TYPE="TITLE">&ldquo;Identifying Errors in sendmail.cf File&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="83321" TYPE="TITLE">&ldquo;About sendmail MX Records&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>For additional reference material on IRIX <COMMAND>sendmail</COMMAND>, see <XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B, &ldquo;IRIX sendmail Reference.&rdquo;</XREF></PARAGRAPH>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="31599">About the Mail System</TITLE><PARAGRAPH>The mail system is a group of programs that you can use to send messages to and receive messages from other users on the network. You can send mail through either UUCP or TCP/IP. The IRIX operating system uses Netscape Mail, System V <FILENAME>/bin/mail</FILENAME>,&space;4.3BSD <FILENAME>/usr/sbin/Mail</FILENAME>, and <COMMAND>sendmail</COMMAND>&space;for its mail implementation. </PARAGRAPH>
<PARAGRAPH>The process of delivering mail involves four elements:<INDEXTARGET ID="09.sendmail1"><!-- POSTPROCESSDATA: 09.sendmail1|mail system components --></PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM>User Interface </HANGITEM>
<HANGBODY><PARAGRAPH>&lbreak;The user interface creates new messages and reads, removes, and archives received messages. Netscape Mail, System V <COMMAND>/bin/mail</COMMAND>, and 4.3BSD <COMMAND>/usr/sbin/Mail</COMMAND>&space;are the user interfaces provided with IRIX. Reference pages are available to fully describe the features of these interfaces, and Netscape has an online help system.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>Mail Routing </HANGITEM>
<HANGBODY><PARAGRAPH>A mail router examines each message and routes it through the network to the appropriate station. The <COMMAND>sendmail</COMMAND> program not only routes messages, but also formats them appropriately for their recipient stations.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>Mail Transfer </HANGITEM>
<HANGBODY><PARAGRAPH>A mail transfer program transmits messages from one station to another. sendmail implements the Simple Mail Transfer Protocol (SMTP) over TCP/IP. For TCP/IP mail, <COMMAND>sendmail</COMMAND> acts as an integrated routing and transfer program. In all cases, mail transfer has a counterpart: mail reception. In most cases, a single program provides both functions. UUCP is a mail transfer program that uses its own protocols and runs over serial lines.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>Mail Delivery </HANGITEM>
<HANGBODY><PARAGRAPH>A mail delivery program deposits mail into a data file for later perusal by a user or another program. The /<COMMAND>bin/mail</COMMAND> -d&space;program delivers local mail.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
<PARAGRAPH>After you compose a message by using Netscape Mail, <COMMAND>/bin/mail</COMMAND>, or <COMMAND>/usr/sbin/Mail</COMMAND>, the message is sent to <COMMAND>sendmail</COMMAND>, which attempts to determine the destination of the message. sendmail&space;either calls <COMMAND>/bin/mail</COMMAND> (for mail to a user on the local station) or passes the message to the appropriate mail transfer program (for mail to a user on a remote station). </PARAGRAPH>
<PARAGRAPH>When <COMMAND>sendmail</COMMAND> receives a message from another station, it analyzes the recipient address; then, it either calls <COMMAND>/bin/mail</COMMAND> to complete the delivery if the local station is acting as a relay, or passes the message to the mail transfer program. For TCP/IP SMTP, <COMMAND>sendmail</COMMAND> also performs the mail transfer.</PARAGRAPH>
<PARAGRAPH>When you send a mail message on a network that uses TCP/IP, several layers of network software are involved. <XREF IDREF="38674" TYPE="GRAPHIC">Figure&nbsp;9-1</XREF> shows the layers of TCP/IP mail network software.</PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="tcp.ip.layers.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="9-1"><PREFIX>Figure 9-1 </PREFIX><XREFTARGET ID="38674">Layers of TCP/IP Mail Software</CAPTION>
</FIGURE>
</PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="49363">Overview of sendmail </TITLE><PARAGRAPH>The Transmission Control Protocol (TCP) layer supports SMTP, which <COMMAND>sendmail</COMMAND> uses to transfer mail to other TCP/IP stations. <COMMAND>sendmail</COMMAND>&space;is responsible for calling local delivery programs, mail routing, and TCP/IP mail transfer; it may also call other mail transfer programs. For example, <COMMAND>sendmail</COMMAND>&space;uses the UUCP transmission program to handle messages sent to UUCP stations.<INDEXTARGET ID="09.sendmail2"><!-- POSTPROCESSDATA: 09.sendmail2|<ITALICS>sendmail</ITALICS>: general description --></PARAGRAPH>
<PARAGRAPH><COMMAND>sendmail</COMMAND>'s implementation features aliasing, forwarding, automatic routing to network gateways, and flexible configuration.</PARAGRAPH>
<PARAGRAPH>In a simple network, each node has an address, and resources can be identified with a host-resource pair. For example, a mail system can refer to users with a host&ndash;user-name pair. Station names and numbers must be administered by a central authority, but user names can be assigned locally to each station.</PARAGRAPH>
<PARAGRAPH>In an internetwork, multiple networks with different characteristics and management must communicate. In particular, the syntax and semantics of resource identification change. You can handle certain simple cases by using improvised techniques, such as providing network names that appear local to stations on other networks. However, the general case is extremely complex. For example, some networks require point-to-point routing, which simplifies the database update problem, because only adjacent stations are entered into the system tables; others use end-to-end addressing. Some networks use a left-associative syntax; others use a right-associative syntax, causing ambiguity in mixed addresses.</PARAGRAPH>
<PARAGRAPH>Internetwork standards seek to eliminate these problems. Initially, these standards proposed expanding the address pairs to address triples, consisting of <VARIABLE>network</VARIABLE>, <VARIABLE>station</VARIABLE>, <VARIABLE>resource</VARIABLE>. Network numbers must be universally agreed upon; stations can be assigned locally on each network. The user-level presentation was quickly expanded to address domains, composed of a local resource identification and a hierarchical domain specification with a common static root, as defined in RFC 1034. The domain technique separates the issue of physical versus logical addressing. For example, an address of the form jane@iris1.company.com describes only the logical organization of the address space.</PARAGRAPH>
<PARAGRAPH>&space;<COMMAND>sendmail</COMMAND>&space;bridges the gap between the world of totally isolated networks that know nothing of each other and the clean, tightly coupled world of unique network numbers. <COMMAND>sendmail</COMMAND> can accept old arbitrary address syntaxes, resolving ambiguities by using heuristics specified by the network administrator, as well as domain-based addressing. <COMMAND>sendmail</COMMAND> helps guide the conversion of message formats between disparate networks. In short, <COMMAND>sendmail</COMMAND>&space;is designed to assist a graceful transition to consistent internetwork addressing schemes.</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>System Organization</TITLE><PARAGRAPH>The design goals for sendmail included the following:<INDEXTARGET ID="09.sendmail3"><!-- POSTPROCESSDATA: 09.sendmail3|<ITALICS>sendmail</ITALICS>: design features --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Message delivery should be reliable, guaranteeing that every message is correctly delivered or at least brought to the attention of a human for correct disposal; no message should ever be completely lost.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Existing software should be used to do actual message delivery whenever possible.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH><COMMAND>sendmail</COMMAND>&space;should be easy to expand to fairly complex environments.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Configuration should not be compiled into the code.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH><COMMAND>sendmail</COMMAND>&space;should let various groups maintain their own mailing lists, and let individuals specify their own forwarding, without modifying the station's alias file.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Each user should be able to specify the mailer to execute to process mail being delivered. This feature allows users with specialized mailers that use a different format to build their environments without changing the system, and facilitates specialized functions (such as returning an &ldquo;I am on vacation&rdquo; message).</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>To minimize network traffic, addresses should be batched to a single station where possible, without assistance from the user. </PARAGRAPH>
</LIST>
</ORDEREDLIST>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE>Structure of sendmail</TITLE><PARAGRAPH><XREF IDREF="75185" TYPE="GRAPHIC">Figure&nbsp;9-2</XREF> illustrates the sendmail system structure that is based on the original design goals for <COMMAND>sendmail</COMMAND>. </PARAGRAPH>
<PARAGRAPH><FIGURE>&space;<GRAPHIC FILE="sendmail.system.structure.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="9-2"><PREFIX>Figure 9-2 </PREFIX><XREFTARGET ID="75185">sendmail System Structure</CAPTION>
</FIGURE>
</PARAGRAPH>
<PARAGRAPH><COMMAND>sendmail</COMMAND>&space;neither interfaces with the user nor does actual mail delivery. Rather, it collects a message generated by a user agent program such as Berkeley <COMMAND>Mail</COMMAND>, edits the message as required by the destination network, and calls appropriate mailers to do mail delivery or queueing for network transmission. The exception is mail sent to a file; in this case, <COMMAND>sendmail</COMMAND> delivers the mail directly.<INDEXTARGET ID="09.sendmail4"><!-- POSTPROCESSDATA: 09.sendmail4|<ITALICS>sendmail</ITALICS>: functions of --></PARAGRAPH>
<PARAGRAPH>This discipline allows the insertion of new mailers at minimum cost.</PARAGRAPH>
<PARAGRAPH>Because some of the senders may be network servers and some of the mailers may be network clients, <COMMAND>sendmail</COMMAND>&space;can be used as an internetwork mail gateway.</PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="39905">About the sendmail Components</TITLE><PARAGRAPH>Understanding the <COMMAND>sendmail</COMMAND> programs requires understanding a variety of components. Some of these components are daemons, scripts, files, and commands. This section describes the various <COMMAND>sendmail</COMMAND> components:<INDEXTARGET ID="09.sendmail5"><!-- POSTPROCESSDATA: 09.sendmail5|<ITALICS>sendmail</ITALICS>: software components --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="98454" TYPE="TITLE">&ldquo;sendmail Daemon&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="35807" TYPE="TITLE">&ldquo;sendmail Scripts&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="65319" TYPE="TITLE">&ldquo;sendmail Related Files and Directories&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="98454">sendmail Daemon</TITLE><PARAGRAPH>For <COMMAND>sendmail</COMMAND>&space;to process incoming mail, a daemon must be running. The <COMMAND>sendmail</COMMAND> daemon is the <COMMAND>sendmail</COMMAND> program with specific flags. (<XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B</XREF> describes the <COMMAND>sendmail</COMMAND>&space;command-line flags in detail.) The daemon is automatically started by the <FILENAME>/etc/init.d/mail</FILENAME> script at station startup. The default command for the <COMMAND>sendmail</COMMAND> daemon is<INDEXTARGET ID="09.sendmail6"><!-- POSTPROCESSDATA: 09.sendmail6|<ITALICS>sendmail</ITALICS> daemon --></PARAGRAPH>
<EXAMPLE>
<USERINPUT>/usr/lib/sendmail -bd -q15m </USERINPUT>
</EXAMPLE>
<PARAGRAPH>The<CMDLINEOPT>&space;-bd</CMDLINEOPT> flag causes <COMMAND>sendmail</COMMAND> to run in daemon mode. The <CMDLINEOPT>-q15m</CMDLINEOPT> flag causes <COMMAND>sendmail</COMMAND> to fork a subdaemon for queue processing every fifteen minutes. The <CMDLINEOPT>-bd</CMDLINEOPT> and<CMDLINEOPT>&space;-q</CMDLINEOPT>&space;flags can be combined in one call. </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="35807">sendmail Scripts</TITLE><PARAGRAPH>Several scripts provided with your system perform common functions in <COMMAND>sendmail</COMMAND>. Use these scripts whenever possible, because they have been tested and are known to perform the task correctly:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="28350" TYPE="TITLE">&ldquo;/etc/init.d/mail sendmail Script&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="37645" TYPE="TITLE">&ldquo;/usr/etc/configmail sendmail Script&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="93071" TYPE="TITLE">&ldquo;/etc/sendmail.cf Configuration File&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="28350">/etc/init.d/mail sendmail Script</TITLE><PARAGRAPH>Under rare circumstances, a user may need to stop or start the <INDEXTARGET ID="09.sendmail7"><!-- POSTPROCESSDATA: 09.sendmail7|<ITALICS>/etc/init.d/mail</ITALICS> script --><COMMAND>sendmail</COMMAND>&space;daemon manually. For example, to implement changes to the configuration file, you must stop all running <COMMAND>sendmail</COMMAND>&space;processes, &ldquo;refreeze&rdquo; the configuration file, and restart the <COMMAND>sendmail</COMMAND>&space;daemon before the new configuration will take effect. To simplify the task of starting and stopping <COMMAND>sendmail</COMMAND>, IRIX provides a shell script called <FILENAME>/etc/init.d/mail</FILENAME>.<INDEXTARGET ID="09.sendmail8"><!-- POSTPROCESSDATA: 09.sendmail8|<ITALICS>sendmail</ITALICS> scripts --></PARAGRAPH>
<PARAGRAPH>This script takes a single argument, either <BOLD>start</BOLD> or <BOLD>stop</BOLD>, which starts or stops the <COMMAND>sendmail</COMMAND>&space;daemon respectively. You must be superuser (root) to use this script. For example, to stop <INDEXTARGET ID="09.sendmail9"><!-- POSTPROCESSDATA: 09.sendmail9|<ITALICS>sendmail</ITALICS> daemon --><COMMAND>sendmail</COMMAND>, use the following command:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/etc/init.d/mail stop</USERINPUT>&space;
</EXAMPLE>
<PARAGRAPH>When <FILENAME>/etc/init.d/mail</FILENAME>&space;is called with the <CMDLINEOPT>start</CMDLINEOPT> argument, it verifies the existence and permissions of various sendmail related files and directories (see <XREF IDREF="65319" TYPE="TITLE">&ldquo;sendmail Related Files and Directories&rdquo;</XREF>). If a required component such as the <FILENAME>/var/spool/mqueue</FILENAME> directory is missing, the script creates it. For more complex components, such as<FILENAME>&space;/etc/aliases</FILENAME>, the script exits with a message.</PARAGRAPH>
<PARAGRAPH>When the <FILENAME>/etc/init.d/mail</FILENAME>&space;script is called with the <CMDLINEOPT>stop</CMDLINEOPT> argument, it kills all running <COMMAND>sendmail</COMMAND>&space;processes with a SIGTERM signal.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>Station start-up includes an automatic call to the <FILENAME>/etc/init.d/mail</FILENAME>&space;script with the <CMDLINEOPT>start</CMDLINEOPT> argument. If station start-up runs in verbose mode (that is, <COMMAND>/etc/chkconfig</COMMAND> verbose on), the following message displays, verifying that <COMMAND>sendmail</COMMAND> has been started:</NOTE>
<EXAMPLE>
Mailer daemons: sendmail
</EXAMPLE>
<PARAGRAPH>For more information, examine the <FILENAME>/etc/init.d/mail</FILENAME> script.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="37645">/usr/etc/configmail sendmail Script</TITLE><PARAGRAPH>The <INDEXTARGET ID="09.sendmail10"><!-- POSTPROCESSDATA: 09.sendmail10|<ITALICS>/usr/etc/configmail</ITALICS> script --><FILENAME>/usr/etc/configmail</FILENAME> script provides an interface between command line input and the <FILENAME>sendmail.cf</FILENAME> file. For more information, see <XREF IDREF="65319" TYPE="TITLE">&ldquo;sendmail Related Files and Directories.&rdquo;</XREF> It pipes the macro and class definitions into the <FILENAME>sendmail.params</FILENAME> file. This script simplifies the <COMMAND>sendmail</COMMAND> configuration process.<INDEXTARGET ID="09.sendmail11"><!-- POSTPROCESSDATA: 09.sendmail11|<ITALICS>configmail</ITALICS> script --></PARAGRAPH>
<PARAGRAPH>The <COMMAND>configmail</COMMAND> script allows the user to interact with several <FILENAME>sendmail </FILENAME>parameters. These parameters are equivalent to <FILENAME>sendmail.cf</FILENAME>&space;macros and classes. You can verify the current parameter settings, set specific parameters, issue a quick setup command, and get some basic online help. <COMMAND>configmail</COMMAND> stores your changes in the <FILENAME>sendmail.params</FILENAME> file, which is read by <COMMAND>sendmail</COMMAND> at startup time.</PARAGRAPH>
</SECTION3>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="65319">sendmail Related Files and Directories</TITLE><PARAGRAPH>The <COMMAND>sendmail</COMMAND> configuration files and directories are<INDEXTARGET ID="09.sendmail12"><!-- POSTPROCESSDATA: 09.sendmail12|sendmail: files and directories --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><FILENAME></FILENAME>
<XREF IDREF="93071" TYPE="TITLE">&ldquo;/etc/sendmail.cf Configuration File&rdquo;</XREF><FILENAME></FILENAME></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><FILENAME></FILENAME>
<XREF IDREF="22574" TYPE="TITLE">&ldquo;/etc/sendmail.hf Help File&rdquo;</XREF><FILENAME></FILENAME></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><FILENAME></FILENAME>
<XREF IDREF="65922" TYPE="TITLE">&ldquo;/etc/sendmail.st Statistics File&rdquo;</XREF><FILENAME></FILENAME></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><FILENAME></FILENAME>
<XREF IDREF="32798" TYPE="TITLE">&ldquo;/etc/aliases Aliases File&rdquo;</XREF><FILENAME></FILENAME></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><FILENAME></FILENAME>
<XREF IDREF="43730" TYPE="TITLE">&ldquo;/var/spool/mqueue Mail Queue File&rdquo;</XREF><FILENAME></FILENAME></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><FILENAME></FILENAME>
<XREF IDREF="55848" TYPE="TITLE">&ldquo;/var/mail Incoming Mail Directory&rdquo;</XREF><FILENAME></FILENAME></PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>sendmail can also be tailored with flags and options from the command line, see <XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B, &ldquo;IRIX sendmail Reference.&rdquo;</XREF></PARAGRAPH>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="93071">/etc/sendmail.cf Configuration File</TITLE><PARAGRAPH>At the heart of the <INDEXTARGET ID="09.sendmail13"><!-- POSTPROCESSDATA: 09.sendmail13|<ITALICS>/usr/lib/sendmail.cf</ITALICS> file --><COMMAND>sendmail</COMMAND> program is the <COMMAND>sendmail</COMMAND>&space;configuration file <FILENAME>/etc/sendmail.cf</FILENAME>. The <INDEXTARGET ID="09.sendmail14"><!-- POSTPROCESSDATA: 09.sendmail14|<ITALICS>sendmail.cf</ITALICS> file: general description --><FILENAME>sendmail.cf</FILENAME> file is an ASCII file that contains most of the configuration information and is read at run time. This file encodes options, header declarations, mailer declarations, trusted user declarations, message precedences, address-rewriting rules, macro definitions, and class definitions.</PARAGRAPH>
<PARAGRAPH>As the mail administrator and in order for you to successfully set up <COMMAND>sendmail</COMMAND>, you must know which <FILENAME>sendmail.cf</FILENAME> macros and variables to change. The <INDEXTARGET ID="09.sendmail15"><!-- POSTPROCESSDATA: 09.sendmail15|<ITALICS>/usr/lib/sendmail.cf.auto</ITALICS> file --><FILENAME>sendmail.cf</FILENAME> file takes advantage of <COMMAND>sendmail</COMMAND>'s ability to read macro and class definitions from pipes, thereby simplifying and automating the <COMMAND>sendmail</COMMAND> configuration process. This file takes command-line input from the <FILENAME>sendmail.params</FILENAME> file and the <COMMAND>/usr/etc/configmail</COMMAND> script and incorporates the input into the appropriate macros and classes.<INDEXTARGET ID="09.sendmail16"><!-- POSTPROCESSDATA: 09.sendmail16|<ITALICS>sendmail.cf.auto</ITALICS> file --></PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="88177">/etc/sendmail.fc Configuration File</TITLE><PARAGRAPH>The <FILENAME>sendmail.fc</FILENAME> file is a frozen configuration file. A frozen configuration file is a version of the<VARIABLE>&space;sendmail.cf</VARIABLE> file that caches the result of program executions and file inclusions. This file is installed by default. The <FILENAME>sendmail.fc</FILENAME> is regenerated automatically every time the system boots, if the file <FILENAME>/etc/sendmail.cf</FILENAME> exists and is not empty. After the <FILENAME>sendmail.fc</FILENAME> file is created, it is used in place of <FILENAME>/etc/sendmail.cf</FILENAME>. This process improves startup speed.&space;<INDEXTARGET ID="09.sendmail17"><!-- POSTPROCESSDATA: 09.sendmail17|<ITALICS>/usr/lib/sendmail.fc</ITALICS> file --><INDEXTARGET ID="09.sendmail18"><!-- POSTPROCESSDATA: 09.sendmail18|<ITALICS>sendmail.fc</ITALICS> file --></PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>All modifications to <COMMAND>sendmail</COMMAND> macros and classes should be made to <FILENAME>sendmail.cf</FILENAME>.</NOTE>
<PARAGRAPH>Once the <FILENAME>/etc/sendmail.fc</FILENAME>&space;file exists, changes to it are not honored until you rebuild <FILENAME>/etc/sendmail.fc</FILENAME>. The mail script <COMMAND>/etc/init.d/mail</COMMAND> automatically rebuilds the frozen configuration file if the <FILENAME>sendmail.cf</FILENAME> file exists. Always use the mail script because it automatically rebuilds the <FILENAME>sendmail.fc</FILENAME> file. If you need to rebuild the frozen configuration file manually, the command is</PARAGRAPH>
<PARAGRAPH><USERINPUT>/usr/lib/sendmail -bz</USERINPUT>&space;</PARAGRAPH>
<PARAGRAPH>The dual-letter option<CMDLINEOPT>&space;-bz </CMDLINEOPT>rebuilds the frozen configuration file. An alternate frozen configuration file may be defined using the<CMDLINEOPT>&space;-Z </CMDLINEOPT>option. See the <REFPAGE>sendmail</REFPAGE> (1M) reference page for limitations. Building a freeze file this way allows you to cache the results of file includes and program executions so that <COMMAND>sendmail</COMMAND> starts swiftly.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="22574">/etc/sendmail.hf Help File</TITLE><PARAGRAPH>The <INDEXTARGET ID="09.sendmail19"><!-- POSTPROCESSDATA: 09.sendmail19|<ITALICS>/usr/lib/sendmail.hf</ITALICS> file --><FILENAME>sendmail.hf</FILENAME> file is the Simple Mail Transfer Protocol (SMTP) help file. It contains some brief information about the various SMTP commands.<INDEXTARGET ID="09.sendmail20"><!-- POSTPROCESSDATA: 09.sendmail20|<ITALICS>sendmail.hf</ITALICS> file --></PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="65922">/etc/sendmail.st Statistics File</TITLE><PARAGRAPH>The <INDEXTARGET ID="09.sendmail21"><!-- POSTPROCESSDATA: 09.sendmail21|<ITALICS>sendmail.st</ITALICS> file --><FILENAME>sendmail.st</FILENAME> file collects statistics related to <COMMAND>sendmail</COMMAND>. By default, the file is not present. You can create the file using the <COMMAND>touch </COMMAND>command. If the file is present, <COMMAND>sendmail</COMMAND> automatically updates the file with relevant <COMMAND>sendmail</COMMAND> statistics.<INDEXTARGET ID="09.sendmail22"><!-- POSTPROCESSDATA: 09.sendmail22|<ITALICS>/usr/lib/sendmail.st</ITALICS> file --></PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="32798">/etc/aliases Aliases File </TITLE><PARAGRAPH>The <INDEXTARGET ID="09.sendmail23"><!-- POSTPROCESSDATA: 09.sendmail23|<ITALICS>/usr/lib/aliases</ITALICS> file --><FILENAME>aliases</FILENAME> file contains the text form of the alias database used by the <COMMAND>sendmail</COMMAND> program. The alias database contains aliases for local mail recipients. For example, the following alias delivers mail addressed to jd on the local station to johndoe@company.com:</PARAGRAPH>
<EXAMPLE>
jd:johndoe@company.com 
</EXAMPLE>
<PARAGRAPH>When <COMMAND>sendmail</COMMAND> starts up, it automatically processes the <FILENAME>aliases</FILENAME> file into the file <FILENAME>/etc/aliases.dir </FILENAME>and <FILENAME>/etc/aliases.pag</FILENAME>. The <FILENAME>aliases.dir</FILENAME> and <FILENAME>/etc/aliases.pag </FILENAME>are NDBM versions of the <FILENAME>aliases</FILENAME> database. The NDBM format improves <COMMAND>sendmail</COMMAND> performance.<INDEXTARGET ID="09.sendmail24"><!-- POSTPROCESSDATA: 09.sendmail24|<ITALICS>aliases</ITALICS> file --></PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>The <COMMAND>newaliases</COMMAND> program must be run after modifying the alias database file. See <XREF IDREF="71800" TYPE="TITLE">&ldquo;Building the sendmail Aliases Database&rdquo;</XREF> for more information about building the alias database.</NOTE>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="43730">/var/spool/mqueue Mail Queue File</TITLE><PARAGRAPH>The mail queue, <INDEXTARGET ID="09.sendmail25"><!-- POSTPROCESSDATA: 09.sendmail25|<ITALICS>/usr/spool/mqueue</ITALICS> directory --><FILENAME>/var/spool/mqueue</FILENAME>, is the directory where the mail queue and temporary files reside. The messages are stored in various queue files that exist under the <FILENAME>/var/spool/mqueue</FILENAME> directory. Queue files take these forms:<INDEXTARGET ID="09.sendmail26"><!-- POSTPROCESSDATA: 09.sendmail26|<ITALICS>mqueue</ITALICS> directory --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>qf*&mdash;control (queue) files for messages</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>df*&mdash;data files</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>tf*&mdash;temporary files</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>nf*&mdash;a file used when a unique ID is created</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>xf*&mdash;transcript file of the current session</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>Normally, a <COMMAND>sendmail</COMMAND>&space;subdaemon processes the messages in this queue periodically, attempting to deliver each message. (The&space;<COMMAND>/etc/init.d/mail</COMMAND>&space;script starts the <COMMAND>sendmail</COMMAND>&space;daemon so that it forks a subdaemon every 15 minutes to process the mail queue.) Each time <COMMAND>sendmail</COMMAND>&space;processes the queue, it reads and sorts the queue, then attempts to run all jobs in order.&space;<INDEXTARGET ID="09.sendmail27"><!-- POSTPROCESSDATA: 09.sendmail27|<ITALICS>sendmail</ITALICS> daemon --></PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>Any mail queue files generated this way cannot be read by previous versions of <VARIABLE>sendmail</VARIABLE>.</NOTE>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="55848">/var/mail Incoming Mail Directory</TITLE><PARAGRAPH><FILENAME><INDEXTARGET ID="09.sendmail28"><!-- POSTPROCESSDATA: 09.sendmail28|<ITALICS>/usr/mail</ITALICS> directory --></FILENAME><FILENAME>/var/mail</FILENAME> is the directory that houses all incoming mail. Each user on a local station receives his or her mail in a file in the directory <FILENAME>/var/mail</FILENAME>. For example, the user guest receives mail in the file <FILENAME>/var/mail/guest</FILENAME>.</PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="92998">Aliases Database for sendmail</TITLE><PARAGRAPH>This section explains how the aliases database for <COMMAND>sendmail</COMMAND> runs, and indicates possible problems and errors:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="71800" TYPE="TITLE">&ldquo;Building the sendmail Aliases Database&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="57054" TYPE="TITLE">&ldquo;Testing the sendmail Aliases Database&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="65988" TYPE="TITLE">&ldquo;sendmail Alias Database Problems&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="27340" TYPE="TITLE">&ldquo;sendmail List Owners&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>The aliases database is an <COMMAND>ndbm</COMMAND> database that contains mail aliases that are used by the <COMMAND>sendmail</COMMAND> program. The text form of the database is maintained in the file <FILENAME>/etc/aliases</FILENAME>. The aliases are of this form:&space;<INDEXTARGET ID="09.sendmail29"><!-- POSTPROCESSDATA: 09.sendmail29|<ITALICS>/usr/lib/aliases</ITALICS> database --><INDEXTARGET ID="09.sendmail30"><!-- POSTPROCESSDATA: 09.sendmail30|<ITALICS>aliases</ITALICS> database: format of --></PARAGRAPH>
<EXAMPLE>
name: name1 [, name2, ...]
</EXAMPLE>
<PARAGRAPH>For example, the following command delivers mail addressed to jd to johndoe@company.com:</PARAGRAPH>
<EXAMPLE>
jd:johndoe@company.com 
</EXAMPLE>
<NOTE><PREFIX>Note</PREFIX>Only the local part of an address can be aliased. For example, the following command is wrong and does not have the desired effect:</NOTE>
<EXAMPLE>
jd@big.university.edu:jd@company.com 
</EXAMPLE>
<PARAGRAPH><COMMAND>sendmail</COMMAND>&space;consults the alias database only after deciding that the message (as originally addressed) should be delivered locally, and after it has rewritten the address to contain only the local part.</PARAGRAPH>
<PARAGRAPH>An alias continuation line must start with a space or a tab. Blank lines and lines beginning with the number sign (#) are treated as comments.</PARAGRAPH>
<PARAGRAPH>If you are running NIS, <COMMAND>sendmail</COMMAND>&space;can use the contents of the NIS alias database with the local <FILENAME>aliases</FILENAME> database by adding the following special alias to the <FILENAME>/etc/aliases</FILENAME> file:</PARAGRAPH>
<EXAMPLE>
+:+
</EXAMPLE>
<PARAGRAPH>This special alias tells <COMMAND>sendmail</COMMAND>&space;to consult the NIS alias database if the alias cannot be found in the local alias database. When the same alias is specified in both the local and NIS aliases file, the local alias supersedes the NIS alias.</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="71800">Building the sendmail Aliases Database</TITLE><PARAGRAPH>At startup, <INDEXTARGET ID="09.sendmail31"><!-- POSTPROCESSDATA: 09.sendmail31|<ITALICS>aliases</ITALICS> database: building --><COMMAND>sendmail</COMMAND>&space;automatically uses the <COMMAND>ndbm </COMMAND>library to process the <FILENAME>/etc/aliases</FILENAME> file into the files <FILENAME>/etc/aliases.dir</FILENAME> and <FILENAME>/etc/aliases.pag</FILENAME>. Using these files to resolve aliases improves performance.</PARAGRAPH>
<PARAGRAPH>When building the NDBM version of the database, sendmail checks the left-hand side of each entry to make sure that it is a local address. sendmail issues a warning for each entry in <FILENAME>/etc/aliases</FILENAME> with a non-local left-hand side. Such entries are not entered into the NDBM version of the database.</PARAGRAPH>
<PARAGRAPH>If the NIS alias database is used with the local <FILENAME>usr/lib/aliases</FILENAME> database, the special +:+ alias is entered into the NDBM version of the database. If <COMMAND>sendmail</COMMAND>&space;cannot find an alias in the NDBM version of the database, it looks for the special +:+ alias. If it finds the special alias, <COMMAND>sendmail</COMMAND>&space;then queries the NIS alias database. This query permits you to change the global NIS alias database without having to rebuild the local alias database. However, the left-hand sides of the NIS alias are not checked by <COMMAND>sendmail</COMMAND>&space;to ensure that they contain only local addresses.</PARAGRAPH>
<PARAGRAPH>If the configuration or the command line specifies the <BOLD>D</BOLD> option, <COMMAND>sendmail</COMMAND>&space;automatically tries to rebuild the alias database when it is out of date. </PARAGRAPH>
<PARAGRAPH><COMMAND>sendmail</COMMAND> rebuilds the alias database if either of the following conditions exists:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>The NDBM version of the database is mode 666.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><COMMAND>sendmail</COMMAND>&space;is running <COMMAND>setuid</COMMAND> to root.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<NOTE><PREFIX>Note</PREFIX>Auto-rebuild can be dangerous on heavily loaded stations with large alias files. If it takes more than five minutes to rebuild the database, there is a chance that several processes will start the rebuild process simultaneously.</NOTE>
<PARAGRAPH><COMMAND>newaliases</COMMAND> is the program used to rebuild the NDBM version of the <FILENAME>aliases</FILENAME> database. This program must be run any time the text version of the <FILENAME>aliases</FILENAME> file is modified. If <COMMAND>newaliases</COMMAND> is not run after making changes to the <COMMAND>aliases</COMMAND> file, the changes are not incorporated into the NDBM <COMMAND>alias</COMMAND> database and are not seen by the <COMMAND>sendmail</COMMAND> program.&space;<INDEXTARGET ID="09.sendmail32"><!-- POSTPROCESSDATA: 09.sendmail32|DBM database --></PARAGRAPH>
<PARAGRAPH>To rebuild the NDBM version of the database without restarting <INDEXTARGET ID="09.sendmail33"><!-- POSTPROCESSDATA: 09.sendmail33|DBM database --><COMMAND>sendmail</COMMAND>, enter this command:<INDEXTARGET ID="09.sendmail34"><!-- POSTPROCESSDATA: 09.sendmail34|<ITALICS>aliases</ITALICS> database: rebuilding --></PARAGRAPH>
<EXAMPLE>
<USERINPUT>newaliases</USERINPUT>&space;
</EXAMPLE>
<PARAGRAPH>Executing this command is equivalent to giving <COMMAND>sendmail</COMMAND>&space;the&space;<BOLD>-bi</BOLD> flag:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/usr/lib/sendmail -bi</USERINPUT>&space;
</EXAMPLE>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="57054">Testing the sendmail Aliases Database</TITLE><PARAGRAPH>You can test the alias database with the <INDEXTARGET ID="09.sendmail35"><!-- POSTPROCESSDATA: 09.sendmail35|<ITALICS>aliases</ITALICS> database: testing --><BOLD>-bv</BOLD> flag of the <COMMAND>sendmail</COMMAND> program. See <XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B</XREF> for more details.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="65988">sendmail Alias Database Problems</TITLE><PARAGRAPH>Problems can occur with the alias database, especially if a <INDEXTARGET ID="09.sendmail36"><!-- POSTPROCESSDATA: 09.sendmail36|<ITALICS>aliases</ITALICS> database: troubleshooting --><COMMAND>sendmail</COMMAND>&space;process accesses the NDBM version before it is completely rebuilt. Two circumstances can cause this problem:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>One process accesses the database while another process is rebuilding it.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>The process rebuilding the database dies because it has been killed, or a station crash has occurred before completing the rebuild.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH><COMMAND>sendmail</COMMAND>&space;has two techniques for trying to relieve these problems. First, to avoid the problem of a partially rebuilt database, <COMMAND>sendmail</COMMAND>&space;ignores interrupts while rebuilding the database. Second, at the end of the rebuild it adds an alias of the following form (which is not normally legal):</PARAGRAPH>
<EXAMPLE>
@: @
</EXAMPLE>
<PARAGRAPH>Before <COMMAND>sendmail</COMMAND>&space;accesses the database, it ensures that this entry exists. For this action to occur, the configuration file must contain the <BOLD>-a</BOLD>&space;option. </PARAGRAPH>
<PARAGRAPH>If the @:@ entry does not exist, <COMMAND>sendmail</COMMAND>&space;waits for it to appear. After the specified waiting period elapses, <COMMAND>sendmail</COMMAND>&space;itself&space;forces a rebuild. For this action to occur, the configuration file must include the <BOLD>D</BOLD>&space;option. If the <BOLD>D</BOLD> option is not specified, a warning message is generated and <COMMAND>sendmail</COMMAND>&space;continues.</PARAGRAPH>
<PARAGRAPH>Another alias problem can arise for stations incorporating the NIS alias database in <FILENAME>/etc/aliases</FILENAME>&space;through the use of the +:+ alias. If the NIS alias server goes down or is otherwise nonresponsive to NIS queries, <COMMAND>sendmail</COMMAND>&space;will not see the aliases normally obtained from the NIS server. This situation may result in mail being returned, marked <SCREENDISPLAY>User unknown</SCREENDISPLAY>. </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="27340">sendmail List Owners</TITLE><PARAGRAPH>If an error occurs when mail is sent to a certain address (x, for example), <COMMAND>sendmail</COMMAND>&space;looks for an alias of the following form to receive the errors:</PARAGRAPH>
<EXAMPLE>
owner-x
</EXAMPLE>
<PARAGRAPH>This scheme is typically useful for a mailing list where a user mailing to the list has no control over the maintenance of the list itself; in this case the list maintainer would be the owner of the list. For example, the following would cause jd@1company.com to get the error that occurs when someone sends mail to unix-hackers, and <COMMAND>sendmail</COMMAND>&space;finds the phony user&space;nosuchuser on the list.</PARAGRAPH>
<CODE>
unix-hackers: jd@company1.com, ed@big.university.edu,nosuchuser, jane@company2.com
owner-unix-hackers: jd@company1.com
</CODE>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="84203">sendmail Network Configurations</TITLE><PARAGRAPH>This section explains the functions of domains, forwarders, and relays in a mail network. It also explains how each of these components is designated in the <INDEXTARGET ID="09.sendmail37"><!-- POSTPROCESSDATA: 09.sendmail37|network configurations, <ITALICS>sendmail</ITALICS> --><FILENAME>/usr/etc/configmail</FILENAME>&space;script&space;and in the <FILENAME>sendmail.cf</FILENAME> file. It is important to understand these designations, because you must enter this information in the working copy of these files for your station. The subsections are:<INDEXTARGET ID="09.sendmail38"><!-- POSTPROCESSDATA: 09.sendmail38|<ITALICS>sendmail</ITALICS>: network configurations --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="14652" TYPE="TITLE">&ldquo;sendmail Mail Domains&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="65260" TYPE="TITLE">&ldquo;sendmail Mail Forwarders&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="66243" TYPE="TITLE">&ldquo;sendmail Mail Relays&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="14652">sendmail Mail Domains</TITLE><PARAGRAPH>Within the <INDEXTARGET ID="09.sendmail39"><!-- POSTPROCESSDATA: 09.sendmail39|mail domains --><COMMAND>sendmail</COMMAND> environment, a domain is an administratively defined area of control with logical rather than physical boundaries. </PARAGRAPH>
<PARAGRAPH>You can configure three general types of domains:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>root: Top-level domain of the local domain space. For example, horses.com is the top level domain for the domain pintos.horses.com. </PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>direct: The domain(s) that a station can send mail to directly (no forwarders or relays involved).</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>local: The domain to which a station belongs.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>The following parameters designate domains in the <FILENAME>/usr/etc/configmail</FILENAME> script and the <FILENAME>/etc/sendmail.cf</FILENAME>&space;file:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><FILENAME>configmail</FILENAME> parameters: <VARIABLE>rootdomain, directdomain,</VARIABLE> and <VARIABLE>localdomain</VARIABLE>&space;</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><FILENAME>sendmail.cf</FILENAME> macros and classes:</PARAGRAPH>
<BULLETLISTIND><BULLETIND><PARAGRAPH>root domain: <VARIABLE>T macro</VARIABLE>&space;</PARAGRAPH>
</BULLETIND>
<BULLETIND><PARAGRAPH>direct domain: <VARIABLE>D class</VARIABLE>&space;</PARAGRAPH>
</BULLETIND>
<BULLETIND><PARAGRAPH>local domain: <VARIABLE>D macro</VARIABLE>&space;</PARAGRAPH>
</BULLETIND>
</BULLETLISTIND>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="65260">sendmail Mail Forwarders</TITLE><PARAGRAPH>A forwarder station is a station that acts as a mail gateway into another network. Typically, stations on either side of a gateway cannot connect directly to each other, making the forwarder station a physical (not just administrative) necessity.<INDEXTARGET ID="09.sendmail40"><!-- POSTPROCESSDATA: 09.sendmail40|mail forwarders --></PARAGRAPH>
<PARAGRAPH>Forwarder stations are not necessarily &ldquo;smarter&rdquo; about mail routing than other stations in the network, but they are &ldquo;better connected.&rdquo; Forwarder stations deliver mail to &ldquo;all points beyond&rdquo; some point in the domain name space. </PARAGRAPH>
<PARAGRAPH>The designation of the forwarder station is primarily determined by the physical topology of the network; the default <FILENAME>sendmail.cf</FILENAME>&space;file can designate only a single forwarder, and the name of that station must be hard-coded in the configuration file. </PARAGRAPH>
<PARAGRAPH>The following parameters designate a mail forwarder in the <FILENAME>/usr/etc/configmail</FILENAME> script and the <FILENAME>/etc/sendmail.cf</FILENAME>&space;file:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><FILENAME>configmail</FILENAME> parameter: <COMMAND>forwarder</COMMAND>&space;</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><FILENAME>sendmail.cf</FILENAME> macro and class: <BOLD>F</BOLD></PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="66243">sendmail Mail Relays</TITLE><PARAGRAPH>A relay station is a station that acts as a collection point for mail destined for a specified domain or group of domains. In the absence of MX (mail exchange) records and mail exchangers, relay stations provide a mechanism whereby mail can be concentrated onto centralized locations before actual delivery. For more information about MX records and mail exchangers, see <INDEXTARGET ID="09.sendmail41"><!-- POSTPROCESSDATA: 09.sendmail41|mail relays --><XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B, &ldquo;IRIX sendmail Reference.&rdquo;</XREF></PARAGRAPH>
<PARAGRAPH>Relay stations are not necessarily &ldquo;better connected&rdquo; than other stations in the network, but they are &ldquo;smarter&rdquo; about mail routing. They deliver mail to &ldquo;all points within&rdquo; some point in the domain name space. </PARAGRAPH>
<PARAGRAPH>For example, a company with a domain company.com has configured <COMMAND>sendmail</COMMAND>&space;to treat alpha.company.com as the forwarder station and omega.company.com as the relay station. sendmail&space;assumes that alpha.company.com is ultimately responsible for all mail to domains other than company.com and that station omega.company.com is ultimately responsible for all mail to the company.com domain itself. Note that there is nothing to prevent the relay and forwarder functions from residing on the same station.The designation of a relay station is primarily determined by administrative decision.<COMMAND>&space;sendmail</COMMAND>&space;can recognize a number of relay stations.</PARAGRAPH>
<PARAGRAPH>The relay station name is a special name used to identify relay stations in the network. This special name is defined by means of the <BOLD>R</BOLD>&space;macro and is typically the name &ldquo;relay.&rdquo; A relay station is so designated by being aliased to the name &ldquo;relay.&rdquo; The default <FILENAME>sendmail.cf</FILENAME>&space;file probes for a station named or aliased to the special relay station name and delivers mail to any such station in preference to the actual destination station. Mail is also sent to relay stations whenever the local station cannot determine the proper routing.</PARAGRAPH>
<PARAGRAPH>The following parameters designate a mail relay in the <FILENAME>/usr/etc/configmail</FILENAME> script and the <FILENAME>/etc/sendmail.cf</FILENAME>&space;file:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><COMMAND>configmail</COMMAND> parameter: <COMMAND>relayname</COMMAND>&space;</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><FILENAME>sendmail.cf</FILENAME> macro: <BOLD>R</BOLD>&space;</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="29997">User-Configurable sendmail Macros and Classes</TITLE><PARAGRAPH>The <FILENAME>sendmail.cf</FILENAME> file defines your mail network by assigning each element in the network a <VARIABLE>macro</VARIABLE> or<VARIABLE>&space;class</VARIABLE> value. The default values in your distribution <FILENAME>sendmail.cf</FILENAME> file will not work without some modification.<INDEXTARGET ID="09.sendmail42"><!-- POSTPROCESSDATA: 09.sendmail42|<ITALICS>sendmail.cf</ITALICS> file: configurable elements --></PARAGRAPH>
<PARAGRAPH>Instead of modifying your <FILENAME>sendmail.cf</FILENAME> file directly, you can use the <FILENAME>/usr/etc/configmail</FILENAME> script. It takes your input, saves it in <FILENAME>sendmail.params, </FILENAME>and configures the appropriate macros and classes according to your <COMMAND>sendmail</COMMAND> environment. The following sections describe the macros and classes:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="50169" TYPE="TITLE">&ldquo;sendmail Domain Name Macro and Class (D)&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="95719" TYPE="TITLE">&ldquo;sendmail Forwarder Station Name Macro and Class (F)&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="37695" TYPE="TITLE">&ldquo;sendmail Relay Station Name Macro (R)&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="29019" TYPE="TITLE">&ldquo;sendmail Top-Level Domain Macro (T)&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="79609" TYPE="TITLE">&ldquo;sendmail Killed Stations Class (K)&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="33550" TYPE="TITLE">&ldquo;sendmail Pathalias Database Macro (P)&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="40923" TYPE="TITLE">&ldquo;sendmail Local Hostname Class (w)&rdquo;</XREF>.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="50169">sendmail Domain Name Macro and Class (D)</TITLE><PARAGRAPH>The <BOLD>D</BOLD> macro defines the local domain name. Be sure that the macro contains the name of the domain in which this station resides. If domains are not used, you can leave this macro empty or comment it out.<INDEXTARGET ID="09.sendmail43"><!-- POSTPROCESSDATA: 09.sendmail43|domain name macros and classes (<ITALICS>sendmail.cf</ITALICS> file) --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>The<BOLD>&space;D</BOLD>&space;class explicitly lists all domains for which this station should send mail directly by means of the local area network mailer.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Mail for domains listed in the <BOLD>D</BOLD> class is sent directly to the destination station, if possible. No attempt is made to send the mail by means of a relay station.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Mail for domains not listed in the <BOLD>D</BOLD> class is sent by means of a relay station associated with the destination station, if possible, rather than directly to the recipient station.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>If this station is a relay for a particular domain, you must enter that domain name in the <BOLD>D</BOLD>&space;class. It is recommended that you always enter the domain name, regardless of whether the station is a relay or not.</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="95719">sendmail Forwarder Station Name Macro and Class (F)</TITLE><PARAGRAPH>The<BOLD>&space;F</BOLD> macro defines the station name or alias of the station to which this station forwards mail for unknown stations or domains.</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>The <BOLD>F</BOLD> class contains all known names for the station defined in the <BOLD>F</BOLD>&space;macro.<INDEXTARGET ID="09.sendmail44"><!-- POSTPROCESSDATA: 09.sendmail44|<ITALICS>sendmail.cf</ITALICS> file: forwarder name macros and class --></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Mail is sent to the forwarder as a last resort only if one of these conditions exists:</PARAGRAPH>
<BULLETLISTIND><BULLETIND><PARAGRAPH>This station cannot make the destination station name canonical or determine an appropriate relay or mail exchanger for the mail.</PARAGRAPH>
</BULLETIND>
<BULLETIND><PARAGRAPH>The appropriate station, relay, or exchanger for the mail exists outside the top-level domain. (See the description of the<BOLD>&space;T</BOLD>&space;macro later in this section.)</PARAGRAPH>
</BULLETIND>
</BULLETLISTIND>
</BULLET>
<BULLET><PARAGRAPH>If either condition for sending mail to this forwarder station exists, this station puts messages to unknown stations or domains &ldquo;on the wire&rdquo; and hopes for the best.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>If no such station exists in your environment, leave the <BOLD>F</BOLD> macro and class empty. If this station is the forwarder station, put this station's name in the<BOLD>&space;F</BOLD> macro. Put all known names for the station in the <BOLD>F</BOLD>&space;class.</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="37695">sendmail Relay Station Name Macro (R)</TITLE><PARAGRAPH>The <BOLD>R</BOLD> macro defines the station name (or an alias) used by all stations that act as relay stations. Relay stations are forwarders to known internal domains and are defined by the use of this relay station name as their station name or alias. This macro comes preconfigured as<ITALICS>&space;relay</ITALICS>, a name that is strongly recommended.<INDEXTARGET ID="09.sendmail45"><!-- POSTPROCESSDATA: 09.sendmail45|<ITALICS>sendmail.cf</ITALICS> file: relay name macro --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>Do not leave this macro blank, even if your network has no relay stations configured.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Mail relay stations provide an alternative to an MX scheme, and can also be useful as an emergency backup to the use of MX records for internal mail routing.</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="29019">sendmail Top-Level Domain Macro (T)</TITLE><PARAGRAPH>The <BOLD>T</BOLD> macro defines the name of the top level of the local domain space. For example, if this station resides in a subdomain named bar.foo.com under the foo.com domain, and if all stations under the foo.com domain or any subdomain under the foo.com domain are considered to be internal stations, the <BOLD>T</BOLD> macro contains foo.com.<INDEXTARGET ID="09.sendmail46"><!-- POSTPROCESSDATA: 09.sendmail46|<ITALICS>sendmail.cf</ITALICS> file: top-level domain macro --></PARAGRAPH>
<PARAGRAPH>The top-level domain is used with the forwarder station (<BOLD>F</BOLD>) macro and class described earlier in this section. All mail sent to stations outside the top level domain is sent by means of the forwarder station.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="79609">sendmail Killed Stations Class (K)</TITLE><PARAGRAPH>The<BOLD>&space;K</BOLD> class is a list of all known &ldquo;killed&rdquo; or &ldquo;dead&rdquo; stations in the local domain. This is defined only on mail forwarders, to detect mail to stations that no longer exist. Any mail directed to a &ldquo;dead&rdquo; station is automatically sent to the mail forwarder.<INDEXTARGET ID="09.sendmail47"><!-- POSTPROCESSDATA: 09.sendmail47|<ITALICS>sendmail.cf</ITALICS> file: killed stations class --></PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="33550">sendmail Pathalias Database Macro (P)</TITLE><PARAGRAPH>The <BOLD>P</BOLD> macro defines the location of the <FILENAME>pathalias</FILENAME> database that is used by <COMMAND>sendmail</COMMAND>&space;for UUCP mail routing.<INDEXTARGET ID="09.sendmail48"><!-- POSTPROCESSDATA: 09.sendmail48|<ITALICS>sendmail.cf</ITALICS> file: pathalias database macro --></PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="40923">sendmail Local Hostname Class (w)</TITLE><PARAGRAPH>The w class contains all the hostnames under which the local host can receive mail. This class is automatically initialized with all canonical names for all network interfaces on the host. IP aliases will be correctly added to this list.</PARAGRAPH>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="31666">sendmail Planning Checklist</TITLE><PARAGRAPH>Here is a list of items to consider before configuring your <COMMAND>sendmail</COMMAND> environment:<INDEXTARGET ID="09.sendmail49"><!-- POSTPROCESSDATA: 09.sendmail49|<ITALICS>sendmail</ITALICS>: planning list --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>What is the layout of your <COMMAND>sendmail</COMMAND> network (domains, forwarders, relays)?</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>If you are using the <FILENAME>/usr/etc/configmail</FILENAME> script, do you have the values for the parameters you need to modify?</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>If you are manually modifying the <FILENAME>/etc/sendmail.cf</FILENAME> file, do you have the values for the macros and classes that you need to modify?</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Are you setting up any custom <COMMAND>sendmail</COMMAND> aliases? If you are, have aliases ready for the aliases database file.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Are the <FILENAME>/etc/hosts</FILENAME> and <FILENAME>/etc/passwd</FILENAME> files up to date? The files should include the special relay station name for the mail forwarder, station aliases, user accounts for mail users, and so on. If you use domain names, the<FILENAME>&space;/etc/hosts</FILENAME> file should use the following format:</PARAGRAPH>
<EXAMPLE>
<ITALICS>ip_address</ITALICS><ITALICS>&space;fully_qualified_domain_name</ITALICS><ITALICS>&space;alias1</ITALICS><ITALICS>, </ITALICS><ITALICS>alias2</ITALICS><ITALICS>, </ITALICS><ITALICS>...</ITALICS>&space;
</EXAMPLE>
<PARAGRAPH>A common problem with <COMMAND>sendmail</COMMAND> is that administrators place the aliases before the fully qualified domain name in the <FILENAME>/etc/hosts</FILENAME> file. </PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>It is recommended that you do not make the first hostname entry a fully qualified domain name when setting up an isolated or solitaire configuration.</NOTE>
</BULLET>
<BULLET><PARAGRAPH>If you are using the Network Information Service (NIS) or BIND, are the <COMMAND>sendmail</COMMAND>-related files configured correctly (<FILENAME>aliases</FILENAME>, <FILENAME>hosts</FILENAME>, <FILENAME>passwd</FILENAME>)?</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="69451">sendmail Configuration Example</TITLE><PARAGRAPH>This section provides examples for configuring a fictitious <COMMAND>sendmail</COMMAND> environment. The environment includes:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>a standalone station where users can send mail locally <ITALICS>(solitaire)</ITALICS>&space;</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>a simple isolated <COMMAND>sendmail</COMMAND> network with one domain</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>a hierarchical <COMMAND>sendmail</COMMAND> network with relays and one domain (eng.fictitious.com)</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>a hierarchical <COMMAND>sendmail</COMMAND> network with relays and multiple domains (corp.fictitious.com and fin.fictitious.com)</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>a complex hierarchical <COMMAND>sendmail</COMMAND> network with forwarders, relays, and multiple domains (corp.fictitious.com and eng.fictitious.com)</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>a UUCP <COMMAND>sendmail</COMMAND> connection (uk.com)</PARAGRAPH>
</BULLET>
</BULLETLIST>
<NOTE><PREFIX>Note</PREFIX>In the examples, an <ITALICS>empty</ITALICS> macro or class has no values assigned to it. The macro or class is left blank.</NOTE>
<PARAGRAPH><XREF IDREF="12026" TYPE="GRAPHIC">Figure&nbsp;9-3</XREF> illustrates the fictitious <COMMAND>sendmail</COMMAND> environment used in the examples for configuring <COMMAND>sendmail </COMMAND>that follow the figure.</PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="exmpl.sendmail.config.env.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="9-3"><PREFIX>Figure 9-3 </PREFIX>Example <XREFTARGET ID="12026">sendmail Configuration Environment</CAPTION>
</FIGURE>
</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="42988">Customizing the sendmail.cf File</TITLE><PARAGRAPH>The configuration file describes mailers, tells <INDEXTARGET ID="09.sendmail50"><!-- POSTPROCESSDATA: 09.sendmail50|<ITALICS>sendmail.cf</ITALICS> file: customizing examples --><COMMAND>sendmail</COMMAND>&space;how to parse addresses and rewrite message headers, and sets various <COMMAND>sendmail</COMMAND>&space;options. The standard configuration file shipped with IRIX supports a wide variety of mail configurations and does not&space;work &ldquo;out of the box.&rdquo;</PARAGRAPH>
<PARAGRAPH>All examples are based on the default <FILENAME>sendmail.cf</FILENAME>&space;configuration file as it is shipped with IRIX. Note that&space;<COMMAND>sendmail</COMMAND> macros and classes are both case-sensitive. See <XREF IDREF="29997" TYPE="TITLE">&ldquo;User-Configurable sendmail Macros and Classes&rdquo;</XREF>.</PARAGRAPH>
<SECTION3 LBL="" HELPID = ""><TITLE>About sendmail Environments</TITLE><PARAGRAPH>sendmail environments can be as simple as standalone in which the mail service is local, and range in complexity from a simple isolated network, through hierarchical networks with simple or multiple domains, to a complex hierarchical network that forwards and relays, in multiple domains. UUCP mail is also supported. Each of these scenarios is described in the subsections that follow:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="11829" TYPE="TITLE">&ldquo;Customizing sendmail.cf for a Standalone Station (Solitaire)&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="64967" TYPE="TITLE">&ldquo;Customizing sendmail.cf for a Simple Isolated Network&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="36578" TYPE="TITLE">&ldquo;Customizing sendmail.cf for a Hierarchical (Relay) Network With a Single Domain&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="55453" TYPE="TITLE">&ldquo;Customizing sendmail.cf for a Hierarchical (Relay) Network With Multiple Domains&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="70748" TYPE="TITLE">&ldquo;Customizing sendmail.cf for a Complex (Forwarder) Hierarchical (Relay) Network With Domains&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="10664" TYPE="TITLE">&ldquo;Customizing sendmail.cf for UUCP Mail&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="11829">Customizing sendmail.cf for a Standalone Station (Solitaire)</TITLE><PARAGRAPH>In the example configuration in <INDEXTARGET ID="09.sendmail51"><!-- POSTPROCESSDATA: 09.sendmail51|<ITALICS>sendmail.cf</ITALICS> file: customizing for standalone stations --><XREF IDREF="12026" TYPE="GRAPHIC">Figure&nbsp;9-3</XREF>, there is a single, isolated station named <ITALICS>solitaire</ITALICS>. Mail is sent only from one user on the station to another user on the same station. No mail is sent to any other station, and no mail is received from any other station.</PARAGRAPH>
<PARAGRAPH>Using the <FILENAME>configmail</FILENAME> script, set up mail like this:</PARAGRAPH>
<CODE>
/usr/etc/configmail set directdomains NULL
/usr/etc/configmail set localdomain NULL
/usr/etc/configmail set forwarder NULL
/usr/etc/configmail set rootdomain NULL
</CODE>
<PARAGRAPH>If you are configuring the <FILENAME>sendmail.cf</FILENAME> file by hand, make the required adjustments to the following macros and classes:</PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM>The <BOLD>D</BOLD> macro and class: </HANGITEM>
<HANGBODY><PARAGRAPH>&lbreak;Make sure that both the <BOLD>D</BOLD> macro and class are empty.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>The <BOLD>F</BOLD> macro and class: </HANGITEM>
<HANGBODY><PARAGRAPH>&lbreak;Make sure that both the <BOLD>F</BOLD> macro and class are empty.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>The <BOLD>T</BOLD> macro: </HANGITEM>
<HANGBODY><PARAGRAPH>Make sure that the <BOLD>T</BOLD> macro is empty.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
<NOTE><PREFIX>Note</PREFIX>If this is the only station you are configuring for <COMMAND>sendmail</COMMAND>, proceed to <XREF IDREF="55717" TYPE="TITLE">&ldquo;Modifying the Aliases Database&rdquo;</XREF>.</NOTE>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="64967">Customizing sendmail.cf for a Simple Isolated Network</TITLE><PARAGRAPH>An isolated network is the simplest network mail environment: a number of stations reside on a private network and send mail to each other on a peer-to-peer basis. All stations exist in the same domain; no subdomains exist. There is no connection or gateway between this private network and the outside world. No station in the network has greater responsibility for mail delivery than any other station. No relay or forwarder stations exist. The stations in the example network are named <ITALICS>lab1, lab2,</ITALICS>&space;and <ITALICS>lab3</ITALICS>.&space;</PARAGRAPH>
<PARAGRAPH>Each station in the network uses the same configuration and can be set up as in the <XREF IDREF="11829" TYPE="TITLE">&ldquo;Customizing sendmail.cf for a Standalone Station (Solitaire),&rdquo;</XREF> described above, or, as an alternative, you can use <COMMAND>configmail</COMMAND> to perform an automatic setup. For the automatic setup procedure, refer to the section &ldquo;Automatically Configuring sendmail&rdquo; in the <DOCTITLE>Personal System Administration Guide</DOCTITLE>.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="36578">Customizing sendmail.cf for a Hierarchical (Relay) Network With a Single Domain</TITLE><PARAGRAPH>In this example, all stations do not bear the same responsibility for mail delivery. One or more stations are designated as mail relay stations, where mail is concentrated for further processing or queueing before delivery.<INDEXTARGET ID="09.sendmail52"><!-- POSTPROCESSDATA: 09.sendmail52|<ITALICS>sendmail.cf</ITALICS> file: customizing for relay networks --></PARAGRAPH>
<PARAGRAPH>This scheme has particular advantages if some stations frequently are powered off or are otherwise unable to communicate. In such a situation, one or more relay stations are more reliable; they are never or infrequently out of communication with the network and are designated as mail concentration points. When mail is sent to a station that is down, the mail travels to the relay station, where it is queued for later delivery, rather than being queued on the originating station. When the destination station returns to operation, it is more likely that the relay station will be up than the originating station. Therefore, the mail will be delivered to the destination station in a timely manner.</PARAGRAPH>
<PARAGRAPH>This hierarchical scheme also offers administrative advantages. For example, if a single station goes down for an extended period of time, or is simply failing to accept mail, the situation is easier to detect when there is a central mail queue. An administrator can check the mail queue on the relay station to see which stations are not accepting mail. If there were no relay station, mail to the down station would be queued on stations throughout the network, and the problem could be harder to spot. </PARAGRAPH>
<PARAGRAPH>All stations exist under the engr.fictitious.com domain. The stations in the network are named engr1, engr2, and engr3. The mail relay station is engr1. The other stations in the network are expected to send mail through engr1 rather than delivering it directly.</PARAGRAPH>
<PARAGRAPH>Each of the non-relay stations runs the same <FILENAME>sendmail.cf</FILENAME>&space;configuration file. The <FILENAME>sendmail.cf</FILENAME>&space;file on relay station engr1 has a slightly different <KEYWORD>D</KEYWORD> class definition. </PARAGRAPH>
<PARAGRAPH>For example, using the <COMMAND>configmail</COMMAND> script, configure mail on the relay station <ITALICS>engr1</ITALICS>:</PARAGRAPH>
<CODE>
/usr/etc/configmail set directdomains engr.fictitious.com
/usr/etc/configmail set localdomain engr.fictitious.com
/usr/etc/configmail set forwarder NULL
/usr/etc/configmail set rootdomain engr.fictitious.com
</CODE>
<PARAGRAPH>Using the <COMMAND>configmail</COMMAND> script, set up mail on the remaining stations in the engr.fictitious.com domain. Note that the directdomains parameter is set to NULL on all stations except the relay station engr1.</PARAGRAPH>
<CODE>
/usr/etc/configmail set directdomains NULL
/usr/etc/configmail set localdomain engr.fictitious.com
/usr/etc/configmail set forwarder NULL
/usr/etc/configmail set rootdomain engr.fictitious.com
</CODE>
<PARAGRAPH>If you are configuring the <FILENAME>sendmail.cf</FILENAME> file by hand, make the required adjustments to the following macros and classes:</PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM>The <KEYWORD>D</KEYWORD> macro and class </HANGITEM>
<HANGBODY><PARAGRAPH>&lbreak;On all stations, change the <KEYWORD>D</KEYWORD> macro to contain the engr.fictitious.com domain name.</PARAGRAPH>
<PARAGRAPH>On the relay station <ITALICS>engr1</ITALICS>, make sure that the <KEYWORD>D</KEYWORD> class contains the engr.fictitious.com domain name so that engr1 sends mail directly to all stations in the<ITALICS>&space;engr.fictitious.com</ITALICS>&space;domain.</PARAGRAPH>
<PARAGRAPH>On the remaining stations, make sure that the <KEYWORD>D</KEYWORD> class is empty so that they <ITALICS>do not</ITALICS> send mail directly to other stations. (They are to send the mail to engr1.)</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>The <KEYWORD>F</KEYWORD> macro and class </HANGITEM>
<HANGBODY><PARAGRAPH>&lbreak;Make sure that the <KEYWORD>F</KEYWORD> macro and class are empty.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>The <KEYWORD>T</KEYWORD> macro </HANGITEM>
<HANGBODY><PARAGRAPH>On all stations, change the <KEYWORD>T</KEYWORD> macro to contain the engr.fictitious.com domain name.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
<PARAGRAPH>For&space;engr1 to be recognized as the mail relay station, the special relay station name &ldquo;relay&rdquo; (as defined by the R macro) must be one of the station aliases that belongs to&space;engr1. Include the station name &ldquo;relay&rdquo; in the entry for&space;engr1 in <FILENAME>/etc/hosts</FILENAME>&space;or the DNS or NIS equivalent.</PARAGRAPH>
<PARAGRAPH>When you have completed this exercise, proceed to <XREF IDREF="55717" TYPE="TITLE">&ldquo;Modifying the Aliases Database&rdquo;</XREF>.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="55453">Customizing sendmail.cf for a Hierarchical (Relay) Network With Multiple Domains</TITLE><PARAGRAPH>In this example, the hierarchical model is extended to multiple subdomains. This type of environment is a logical extension of the preceding one and is probably the easiest model to expand as the number of stations on the network increases. The environment requires that domain names be used for proper mail addressing. </PARAGRAPH>
<PARAGRAPH>The entire local domain is named corp.fictitious.com. There is one subdomain under the corp.fictitious.com domain: fin.corp.fictitious.com. The stations in the corp.fictitious.com domain are corp1, corp2, and corp3. The stations in the fin.corp.fictitious.com domain are fin1, fin2, and fin3. corp3 is the relay for the corp.fictitious.com domain; fin3 is the relay for the fin.corp.fictitious.com domain.</PARAGRAPH>
<PARAGRAPH>The stations in each of the two domains (corp.fictitious.com and fin.corp.fictitious.com) are configured much like those described in the preceding subsections. </PARAGRAPH>
<PARAGRAPH>Using the <COMMAND>configmail</COMMAND> script, set up mail on the relay station corp3:</PARAGRAPH>
<EXAMPLE>
/usr/etc/configmail set directdomains corp.fictitious.com
/usr/etc/configmail set localdomain corp.fictitious.com
/usr/etc/configmail set forwarder NULL
/usr/etc/configmail set rootdomain corp.fictitious.com
</EXAMPLE>
<PARAGRAPH>Using the <COMMAND>configmail</COMMAND> script, set up mail on the relay station fin3:</PARAGRAPH>
<EXAMPLE>
/usr/etc/configmail set directdomains fin.corp.fictitious.com
/usr/etc/configmail set localdomain fin.corp.fictitious.com
/usr/etc/configmail set forwarder NULL
/usr/etc/configmail set rootdomain corp.fictitious.com
</EXAMPLE>
<PARAGRAPH>Using the <COMMAND>configmail</COMMAND> script, set up mail on the remaining non-relay stations in the corp.fictitious.com domain. Note that the <ITALICS>directdomains</ITALICS> parameter is set to NULL on non-relay stations. </PARAGRAPH>
<EXAMPLE>
<BOLD>/usr/etc/configmail set directdomains NULL</BOLD>
<BOLD>/usr/etc/configmail set localdomain corp.fictitious.com</BOLD>
<BOLD>/usr/etc/configmail set forwarder NULL</BOLD>
<BOLD>/usr/etc/configmail set rootdomain corp.fictitious.com</BOLD>
</EXAMPLE>
<PARAGRAPH>Using the <FILENAME>configmail</FILENAME> script, set up mail on the remaining non-relay stations in the fin.corp.fictitious.com domain. Note that the <ITALICS>directdomains</ITALICS> parameter is set to NULL on non-relay stations. </PARAGRAPH>
<EXAMPLE>
<BOLD>/usr/etc/configmail set directdomains NULL</BOLD>
<BOLD>/usr/etc/configmail set localdomain fin.corp.fictitious.com</BOLD>
<BOLD>/usr/etc/configmail set forwarder NULL</BOLD>
<BOLD>/usr/etc/configmail set rootdomain corp.fictitious.com</BOLD>
</EXAMPLE>
<PARAGRAPH>If you are configuring the <FILENAME>sendmail.cf</FILENAME> file by hand, make the required adjustments to the following macros and classes:</PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM>The <KEYWORD>D</KEYWORD> macro:</HANGITEM>
<HANGBODY><PARAGRAPH>For all stations in the corp.fictitious.com domain, change the <KEYWORD>D</KEYWORD> macro to contain the corp.fictitious.com domain name. </PARAGRAPH>
<PARAGRAPH>For all stations in the fin.corp.fictitious.com domain, change the <KEYWORD>D</KEYWORD> macro to contain the fin.corp.fictitious.com domain name.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>The <KEYWORD>D</KEYWORD> class: </HANGITEM>
<HANGBODY><PARAGRAPH>On the relay station corp3, make sure that the <KEYWORD>D</KEYWORD> class contains the corp.fictitious.com domain name so that corp3 will send mail directly to all stations in the corp.fictitious.com domain. </PARAGRAPH>
<PARAGRAPH>On the relay station fin3, make sure that the <KEYWORD>D</KEYWORD>&space;class contains the&space;fin.corp.fictitious.com domain name so that fin3 will send mail directly to all stations in the fin.corp.fictitious.com domain. </PARAGRAPH>
<PARAGRAPH>On the remaining stations in the network, make sure that the <KEYWORD>D</KEYWORD> class is empty so that they <ITALICS>do not</ITALICS>&space;send mail directly to other stations.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>The <KEYWORD>F</KEYWORD> macro and class: </HANGITEM>
<HANGBODY><PARAGRAPH>&lbreak;Make sure that the <KEYWORD>F</KEYWORD> macro and class are empty.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>The <KEYWORD>T</KEYWORD> macro: </HANGITEM>
<HANGBODY><PARAGRAPH>On each of the stations, change the <KEYWORD>T</KEYWORD> macro to contain the corp.fictitious.com domain name.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
<PARAGRAPH>For the relay stations corp3 and fin3 to be recognized as such, the special relay station name &ldquo;relay&rdquo; (as defined by the <KEYWORD>R</KEYWORD>&space;macro) must be an alias for each of them. There can be only one <ITALICS>relay</ITALICS> alias in the <FILENAME>/etc/hosts</FILENAME>&space;file. Here is how to set up each alias:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>For<ITALICS>&space;corp3</ITALICS>,&space;the alias relay.corp.fictitious.com (and optionally &ldquo;relay&rdquo;) should be included in its entry in&space;<FILENAME>/etc/hosts</FILENAME>&space;or the DNS or NIS equivalent.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>For<ITALICS>&space;fin3</ITALICS>, the alias relay.fin.corp.fictitious.com should be included in its entry in <FILENAME>/etc/hosts</FILENAME>&space;or the DNS or NIS equivalent.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>When you have completed this procedure, proceed to <XREF IDREF="55717" TYPE="TITLE">&ldquo;Modifying the Aliases Database&rdquo;</XREF>.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="70748">Customizing sendmail.cf for a Complex (Forwarder) Hierarchical (Relay) Network With Domains</TITLE><PARAGRAPH>This section explains how to configure a station to act as the forwarder station; a forwarder station can be added to any of the scenarios described in the preceding subsections. Please see <INDEXTARGET ID="09.sendmail53"><!-- POSTPROCESSDATA: 09.sendmail53|<ITALICS>sendmail.cf</ITALICS> file: customizing for complex relay networks --><XREF IDREF="84203" TYPE="TITLE">&ldquo;sendmail Network Configurations&rdquo;</XREF> for an explanation of the forwarder station concept as used by IRIX <ITALICS>sendmail</ITALICS>.&space;</PARAGRAPH>
<PARAGRAPH>This discussion applies to mail environments of all types. Whatever the form of your internal mail environment, whenever you want to use a mail gateway station between your internal mail network and the external world, a forwarder station is required. The sendmail configuration for using this forwarder station is exactly the same for all stations on the internal side of the gateway.</PARAGRAPH>
<PARAGRAPH>The internal mail environment consists of the domain corp.fictitious.com and any or all domains under corp.fictitious.com (fin.corp.fictitious.com). All stations within the corp.fictitious.com domain are capable of communicating with each other. For example, there is no physical restriction to prevent station fin1.fin.corp.fictitious.com from sending mail to corp1.corp.fictitious.com. </PARAGRAPH>
<PARAGRAPH>Station corp2.corp.fictitious.com can connect to all stations within the corp.fictitious.com domain and can also connect to stations in other domains, such as engr.fictitious.com. Station corp2.corp.fictitious.com is therefore the forwarder station to all domains beyond the corp.fictitious.com domain. In this example, station corp2.corp.fictitious.com is aliased to corp2 for ease of addressing in the internal mail environment.</PARAGRAPH>
<PARAGRAPH>In addition to the changes to <FILENAME>sendmail.cf</FILENAME>&space;required for the internal mail environment, make the following changes to the <FILENAME>sendmail.cf</FILENAME>&space;file on all stations within the corp.fictitious.com domain. Using the <COMMAND>configmail</COMMAND> script, change the appropriate parameter:</PARAGRAPH>
<EXAMPLE>
<BOLD>/usr/etc/configmail set forwarder corp2.corp.fictitious.com corp2</BOLD>&space;
</EXAMPLE>
<PARAGRAPH>If configuring the <FILENAME>sendmail.cf</FILENAME> file by hand, make the required adjustments to the following macros and classes:</PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM>The <KEYWORD>F</KEYWORD> macro: </HANGITEM>
<HANGBODY><PARAGRAPH>Make sure that the <KEYWORD>F</KEYWORD> macro contains the station name corp2.corp.fictitious.com. </PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM>The <KEYWORD>F</KEYWORD> class: </HANGITEM>
<HANGBODY><PARAGRAPH>Make sure that the <KEYWORD>F</KEYWORD> class contains the two names corp2 and corp2.corp.fictitious.com, by which the forwarder station is known.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
<PARAGRAPH>When you have completed the procedure, proceed to <XREF IDREF="55717" TYPE="TITLE">&ldquo;Modifying the Aliases Database&rdquo;</XREF>.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="10664">Customizing sendmail.cf for UUCP Mail</TITLE><PARAGRAPH>The default <FILENAME>sendmail.cf</FILENAME>&space;file shipped with IRIX includes support for sending mail through UUCP. This section discusses these capabilities and explains how to integrate UUCP mail into the local mail environment. UUCP support can be added to any of the scenarios described in the preceding subsections.</PARAGRAPH>
<PARAGRAPH>The <INDEXTARGET ID="09.sendmail54"><!-- POSTPROCESSDATA: 09.sendmail54|UUCP: mail --><FILENAME>sendmail.cf</FILENAME>&space;file directs <COMMAND>sendmail</COMMAND>&space;to read the <FILENAME>/etc/uucp/Systems</FILENAME> file on startup. All UUCP station names are read from this file, and stations marked &ldquo;domain-machine&rdquo; are noted. If a UUCP pathalias database is maintained on the station, the location of the database is set with the <KEYWORD>P</KEYWORD>&space;macro.</PARAGRAPH>
<PARAGRAPH>If the <FILENAME>/etc/uucp/Systems</FILENAME> file indicates that there are stations connected to the local station through UUCP, <COMMAND>sendmail</COMMAND>&space;sends mail received on the local station, and addressed to one of the stations described in the <FILENAME>/etc/uucp/Systems</FILENAME>&space;file, on to the proper place. If the&space;<KEYWORD>P</KEYWORD> macro is set and points to a valid UUCP pathalias database, <COMMAND>sendmail</COMMAND>&space;will attempt to find a UUCP path to a station for which it cannot find an address or MX&space;record. If the database returns a good UUCP path to the destination station, <COMMAND>sendmail</COMMAND> attempts to send the mail to the left-most station on the path.</PARAGRAPH>
<PARAGRAPH>Depending upon the network environment, UUCP mail may range from the only form of network mail to one part of a much larger network mail environment. The following sections describe a common technique for adding UUCP to an existing local area mail network.</PARAGRAPH>
<PARAGRAPH>In a sample environment, the local domain is named uk.com. Station uk1.uk.com is the forwarder station, as described in <XREF IDREF="70748" TYPE="TITLE">&ldquo;Customizing sendmail.cf for a Complex (Forwarder) Hierarchical (Relay) Network With Domains&rdquo;</XREF> in <XREF IDREF="42988" TYPE="TITLE">&ldquo;Customizing the sendmail.cf File&rdquo;</XREF>.</PARAGRAPH>
<PARAGRAPH>To avoid forwarder loops, the default <FILENAME>sendmail.cf</FILENAME>&space;file permits only one forwarder station to be configured. Therefore, station uk1.uk.com is also the UUCP forwarder station.</PARAGRAPH>
<PARAGRAPH><BOLD>Changes to sendmail.cf </BOLD></PARAGRAPH>
<PARAGRAPH>No changes to <FILENAME>sendmail.cf</FILENAME>&space;are necessary beyond those required to configure station uk1.uk.com as the forwarder station. (See <XREF IDREF="70748" TYPE="TITLE">&ldquo;Customizing sendmail.cf for a Complex (Forwarder) Hierarchical (Relay) Network With Domains&rdquo;</XREF>.) If station<ITALICS> uk1.uk.com</ITALICS> maintains a pathalias database, the <KEYWORD>P</KEYWORD>&space;macro should be set to the pathname of the pathalias database.</PARAGRAPH>
<PARAGRAPH><BOLD>Other Changes</BOLD></PARAGRAPH>
<PARAGRAPH>The <FILENAME>/etc/uucp/Systems</FILENAME> file must also be configured before sendmail will see any of the UUCP-connected stations. For more information, see <XREF IDREF="90353" TYPE="TITLE">Chapter&nbsp;8, &ldquo;UUCP.&rdquo;</XREF></PARAGRAPH>
<PARAGRAPH>When you have completed this procedure, look ahead to <XREF IDREF="55717" TYPE="TITLE">&ldquo;Modifying the Aliases Database&rdquo;</XREF>.</PARAGRAPH>
</SECTION3>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="55717">Modifying the Aliases Database</TITLE><PARAGRAPH>After modifying a station's <INDEXTARGET ID="09.sendmail55"><!-- POSTPROCESSDATA: 09.sendmail55|<ITALICS>aliases</ITALICS> database: modifying --><FILENAME>sendmail.cf</FILENAME> file (see <XREF IDREF="42988" TYPE="TITLE">&ldquo;Customizing the sendmail.cf File&rdquo;</XREF>,) the alias database file should also be modified to reflect your <COMMAND>sendmail</COMMAND> environment. If you don't have any &ldquo;private&rdquo; company aliases, you still need to modify the <FILENAME>aliases</FILENAME> file to provide it with a valid <FILENAME>postmaster</FILENAME> alias.</PARAGRAPH>
<SECTION3 LBL="" HELPID = ""><TITLE>Creating the Aliases File</TITLE><PARAGRAPH>Continuing with the fictitious example used in <INDEXTARGET ID="09.sendmail56"><!-- POSTPROCESSDATA: 09.sendmail56|aliases (mail), creating --><XREF IDREF="42988" TYPE="TITLE">&ldquo;Customizing the sendmail.cf File&rdquo;</XREF>, assume that the administrator for the domain corp.fictitious.com has derived a list of aliases for the corp.fictitious.com domain. The list of aliases is shown in <XREF IDREF="25857" TYPE="TABLE">Table&nbsp;9-1</XREF>.</PARAGRAPH>
<TABLE COLUMNS="3"><CAPTION LBL="9-1"><PREFIX>Table 9-1 </PREFIX><XREFTARGET ID="25857"> <EMPHASIS>(continued)        </EMPHASIS>Sample aliases File Entries</CAPTION>
<TABLEHEADING><CELL LEFT="0" WIDTH="113"><PARAGRAPH>Alias Name</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>Member</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>Station Name</PARAGRAPH>
</CELL>
</TABLEHEADING>
<TABLEBODY><ROW><CELL LEFT="0" WIDTH="113"><PARAGRAPH>finance</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>john</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>fin1</PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="113"><PARAGRAPH>finance</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>paul</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>fin2</PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="113"><PARAGRAPH>finance</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>mary</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>fin3</PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="113"><PARAGRAPH>corp</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>sharon</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>corp1</PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="113"><PARAGRAPH>corp</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>pam</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>corp2</PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="113"><PARAGRAPH>corp</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>peter</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>corp3</PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="113"><PARAGRAPH>all</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>finance and corp</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>N/A</PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="113"><PARAGRAPH>postmaster</PARAGRAPH>
</CELL>
<CELL LEFT="120" WIDTH="113"><PARAGRAPH>mailmgr</PARAGRAPH>
</CELL>
<CELL LEFT="240" WIDTH="113"><PARAGRAPH>corp1</PARAGRAPH>
</CELL>
</ROW>
</TABLEBODY>
</TABLE>
<PARAGRAPH>The <FILENAME>/etc/aliases</FILENAME> file entries based on the list of aliases generated by the administrator would look like this:</PARAGRAPH>
<CODE>
############################################################# 
# Aliases in this file will NOT be expanded in the header 
# from Mail, but WILL be visible over networks or from 
# /bin/mail. 
# >>>>>>>>> The program "newaliases" must be run after 
# >> NOTE >> this file is updated for any changes to 
# >>>>>>>>>> show through to sendmail. 
############################################################# 
start of common aliases--do not remove this line 
# Add the following alias to enable Yellow Page aliases. If 
# enabled, the YP database defines anything not defined in 
# this file. 
#+:+ 
# Alias for mailer daemon 
MAILER-DAEMON:postmaster 
# send mail likely to be lost to the mail server 
rootcsh:postmaster 
rootsh:postmaster 
. 
. 
. 
games:postmaster 
# Following alias is required by RFC 822 
# You should change 'root' in the first line below to 
# the administrator of this machine, and un-comment the 
# following line. 
postmaster:root 
root:mailmgr@corp1 
# aliases to handle mail to msgs and news 
nobody: /dev/null 
# end of common aliases--do not remove this line 
# corp.fictitious.com aliases 
finance:john@fin1,paul@fin2,mary@fin3 
corp:sharon@corp1,pam@corp2,peter@corp3 
all:finance,corp 
</CODE>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Updating the aliases Database</TITLE><PARAGRAPH>After you modify the <INDEXTARGET ID="09.sendmail57"><!-- POSTPROCESSDATA: 09.sendmail57|<ITALICS>aliases</ITALICS> database: updating --><FILENAME>/etc/aliases</FILENAME> text database file, run the <COMMAND>newaliases</COMMAND> program to incorporate the text changes into the NDBM files, <FILENAME>/etc/aliases.dir</FILENAME> and <FILENAME>/etc/aliases.pag</FILENAME>.</PARAGRAPH>
<PARAGRAPH>Update the aliases database:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/usr/bsd/newaliases</USERINPUT>&space;
</EXAMPLE>
<PARAGRAPH>If there is nothing wrong with your aliases database, <COMMAND>newaliases</COMMAND> lists the number of aliases and then return your prompt. If you see any other message, most likely there is a problem with your aliases file. See <XREF IDREF="62296" TYPE="TITLE">&ldquo;Specifying the sendmail Debugging Flags&rdquo;</XREF> for hints on troubleshooting the alias file.</PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE>Starting the sendmail Daemon</TITLE><PARAGRAPH>After customizing the <INDEXTARGET ID="09.sendmail58"><!-- POSTPROCESSDATA: 09.sendmail58|<ITALICS>sendmail</ITALICS> daemon --><FILENAME>sendmail.cf</FILENAME> files and modifying the <FILENAME>aliases</FILENAME> database, you are ready to start <ITALICS>sendmail</ITALICS>.</PARAGRAPH>
<PARAGRAPH>By default, IRIX automatically starts <COMMAND>sendmail</COMMAND> at station startup by using the shell script <FILENAME>/etc/init.d/mail</FILENAME>.&space;However, if you are configuring and testing <COMMAND>sendmail</COMMAND> and don't want to reboot the station, you can run the <FILENAME>/etc/init.d/mail</FILENAME> script manually. You should always use the mail script to stop and start <COMMAND>sendmail</COMMAND>. It processes and checks <COMMAND>sendmail</COMMAND> related files and programs and in the correct order.</PARAGRAPH>
<PARAGRAPH>Start the <COMMAND>sendmail</COMMAND> daemon:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/etc/init.d/mail start</USERINPUT>&space;
</EXAMPLE>
<PARAGRAPH>If you need to stop <COMMAND>sendmail</COMMAND>, enter the following command:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/etc/init.d/mail stop</USERINPUT>&space;
</EXAMPLE>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="72347">Managing sendmail </TITLE><PARAGRAPH>These aspects of managing the sendmail environment are covered in the following sections:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="19038" TYPE="TITLE">&ldquo;Listing the sendmail Message Queue&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="54755" TYPE="TITLE">&ldquo;Forcing the sendmail Message Queue&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="95857" TYPE="TITLE">&ldquo;Redirecting Mail With the .forward File&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="50008" TYPE="TITLE">&ldquo;Identifying Errors in sendmail.cf File&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>Further aspects of managing the sendmail environment are covered in <XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B, &ldquo;IRIX sendmail Reference.&rdquo;</XREF></PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="19038">Listing the sendmail Message Queue</TITLE><PARAGRAPH>You can list the contents of the queue by using the <INDEXTARGET ID="09.sendmail59"><!-- POSTPROCESSDATA: 09.sendmail59|mail queue --><COMMAND>mailq</COMMAND> command or by specifying the <BOLD>-bp</BOLD>&space;flag to <COMMAND>sendmail</COMMAND>. The list includes a listing of the queue IDs, the size of each message, the date the message entered the queue, and the sender and recipients.<INDEXTARGET ID="09.sendmail60"><!-- POSTPROCESSDATA: 09.sendmail60|queue, mail --></PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="54755">Forcing the sendmail Message Queue</TITLE><PARAGRAPH>The<BOLD>&space;-q</BOLD>&space;flag (with no value) forces <COMMAND>sendmail</COMMAND>&space;to process the queue. It is sometimes useful to use the <BOLD>-v</BOLD>&space;flag (verbose) also when running the queue manually, as follows:</PARAGRAPH>
<EXAMPLE>
<BOLD>/usr/lib/sendmail -q -v</BOLD>&space;
</EXAMPLE>
<PARAGRAPH>In verbose mode, <ITALICS>sendmail</ITALICS>&space;displays the SMTP chatter&space;with other stations as well as messages indicating any delivery errors and final message disposition.</PARAGRAPH>
<PARAGRAPH>Because of the locking algorithm, it is impossible for one job to freeze the queue. However, an uncooperative recipient station or a program recipient that never returns can consume many station resources. Unfortunately, there is no way to resolve this situation without violating the SMTP protocol used by <COMMAND>sendmail</COMMAND>.</PARAGRAPH>
<PARAGRAPH>In some cases, if a major station goes down for a couple of days, a prohibitively large queue may be created. As a result, <COMMAND>sendmail</COMMAND>&space;spends an inordinate amount of time sorting the queue. You can remedy this situation by moving the queue to a temporary location and creating a new queue. The old queue can be run later when the offending station returns to service. </PARAGRAPH>
<PARAGRAPH>Use the following commands to move the entire queue directory. The mail queue should be owned by root and belong to the mail group.</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Change to the <FILENAME>/var/spool </FILENAME>directory.</PARAGRAPH>
<EXAMPLE>
<USERINPUT>cd /var/spool</USERINPUT>&space;
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Give the old mail queue another filename.</PARAGRAPH>
<EXAMPLE>
<USERINPUT>mv mqueue omqueue</USERINPUT>&space;
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Make another directory for the new mail queue.</PARAGRAPH>
<EXAMPLE>
<USERINPUT>mkdir mqueue</USERINPUT>&space;
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Change permissions so that the directory is owned by root.</PARAGRAPH>
<EXAMPLE>
<USERINPUT>chmod 755 mqueue</USERINPUT>&space;
</EXAMPLE>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>Then kill the existing <COMMAND>sendmail</COMMAND>&space;daemon (because it will still be processing in the old queue directory) and create a new daemon:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Stop the <COMMAND>sendmail</COMMAND> daemon that is currently running.</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/etc/init.d/mail stop</USERINPUT>&space;
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Start a new<COMMAND>&space;sendmail</COMMAND> daemon. </PARAGRAPH>
<EXAMPLE>
<USERINPUT>/etc/init.d/mail start</USERINPUT>&space;
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>To run the old mail queue, use the following command:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/usr/lib/sendmail -oQ/var/spool/omqueue -q</USERINPUT>&space;
</EXAMPLE>
<PARAGRAPH>The&space;-oQ flag specifies an alternate queue directory, and the -q flag causes <COMMAND>sendmail</COMMAND>&space;to run every job in the queue once and then return. Use the -v (verbose) flag to watch what is going on. It may be necessary to run the old mail queue a number of times before all of the messages can be delivered.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>When the queue is finally emptied, the directory can be removed with this command:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>rmdir /var/spool/omqueue</USERINPUT>&space;
</EXAMPLE>
</LIST>
</ORDEREDLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="95857">Redirecting Mail With the .forward File</TITLE><PARAGRAPH>As an alternative to the alias database, users can put a file with the name<INDEXTARGET ID="09.sendmail61"><!-- POSTPROCESSDATA: 09.sendmail61|<ITALICS>.forward</ITALICS> mail file --><FILENAME>&space;.forward</FILENAME>&space;in their home directories. If the <FILENAME>.forward</FILENAME> file exists, in a user's home directory <COMMAND>sendmail</COMMAND>&space;redirects mail for that user to the list of recipients in the file. The recipients are separated by commas or new lines. For example, if the home directory for user jane has a <FILENAME>.forward</FILENAME>&space;file with the following contents, any mail arriving for jane is redirected to the specified accounts:</PARAGRAPH>
<CODE>
zippy@state.edu
bongo@widgets.com
</CODE>
<PARAGRAPH>The <FILENAME>.forward</FILENAME>&space;file also allows the user to redirect mail to files or programs. A <FILENAME>.forward</FILENAME>&space;file with the following contents redirects any incoming messages to&space;jd@company.com, appends a copy of the message to the file&space;<FILENAME>/var/tmp/mail.log</FILENAME>, and pipes a copy of the message to stdin&space;of the<ITALICS>&space;/usr/bin/mymailer </ITALICS>program:</PARAGRAPH>
<CODE>
jd@company.com
/var/tmp/mail.log 
| /usr/bin/mymailer
</CODE>
<PARAGRAPH>In general, file-type recipients must be writable by everyone. However, if <COMMAND>sendmail</COMMAND>&space;is running as root and the file has <VARIABLE>setuid</VARIABLE> or<VARIABLE>&space;setgid</VARIABLE> bits set, then the message will be written to the file.</PARAGRAPH>
<PARAGRAPH>Users can redirect mail to themselves in addition to sending it to other recipients. This feature is particularly useful if the users want to continue to receive mail in their own mailboxes while passing copies of each incoming message to some alternative destination. For example, say that the home directory for user john contains a <FILENAME>.forward</FILENAME>&space;file with the following contents:</PARAGRAPH>
<EXAMPLE>
\john, |/usr/sbin/vacation 
</EXAMPLE>
<PARAGRAPH><COMMAND>sendmail</COMMAND>&space;behaves as follows:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>It sends each incoming message to john's regular mailbox; the backslash (\) preceding the name indicates that no further aliasing is to occur.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>It pipes a copy of each message to <ITALICS>stdin</ITALICS> of the <FILENAME>/usr/sbin/vacation</FILENAME>&space;program. (The vertical bar [|] is the standard UNIX pipe symbol.)</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>I<XREFTARGET ID="50008">dentifying Errors in sendmail.cf File</TITLE><PARAGRAPH>The <FILENAME>sendmail.cf</FILENAME>&space;file can be the source of unusual behavior on the part of sendmail. The following subsections show two common errors in <FILENAME>sendmail.cf</FILENAME>.</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="43027" TYPE="TITLE">&ldquo;Changes in sendmail.cf File Not Registered&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="13979" TYPE="TITLE">&ldquo;Macro Definitions in the sendmail.cf File&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="43027">Changes in sendmail.cf File Not Registered </TITLE><PARAGRAPH>If changes you have made in the <FILENAME>sendmail.cf</FILENAME>&space;file do not seem to register, remember to save your changes to the configuration file by giving the following commands:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/etc/init.d/mail stop</USERINPUT>&space;
<USERINPUT>/etc/init.d/mail start</USERINPUT>&space;
</EXAMPLE>
<PARAGRAPH>The stopping and starting of the daemon forces <COMMAND>sendmail</COMMAND> to reconfigure the file. Otherwise, <COMMAND>sendmail</COMMAND> runs using the old, &ldquo;frozen&rdquo; version of the configuration file, thus ignoring your changes. For more information on &ldquo;frozen&rdquo; configuration files, see <XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B, &ldquo;IRIX sendmail Reference.&rdquo;</XREF></PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="13979">Macro Definitions in the sendmail.cf File</TITLE><PARAGRAPH>Do&space;not include comments on macro or class definition lines in the <FILENAME>sendmail.cf</FILENAME>&space;file. For example, </PARAGRAPH>
<EXAMPLE>
DDfoo.com # my domain name
</EXAMPLE>
<PARAGRAPH>would define the <BOLD>D</BOLD> macro as</PARAGRAPH>
<EXAMPLE>
foo.com # my domain name 
</EXAMPLE>
<PARAGRAPH>Likewise, </PARAGRAPH>
<EXAMPLE>
CD foo.com bar.com # my local domains
</EXAMPLE>
<PARAGRAPH>would define the <BOLD>D </BOLD>class as containing <SCREENDISPLAY>foo.com</SCREENDISPLAY>, <SCREENDISPLAY>bar.com</SCREENDISPLAY>, <SCREENDISPLAY>#</SCREENDISPLAY>, <SCREENDISPLAY>my</SCREENDISPLAY>, <SCREENDISPLAY>local</SCREENDISPLAY>, and <SCREENDISPLAY>domains</SCREENDISPLAY>, each as a separate unit.</PARAGRAPH>
<PARAGRAPH>For further information on troubleshooting a <COMMAND>sendmail</COMMAND> installation, see <XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B, &ldquo;IRIX sendmail Reference.&rdquo;</XREF></PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="83321">About sendmail MX Records </TITLE><PARAGRAPH>MX records are resource records in the BIND database. Each record contains the name of a target station, a preference level, and the name of an exchanger station that handles mail for the target station. (The exchanger station may be the target station itself.)</PARAGRAPH>
<PARAGRAPH>The BIND database can contain several MX records for each target station; the record with the lowest preference level is tried first. <INDEXTARGET ID="09.sendmail62"><!-- POSTPROCESSDATA: 09.sendmail62|BIND database and MX records --></PARAGRAPH>
<PARAGRAPH>MX records provide a way to direct mail to alternative stations. Using MX records lets you eliminate static routes from your <COMMAND>sendmail</COMMAND> configuration file. </PARAGRAPH>
<PARAGRAPH>For each destination station contacted by means of an IPC-type mailer (P=[IPC] in the mailer definition line), <COMMAND>sendmail</COMMAND>&space;queries the DNS database for MX records associated with the destination station. If the MX query succeeds, mail will be routed through the appropriate exchanger station found among the returned MX records as described in RFC 974 and required by RFC 1123.&space;<INDEXTARGET ID="09.sendmail63"><!-- POSTPROCESSDATA: 09.sendmail63|MX records --></PARAGRAPH>
<PARAGRAPH>The result is that this version of <COMMAND>sendmail</COMMAND> and previous versions may use different methods to route mail to stations for which MX records are available. See <XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B, &ldquo;IRIX sendmail Reference,&rdquo;</XREF> for information regarding mailer definitions.</PARAGRAPH>
<PARAGRAPH>With the advent of MX records, you may want to edit your <FILENAME>sendmail.cf</FILENAME>&space;file to remove previously required static routes. For more details about setting up MX records, see <XREF IDREF="11243" TYPE="TITLE">Appendix&nbsp;B, &ldquo;IRIX sendmail Reference.&rdquo;</XREF></PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE>About sendmail Multi-Token Class Match</TITLE><PARAGRAPH>Some <FILENAME>sendmail.cf</FILENAME>&space;implementations inadvertently rely on the inability of <COMMAND>sendmail</COMMAND>&space;to do multi-token class-matching. One such implementation is the standard <FILENAME>sendmail.cf</FILENAME>&space;file distributed with IRIX Releases 3.2 and 3.3. If your <FILENAME>sendmail.cf</FILENAME>&space;file is based upon one of those standard <FILENAME>sendmail.cf</FILENAME>&space;files, you should read this section. If your <FILENAME>sendmail.cf</FILENAME>&space;file is not&space;based on one of those standard files, this section may serve as an example if you encounter odd behavior with class-matching while running the new <COMMAND>sendmail</COMMAND>.<INDEXTARGET ID="09.sendmail64"><!-- POSTPROCESSDATA: 09.sendmail64|<ITALICS>sendmail</ITALICS>: and multi-token class matching --></PARAGRAPH>
<PARAGRAPH>The standard IRIX Release 3.2 and 3.3 <FILENAME>sendmail.cf</FILENAME>&space;files define an S class that is scanned in from the&space;<FILENAME>/etc/hosts</FILENAME>&space;file. This class is used to detect single-token station names that appear in the local <FILENAME>/etc/hosts</FILENAME> file. With the advent of multi-token class-matching, the S class no longer operates as intended.</PARAGRAPH>
<PARAGRAPH>The problem is that station names appearing in the <FILENAME>/etc/hosts</FILENAME> file are scanned into the S class whether they are single- or multi-token station names (that is, whether or not they contain dots). The S class still worked as intended with previous versions of <COMMAND>sendmail</COMMAND>, because if an attempt was made to match a multi-token station name in the class, the match would always fail. With the new <COMMAND>sendmail</COMMAND>,&space;that same match will (incorrectly) succeed. This problem is observed when rules such as this one began matching qualified station names such as foo.bar.sgi.com:</PARAGRAPH>
<EXAMPLE>
# Assume that unqualified names are local.
R$*&lt;@$=S>$* $1&lt;@$2.$D>$3
</EXAMPLE>
<PARAGRAPH>The result was that stations such as foo.bar.sgi.com that appeared on the LHS of the rewrite rule shown here were being rewritten to foo.bar.sgi.com.bar.sgi.com, which is obviously wrong.</PARAGRAPH>
<PARAGRAPH>The problem was not the use of the <BOLD>S</BOLD> class, but rather the practice of scanning multi-token station names from the <FILENAME>/etc/hosts</FILENAME> file into the class in the first place.</PARAGRAPH>
<PARAGRAPH>An examination of the <FILENAME>sendmail.cf</FILENAME>&space;file shows that the <BOLD>S</BOLD> class is being scanned in by the following scan sets:</PARAGRAPH>
<CODE>
# Directly-connected SMTP hosts 
FS/etc/hosts %*[.0-99] %[-_.a-zzA-ZZ0-99]
FS/etc/hosts %*[.0-99] %*[-._a-zzA-ZZ0-99] %[-_.a-zzA-Z0-99]
</CODE>
<PARAGRAPH>These scan sets read in the two left-most station names from <FILENAME>/etc/hosts</FILENAME> regardless of whether they contain dots. To correct the situation, modify the scan sets to read in only the station names from <FILENAME>/etc/hosts</FILENAME> in their single-token, unqualified form, as follows:</PARAGRAPH>
<CODE>
# Directly-connected SMTP hosts
FS/etc/hosts %*[.0-99] %[-_a-zzA-ZZ0-99]
FS/etc/hosts %*[.0-99] %*[-._a-zzA-ZZ0-99] %[-_a-zzA-ZZ0-99]
</CODE>
<PARAGRAPH>Note the removal of the dots from the right-most patterns.</PARAGRAPH>
<PARAGRAPH>Depending on your use of class-matching, this incompatibility may not affect you. If you suspect there might be a problem, you should examine your use of classes and your class definitions. If you are currently using a <FILENAME>sendmail.cf</FILENAME>&space;file supplied by Silicon Graphics, you should examine the S class scan sets and make the corrections indicated here. If you use the default <FILENAME>sendmail.cf</FILENAME>&space;as supplied in this release, you should be free from any such problems. </PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE>About sendmail DNS Class Lookups</TITLE><PARAGRAPH>Previous versions of<FILENAME>&space;sendmail</FILENAME> supported the <CMDLINEOPT>${@</CMDLINEOPT> and<CMDLINEOPT>&space;$}</CMDLINEOPT> class operators to perform DNS lookups of MX records. Starting with IRIX 6.5, <FILENAME>sendmail</FILENAME> no longer supports this syntax. The <CMDLINEOPT>$(bestmx</CMDLINEOPT> and<CMDLINEOPT>&space;$)</CMDLINEOPT> operators perform similar functionality using a generic syntax. If you have a line in your <FILENAME>/etc/sendmail.cf</FILENAME> file that uses the old syntax, <COMMAND>sendmail</COMMAND> will not operate correctly. If there is a line in your <FILENAME>/etc/sendmail.cf</FILENAME> file that looks like </PARAGRAPH>
<EXAMPLE>
R$*&lt;@$+$~Y>$*	           ${@$2$3$:$Y$}^$1^$2^$3^$4
</EXAMPLE>
<PARAGRAPH>replace it with the following two lines:</PARAGRAPH>
<EXAMPLE>
R$*&lt;@$+$~Y>$*	           $(bestmx  $2$3$:$Y$}^$1^$2^$3^$4
R$*.^$*^$*^$*           $1^$2^$3^$4
</EXAMPLE>
<PARAGRAPH>Note that, as with all <COMMAND>sendmail</COMMAND> rules, tabs are used to separate the two sides of these lines.</PARAGRAPH>
</SECTION1>
</CHAPTER>
