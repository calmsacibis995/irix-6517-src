<!-- Produced by version 3.14 (11/22/96) of SGI Frame/SGML translator -->
<CHAPTER LBL="3"><TITLE><XREFTARGET ID="26818">Setting Up a Network</TITLE><PARAGRAPH>This chapter contains the following sections:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="89012" TYPE="TITLE">&ldquo;Configuring a System for a Network&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="73615" TYPE="TITLE">&ldquo;Setting Up a Router&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="17646" TYPE="TITLE">&ldquo;Subnetting a Network&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="82850" TYPE="TITLE">&ldquo;Modifying the Network Interface Configuration With the /etc/config/netif.options File&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="61915" TYPE="TITLE">&ldquo;Changing Network Parameters in the ifconfig-#.options File&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="45910" TYPE="TITLE">&ldquo;Configuring /etc/gateways Files for Networks That Do Not Support Broadcast or Multicast&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="32700" TYPE="TITLE">&ldquo;Configuring Multiple Network Interfaces&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="45919" TYPE="TITLE">&ldquo;Dynamic Host Configuration With Proclaim&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="25826" TYPE="TITLE">&ldquo;Creating a Local Network Script&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="94592" TYPE="TITLE">&ldquo;Turning On Remote Access Logging&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="47163" TYPE="TITLE">&ldquo;Setting Up Network-Wide Services&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="84639" TYPE="TITLE">&ldquo;Reserving Resources With RSVP&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="41663" TYPE="TITLE">&ldquo;Troubleshooting Your Ethernet Connection&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="89012">Configuring a System for a Network</TITLE><PARAGRAPH>The procedure in this section explains how to configure a workstation, with one interface, for an Ethernet network using its local <INDEXTARGET ID="03.setup1"><!-- POSTPROCESSDATA: 03.setup1|networking, preparing an IRIS system for --><FILENAME>/etc/hosts</FILENAME>&space;file (without BIND or NIS). Configuring the station takes six steps:<INDEXTARGET ID="03.setup2"><!-- POSTPROCESSDATA: 03.setup2|preparing for networking --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Bring the station down.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Attach the station to the network.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Check the station's network configuration.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Modify the <FILENAME>/etc/hosts</FILENAME> database.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Name the station.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Test the connection.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>Each of these steps is explained in the sections that follow:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="57880" TYPE="TITLE">&ldquo;Attaching Your Station to an Ethernet Network&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="36711" TYPE="TITLE">&ldquo;Checking Your Ethernet Connection&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="47190" TYPE="TITLE">&ldquo;Checking the Network Software Configuration&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="49333" TYPE="TITLE">&ldquo;About the Hosts Database&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="73846" TYPE="TITLE">&ldquo;Modifying the Hosts Database&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="20353" TYPE="TITLE">&ldquo;Naming Your Station&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="88255" TYPE="TITLE">&ldquo;Testing Your Network Connectivity&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="57880">Attaching Your Station to an Ethernet Network</TITLE><PARAGRAPH>Attach your station to the network by connecting one end of the Ethernet cable to the I/O port on the back of your station, and the other end into the network. <INDEXTARGET ID="03.setup3"><!-- POSTPROCESSDATA: 03.setup3|Ethernet connections to an IRIS system --><INDEXTARGET ID="03.setup4"><!-- POSTPROCESSDATA: 03.setup4|connecting to the Ethernet --></PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="36711">Checking Your Ethernet Connection</TITLE><PARAGRAPH>You can use the <COMMAND>ping </COMMAND>command to check your Ethernet connection. This command tests whether you can connect with another system on the Ethernet network. Perform the following steps:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Obtain the hostname of at least one reliable station on the local area network to which your system is connected. If possible, get the fully qualified hostname and the IP address. (For example, a hostname might be hancock, and the fully qualified hostname might be hancock.corp.gen.com, while the IP address might be 128.70.3.56.) It is important that the station you select has a reliable Ethernet connection and that it is up and running. </PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Once you have obtained a hostname and IP address, enter the command<INDEXTARGET ID="03.setup5"><!-- POSTPROCESSDATA: 03.setup5|<ITALICS>ping</ITALICS> command --></PARAGRAPH>
<CODE>
<USERINPUT>ping -r </USERINPUT><VARIABLE>hostname</VARIABLE>&space;
</CODE>
<PARAGRAPH>You should see a series of records indicating the returned packets from the remote host. For example (using our example system):</PARAGRAPH>
<EXAMPLE>
PING hancock (128.70.3.56): 56 data bytes
64 bytes from 128.70.3.56: icmp_seq=0 ttl=255 time=2 ms&lbreak;64 bytes from 128.70.3.56: icmp_seq=1 ttl=255 time=2 ms&lbreak;64 bytes from 128.70.3.56: icmp_seq=2 ttl=255 time=2 ms&lbreak;64 bytes from 128.70.3.56: icmp_seq=3 ttl=255 time=2 ms&lbreak;64 bytes from 128.70.3.56: icmp_seq=4 ttl=255 time=2 ms
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Press Ctrl+C or your Delete key to stop the <COMMAND>ping</COMMAND> command. You see the tallied results of the <COMMAND>ping</COMMAND> command. For example:</PARAGRAPH>
<EXAMPLE>
----hancock PING Statistics----
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max = 2/2/2 ms
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>If your network connection is working, you should see results comparable to those above. Your <COMMAND>ping</COMMAND> results should show 0% packet loss and an equal number of packets transmitted and received. If some packets are being lost, the first thing you should check is the tightness and quality of the cable connections. Loose cables are frequently the cause of lost packets. The round-trip time factors are a function of the size and general load of your network, and not necessarily an indication of a problem with your Ethernet connection. </PARAGRAPH>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>If your ping command is not successful, there are several things you should check. Perform these steps:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Try to ping the station by its IP address. For example, using our sample host <FILENAME>hancock</FILENAME>, enter the command</PARAGRAPH>
<CODE>
<USERINPUT>ping -r 128.70.3.56</USERINPUT>&space;
</CODE>
</LIST>
<LIST><PARAGRAPH>Try to use the <COMMAND>ping</COMMAND> command on a different station on your local network, or use the broadcast address shown when you enter the command <USERINPUT>ifconfig ec0</USERINPUT>. You should see your system and answering duplicate responses from other systems. </PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Check the network configuration on your system with the <COMMAND>netstat -in</COMMAND> command. You should see information similar to this:</PARAGRAPH>
<EXAMPLE>
Name Mtu  Network  Address    Ipkts Ierrs Opkts Oerrs
ec0  1500 128.70.3 128.70.3.9 18    0     18    0 
</EXAMPLE>
<PARAGRAPH>The <SCREENDISPLAY>ec0</SCREENDISPLAY> entry indicates your primary Ethernet connection. The <SCREENDISPLAY>Ipkts</SCREENDISPLAY> and <SCREENDISPLAY>Opkts</SCREENDISPLAY> fields indicate the number of inbound and outbound packets the network interface has processed. The <SCREENDISPLAY>Ierrs</SCREENDISPLAY> and <SCREENDISPLAY>Oerrs</SCREENDISPLAY> fields indicate the number of errors in input and output, respectively. </PARAGRAPH>
<PARAGRAPH>For the purposes of this troubleshooting session, though, check that the portion of the IP address shown under the <SCREENDISPLAY>Network</SCREENDISPLAY> heading match the IP address of the hostname that you attempted to <COMMAND>ping</COMMAND>. If the network addresses are not the same, the station is on a different network and the <COMMAND>ping</COMMAND> likely failed for that reason. Find a system on your immediate local network to which you can send the <COMMAND>ping</COMMAND> command. </PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Check the <FILENAME>/var/adm/SYSLOG</FILENAME> file for Ethernet error messages. Confirm that the designations for <SCREENDISPLAY>netmask</SCREENDISPLAY> and <SCREENDISPLAY>broadcast</SCREENDISPLAY>, as shown by <USERINPUT>ifconfig ec0 </USERINPUT>match those of other systems on the same network or subnet. <INDEXTARGET ID="03.setup6"><!-- POSTPROCESSDATA: 03.setup6|Ethernet error messages, finding --></PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Check to ensure that other stations are operating normally on the local network. </PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Check to ensure that the correct software (<FILENAME>eoe.sw.tcp</FILENAME>) package has been installed on your system.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Check the physical connections to the Ethernet cables for tightness and connection. If your Ethernet hardware is loose or disconnected, the <FILENAME>/var/adm/SYSLOG</FILENAME> file and your system console should both show messages such as</PARAGRAPH>
<EXAMPLE>
ec0: no carrier: check Ethernet cable
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>If all connections are tight and you still receive errors, replace the pieces of the Ethernet connection outside your system (the cable). </PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>If you receive a message indicating that another host has the same IP address, find out which host has the same address, and determine which host has set their address incorrectly. (It is more likely that the same address was accidentally assigned to a second system, or that the new system being tested incorrectly set the address.) </PARAGRAPH>
</LIST>
</ORDEREDLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="47190">Checking the Network Software Configuration</TITLE><PARAGRAPH>When the station comes up, verify the station's software configuration. Log into the station as root. <INDEXTARGET ID="03.setup7"><!-- POSTPROCESSDATA: 03.setup7|network software checkout --><INDEXTARGET ID="03.setup8"><!-- POSTPROCESSDATA: 03.setup8|<ITALICS>/etc/chkconfi</ITALICS> file --></PARAGRAPH>
<PARAGRAPH>Enter the <COMMAND>chkconfig</COMMAND> command to check that your station's standard networking software is correctly configured:<INDEXTARGET ID="03.setup9"><!-- POSTPROCESSDATA: 03.setup9|network daemons:checking status of --></PARAGRAPH>
<CODE>
<USERINPUT>/etc/chkconfig</USERINPUT>&space;
</CODE>
<PARAGRAPH>You see information similar to this:</PARAGRAPH>
<EXAMPLE>
named      off&lbreak;network    on&lbreak;rwhod      off&lbreak;timed      on&lbreak;timeslave  off&lbreak;gated      off&lbreak;mrouted    off&lbreak;rtnetd     off&lbreak;snmpd      on&lbreak;routed     on
</EXAMPLE>
<NOTE><PREFIX>Note</PREFIX>Your output will vary from the output above depending upon installed software and configuration flag settings. </NOTE>
<PARAGRAPH>If you are familiar with the network-related daemons, you can customize your configuration flags to suit your network needs. If you are not familiar with the network-related daemons, set your network-related flags as shown above. In particular, make sure that the <VARIABLE>network</VARIABLE> variable is configured <VARIABLE>on</VARIABLE>.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="49333">About the Hosts Database</TITLE><PARAGRAPH>The <INDEXTARGET ID="03.setup10"><!-- POSTPROCESSDATA: 03.setup10|hosts database: modifying --><FILENAME>hosts</FILENAME> file is the hostname database. It contains information regarding known stations, from the perspective of the local station. </PARAGRAPH>
<PARAGRAPH>The <FILENAME>/etc/hosts</FILENAME> database is an ASCII file that you can modify with any text editor. The file contains lines of text that specify a station's address, its &ldquo;official&rdquo; name, and any aliases. The &ldquo;official&rdquo; name should be the fully qualified domain name. The address and name(s) are separated by blanks, tabs, or both. Comments begin with a pound sign (#) and continue to the end of the line.</PARAGRAPH>
<PARAGRAPH>Before you modify the hosts database, you should have a list of station names and valid Internet addresses of all stations in your network, as discussed in <XREF IDREF="93616" TYPE="TITLE">&ldquo;IP Address Allocation&rdquo;</XREF>. If the network has routers (stations with multiple network interfaces), there must be a valid Internet address and name for each interface. See <XREF IDREF="69242" TYPE="TITLE">&ldquo;Internet Protocol Addresses&rdquo;</XREF> for a description of IP addresses.&space;<INDEXTARGET ID="03.setup11"><!-- POSTPROCESSDATA: 03.setup11|modifying the hosts database --></PARAGRAPH>
<PARAGRAPH>This example assumes that you are not using NIS or BIND. If you are using NIS, refer to the <DOCTITLE>NIS Administration Guide</DOCTITLE> for more information. If you are using BIND, refer to <XREF IDREF="74459" TYPE="TITLE">Chapter&nbsp;6, &ldquo;BIND Name Server,&rdquo;</XREF> for more information.</PARAGRAPH>
<PARAGRAPH>An <INDEXTARGET ID="03.setup12"><!-- POSTPROCESSDATA: 03.setup12|<ITALICS>/etc/hosts</ITALICS> file: host names in --><FILENAME>/etc/hosts</FILENAME>&space;database is shown in this sample <FILENAME>/etc/hosts</FILENAME> file:</PARAGRAPH>
<CODE>
# This is a comment 
127.0.0.1   localhost
119.0.3.20  tuna.salad.com tuna  # tuna is an alias
119.0.3.21  chicken.salad.com  salad
119.0.3.22  walrus.salad.com  walrus
</CODE>
<PARAGRAPH>Each system must have a copy of <FILENAME>/etc/hosts</FILENAME>&space;that contains entries for <KEYWORD>localhost</KEYWORD> and all of its network interfaces. As shipped, the<FILENAME>&space;/etc/hosts</FILENAME>&space;database contains two entries. The first entry is a name you can use to test the local network software:</PARAGRAPH>
<EXAMPLE>
127.0.0.1 localhost
</EXAMPLE>
<PARAGRAPH>When you reference <INDEXTARGET ID="03.setup13"><!-- POSTPROCESSDATA: 03.setup13|<ITALICS>localhost</ITALICS> entry in <ITALICS>/etc/hosts</ITALICS> file --><KEYWORD>localhost</KEYWORD>, the message is looped back internally; it is never transmitted across the network.<INDEXTARGET ID="03.setup14"><!-- POSTPROCESSDATA: 03.setup14|<ITALICS>localhost</ITALICS> entry in <ITALICS>/etc/hosts</ITALICS> file --></PARAGRAPH>
<CAUTION><PREFIX>Caution</PREFIX>Many important programs depend on the <KEYWORD>localhost</KEYWORD> entry&mdash;do NOT remove or modify it. If the master copy of <FILENAME>/etc/hosts</FILENAME>&space;is not maintained on that system or if you are using BIND or NIS, make sure that the host database contains the <KEYWORD>localhost</KEYWORD> entry.<INDEXTARGET ID="03.setup15"><!-- POSTPROCESSDATA: 03.setup15|NIS: and the <ITALICS>/etc/hosts</ITALICS> file --><INDEXTARGET ID="03.setup16"><!-- POSTPROCESSDATA: 03.setup16|BIND: and the <ITALICS>/etc/hosts</ITALICS> file --></CAUTION>
<NOTE><PREFIX>Note</PREFIX>The address<SCREENDISPLAY>&space;192.0.2.1 </SCREENDISPLAY>is a special address; networking will not be enabled if the system is given that address.</NOTE>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="73846">Modifying the Hosts Database</TITLE><PARAGRAPH>To enable the system to access the network, add an entry containing the newly assigned IP address and the name in<FILENAME>&space;/etc/sys_id</FILENAME>.&space;The entry must&space;contain the <FILENAME>sys_id</FILENAME> name, either as the official hostname or as an alias. <INDEXTARGET ID="03.setup17"><!-- POSTPROCESSDATA: 03.setup17|<ITALICS>/etc/sys_id</ITALICS> file --></PARAGRAPH>
<PARAGRAPH>Using the example <FILENAME>/etc/hosts</FILENAME>&space;file above, the <FILENAME>/etc/sys_id</FILENAME> file for the host walrus should contain either &ldquo;walrus&rdquo; or &ldquo;walrus.salad.com&rdquo;.</PARAGRAPH>
<PARAGRAPH>If you change the system's name in <FILENAME>/etc/sys_id</FILENAME>, make sure to update the entry in <FILENAME>/etc/hosts</FILENAME>; otherwise the network software will not initialize properly. If the following message appears during station startup, then the <FILENAME>/etc/hosts</FILENAME>&space;and&space;/<FILENAME>etc/sys_id</FILENAME>&space;files are inconsistent and must be fixed:</PARAGRAPH>
<EXAMPLE>
<SCREENDISPLAY>*** Can't find hostname's Internet address in /etc/hosts</SCREENDISPLAY>
</EXAMPLE>
<PARAGRAPH>If your system is a gateway, each network interface must be assigned an Internet address, each on a different network, and have an entry in <FILENAME>/etc/hosts</FILENAME>,&space;as described in <XREF IDREF="73615" TYPE="TITLE">&ldquo;Setting Up a Router&rdquo;</XREF>.</PARAGRAPH>
<PARAGRAPH>It is important that each station have a consistent version of the <FILENAME>host</FILENAME> database. The proper method for maintaining the consistency depends on the size of your network and whether the network is connected to the Internet. You can use the <COMMAND>rcp</COMMAND> or <COMMAND>rdist</COMMAND> programs by means of a cron job to ensure that the <FILENAME>hosts</FILENAME> files stay in sync.</PARAGRAPH>
<PARAGRAPH>Edit the <INDEXTARGET ID="03.setup18"><!-- POSTPROCESSDATA: 03.setup18|<ITALICS>/etc/hosts</ITALICS> file: editing --><FILENAME>/etc/hosts</FILENAME> file and add the hostnames and Internet addresses for all stations on your network. Each station on the network must have all station names in the local <FILENAME>/etc/hosts</FILENAME> file. If you have a large <FILENAME>/etc/hosts</FILENAME> file, the easiest way to install it on a new system is to set up a minimal hosts file with entries for the new system and for another system that has an authoritative copy of the hosts file. This allows you to get the new system on the net and copy the more complete hosts file from the other system (using <COMMAND>rcp</COMMAND> or <COMMAND>ftp</COMMAND>). Another option is to transfer the hosts file on tape or disk.&space;<INDEXTARGET ID="03.setup19"><!-- POSTPROCESSDATA: 03.setup19|editing the <ITALICS>/etc/hosts</ITALICS> file --></PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="20353">Naming Your Station</TITLE><PARAGRAPH>Once you have determined your station's name, edit the <INDEXTARGET ID="03.setup20"><!-- POSTPROCESSDATA: 03.setup20|naming stations --><FILENAME>/etc/sys_id</FILENAME> file to give your station its new identity. <INDEXTARGET ID="03.setup21"><!-- POSTPROCESSDATA: 03.setup21|station naming --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Remove the default station name (IRIS) and replace it with the new station name (setup1 for this example). You can use this command:</PARAGRAPH>
<CODE>
<USERINPUT>echo setup1 > /etc/sys_id</USERINPUT>&space;
</CODE>
</LIST>
<LIST><PARAGRAPH>For the change to take affect, reboot your station with this command: </PARAGRAPH>
<CODE>
<USERINPUT>reboot</USERINPUT>&space;
</CODE>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>When your station comes back up, it should have the new station name as the login prompt.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="88255">Testing Your Network Connectivity</TITLE><PARAGRAPH>Two network management tools, <INDEXTARGET ID="03.setup22"><!-- POSTPROCESSDATA: 03.setup22|testing connectivity --><INDEXTARGET ID="03.setup23"><!-- POSTPROCESSDATA: 03.setup23|network connections, testing --><COMMAND>rup</COMMAND>&space;and <COMMAND>ping</COMMAND>, provide quick information about network connectivity. <INDEXTARGET ID="03.setup24"><!-- POSTPROCESSDATA: 03.setup24|<ITALICS>rup</ITALICS> command --><COMMAND>rup</COMMAND> indicates if there is a physical problem with the network, such as your station being unable to contact the other stations. Since <COMMAND>rup</COMMAND> uses broadcasts as a default, it does not go through routers. If your station can see the other stations on the network, use ping to test communication abilities. <INDEXTARGET ID="03.setup25"><!-- POSTPROCESSDATA: 03.setup25|<ITALICS>ping</ITALICS> command --><COMMAND>ping</COMMAND> uses the Internet Control Message Protocol (ICMP), which requests an echo from the designated station. It lets you know if you can transmit and receive packets to and from specific stations.<INDEXTARGET ID="03.setup26"><!-- POSTPROCESSDATA: 03.setup26|Internet Control Message Protocol (ICMP) --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Enter the <COMMAND>rup</COMMAND> command to determine if your station can contact the other stations on the network:</PARAGRAPH>
<CODE>
<USERINPUT>/usr/bin/rup </USERINPUT>
</CODE>
<PARAGRAPH>You should get output on each of the stations on your network. The other stations on your network must be up for your station to get a user-friendly response. If the other stations are powered on and attached to the network but not up in user mode, the information comes back in hexadecimal.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Enter the <COMMAND>ping</COMMAND> command to see if your station can communicate with the other stations on the network:</PARAGRAPH>
<CODE>
<USERINPUT>/usr/etc/ping</USERINPUT>&space;<VARIABLE>station_name</VARIABLE>&space;
</CODE>
<PARAGRAPH>Let the output run a few seconds, then use Ctrl+C to break it. Pay particular attention to the ping statistics. <COMMAND>ping</COMMAND> gives you the number of packets transmitted, number of packets received, percentage packet loss, and round trip time (minimum, maximum, and average). These are all good indicators as to the general condition of your network. Obviously, you want 0% packet loss and a fast round-trip time.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="73615">Setting Up a Router</TITLE><PARAGRAPH>A router is a station with multiple network connections that forwards packets between networks. This section provides the configuration procedure for a router with two interfaces and a router with more than two interfaces. A station can have multiple interfaces and not act as a router. The procedure for turning forwarding off on a station with multiple interfaces is also provided in this section. The specific subsections are<INDEXTARGET ID="03.setup27"><!-- POSTPROCESSDATA: 03.setup27|router: configuring --><INDEXTARGET ID="03.setup28"><!-- POSTPROCESSDATA: 03.setup28|configuring: network routers --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="98860" TYPE="TITLE">&ldquo;Configuring a Router With Two Interfaces&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="27108" TYPE="TITLE">&ldquo;Configuring a Router With More Than Two Interfaces&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="55141" TYPE="TITLE">&ldquo;Configuring Routing Behavior&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="49887" TYPE="TITLE">&ldquo;Turning On Multicast Routing&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="73495" TYPE="TITLE">&ldquo;About Multicast Packets Forwarding&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="30233" TYPE="TITLE">&ldquo;Setting Up Tunnels to Support Multicast Packets&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="98860">Configuring a Router With Two Interfaces</TITLE><PARAGRAPH>The <INDEXTARGET ID="03.setup29"><!-- POSTPROCESSDATA: 03.setup29|<ITALICS>/etc/init.d/network</ITALICS> script --><FILENAME>/etc/init.d/network</FILENAME> script is designed to automatically detect and configure a router with two interfaces if the default naming scheme for the interfaces is used. By default, the Internet addresses of the primary and secondary interfaces are derived from the <FILENAME>/etc/sys_id</FILENAME> file. The primary interface uses the name in the <FILENAME>sys_id</FILENAME> file. The secondary interface prefixes gate- to the name specified in the <FILENAME>sys_id</FILENAME>&space;file.</PARAGRAPH>
<PARAGRAPH>To set up a router with two interfaces using the default naming scheme, follow this procedure:<INDEXTARGET ID="03.setup30"><!-- POSTPROCESSDATA: 03.setup30|router: dual interfaces on --><INDEXTARGET ID="03.setup31"><!-- POSTPROCESSDATA: 03.setup31|hosts database: router entries in --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Log in as <BOLD>root</BOLD>. </PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Assign valid Internet names and addresses to both interfaces in the <FILENAME>/etc/hosts</FILENAME> file. For example, the <FILENAME>/etc/hosts</FILENAME> file entries for the primary and secondary interfaces on the station biway might look like this:<INDEXTARGET ID="03.setup32"><!-- POSTPROCESSDATA: 03.setup32|<ITALICS>/etc/hosts</ITALICS> file: router entries --></PARAGRAPH>
<CODE>
<SCREENDISPLAY>198.70.75.2     biway.salad.com&nbsp;&nbsp;&nbsp;biway&lbreak;198.70.80.3     gate-biway.salad.com&nbsp;&nbsp;&nbsp;gate-biway</SCREENDISPLAY>
</CODE>
</LIST>
<LIST><PARAGRAPH>Ensure that the router has the appropriate name in its <FILENAME>/etc/sys_id</FILENAME> file. Following this example, the <FILENAME>/etc/sys_id</FILENAME> file should look like this:</PARAGRAPH>
<CODE>
<SCREENDISPLAY>biway</SCREENDISPLAY>
</CODE>
</LIST>
<LIST><PARAGRAPH>Reconfigure the kernel and reboot the station to initialize your changes and interfaces. Some systems prompt you for permission, as in the following example. Others simply return a shell prompt. In either case, enter the <COMMAND>reboot</COMMAND> command when the kernel has been reconfigured:</PARAGRAPH>
<CODE>
<USERINPUT>/etc/autoconfig</USERINPUT>&space;
</CODE>
<EXAMPLE>
<SCREENDISPLAY>Automatically reconfigure the operating system? (y/n)</SCREENDISPLAY><USERINPUT>y</USERINPUT><SCREENDISPLAY>&space;</SCREENDISPLAY>
</EXAMPLE>
<CODE>
<USERINPUT>reboot</USERINPUT>&space;
</CODE>
</LIST>
</ORDEREDLIST>
<NOTE><PREFIX>Note</PREFIX>If you do not want to use the standard router naming scheme, you must modify the <FILENAME>/etc/config/netif.options</FILENAME> file. <XREF IDREF="18006" TYPE="TITLE">&ldquo;Modifying the Network Interface Configuration With the /etc/config/netif.options File&rdquo;</XREF> details the procedure for changing an interface name.</NOTE>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="27108">Configuring a Router With More Than Two Interfaces</TITLE><PARAGRAPH>If the router contains more than two interfaces, you must modify the <INDEXTARGET ID="03.setup33"><!-- POSTPROCESSDATA: 03.setup33|router: multiple interfaces on --><FILENAME>/etc/config/netif.options</FILENAME> file in addition to the <FILENAME>/etc/hosts</FILENAME> and <FILENAME>/etc/sys_id</FILENAME> files. In the <FILENAME>netif.options</FILENAME> file, you must define the interface type (enp1, ipg0, and so on). By default, the names for the third and fourth interfaces are gate2-$HOSTNAME and gate3-$HOSTNAME, where $HOSTNAME is the value returned when you issue the hostname command. If you want to modify the interface names, see <XREF IDREF="18006" TYPE="TITLE">&ldquo;Modifying the Network Interface Configuration With the /etc/config/netif.options File&rdquo;</XREF> for the detailed procedure.</PARAGRAPH>
<PARAGRAPH>To set up a router with more than two interfaces and using the default naming scheme, follow this procedure:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Log in as <BOLD>root</BOLD>. </PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Assign valid Internet names and addresses to all interfaces in the <FILENAME>/etc/hosts</FILENAME> file. For example, the <FILENAME>/etc/hosts</FILENAME> file entries for the router freeway, with four interfaces, would look like this:</PARAGRAPH>
<CODE>
<SCREENDISPLAY>198.70.30.1     freeway&lbreak;198.70.32.4     gate-freeway&lbreak;198.70.41.5     gate2-freeway&lbreak;198.70.59.6     gate3-freeway</SCREENDISPLAY>
</CODE>
</LIST>
<LIST><PARAGRAPH>Ensure that the router has the appropriate name in its <FILENAME>/etc/sys_id</FILENAME> file. Following this example, the <FILENAME>/etc/sys_id</FILENAME> file should look like this:</PARAGRAPH>
<EXAMPLE>
<SCREENDISPLAY>freeway</SCREENDISPLAY>
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Modify the <FILENAME>netif.options</FILENAME> file to define your interface types. For this example, the third and fourth interfaces are FDDI (ipg*). Change the if3name and if4name variables from</PARAGRAPH>
<CODE>
<SCREENDISPLAY>if3name=&lbreak;if4name=</SCREENDISPLAY>
</CODE>
<PARAGRAPH>to</PARAGRAPH>
<CODE>
<SCREENDISPLAY>if3name=ipg0&lbreak;if4name=ipg1</SCREENDISPLAY>
</CODE>
</LIST>
<LIST><PARAGRAPH>Save your changes to the <FILENAME>netif.options</FILENAME> file.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Reconfigure the kernel and reboot the station to initialize your changes and interfaces. Some systems prompt you for permission, as in the following example. Others simply return a shell prompt. In either case, enter the <COMMAND>reboot</COMMAND> command when the kernel has been reconfigured:</PARAGRAPH>
<CODE>
<USERINPUT>/etc/autoconfig</USERINPUT>&space;
</CODE>
<EXAMPLE>
<SCREENDISPLAY>Automatically reconfigure the operating system? (y/n)y</SCREENDISPLAY>
</EXAMPLE>
<CODE>
<USERINPUT>reboot</USERINPUT>&space;
</CODE>
</LIST>
</ORDEREDLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="55141">Configuring Routing Behavior</TITLE><PARAGRAPH>By default, when a station has two or more network interfaces, it automatically forwards (routes) packets between the two interfaces. If you do not want the station to serve as a router on its network, disable its route advertising. <INDEXTARGET ID="03.setup34"><!-- POSTPROCESSDATA: 03.setup34|router: controlling forwarding on --><INDEXTARGET ID="03.setup35"><!-- POSTPROCESSDATA: 03.setup35|forwarding, controlling on routers --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Modify the <FILENAME>/etc/config/routed.options</FILENAME> file so the router will not supply routing information about general network routes (<USERINPUT>-q</USERINPUT>) or local interface routes (<USERINPUT>-h</USERINPUT>) </PARAGRAPH>
<CODE>
<USERINPUT>echo -qh > /etc/config/routed.options</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Using the <COMMAND>/etc/init.d/network </COMMAND>script, turn the network off momentarily, then start it again </PARAGRAPH>
<CODE>
<USERINPUT>/etc/init.d/network stop</USERINPUT>&space;
<USERINPUT>/etc/init.d/network start</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>When the network comes up, verify that it is not forwarding packets with the <COMMAND>netstat</COMMAND> tool</PARAGRAPH>
<CODE>
<USERINPUT>netstat -s -p ip |grep forward</USERINPUT>
</CODE>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>To change forwarding dynamics, create or edit the <FILENAME>/etc/config/routed.options</FILENAME> file to contain the desired options. Some of the behaviors that can be altered by means of the <FILENAME>/etc/config/routed.options</FILENAME> file are listed below:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>Suppress or force publicizing of routing information.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Enable tracing of all received packets.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Filter packets destined for specific networks.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>See the <REFPAGE>routed(1M)</REFPAGE> online reference page for more details.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="49887">Turning On Multicast Routing</TITLE><PARAGRAPH>Multicast routing is a delivery method in which a message is sent to a designated group of receivers by the shortest delivery path (see <INDEXTARGET ID="03.setup36"><!-- POSTPROCESSDATA: 03.setup36|multicast routing --><XREF IDREF="53012" TYPE="GRAPHIC">Figure&nbsp;3-1</XREF>). Silicon Graphics systems implement the Distance-Vector Multicast Routing Protocol (DVMRP, originally specified by RFC-1075) with the <COMMAND>mrouted</COMMAND> process.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>As of IRIX 6.3, multicast routing can be used in combination with Network Information Service (NIS) to reduce the number of NIS servers needed throughout the network. For details, see the information on multicast-YP in the <REFPAGE>portmap(1M)</REFPAGE> and <REFPAGE>nisserv(7P)</REFPAGE> reference pages. </NOTE>
<PARAGRAPH>To turn on multicast routing:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Identify the routers on each network that need to support multicasting. Make sure that the routers you select are running IRIX Version 5.2 or later.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>If you haven't already done so, install on each router the <FILENAME>eoe.sw.ipgate</FILENAME> subsystem from your IRIX distribution source. Run <ITALICS>autoconfig</ITALICS> if necessary.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>As <BOLD>root</BOLD>, enter the command</PARAGRAPH>
<CODE>
<USERINPUT>chkconfig mrouted on </USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Restart the system with the <COMMAND>reboot</COMMAND> command.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="73495">About Multicast Packets Forwarding</TITLE><PARAGRAPH><XREF IDREF="53012" TYPE="GRAPHIC">Figure&nbsp;3-1</XREF> shows an example network with three routers. </PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="network.w.multicast.routers.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="3-1"><PREFIX>Figure 3-1 </PREFIX><XREFTARGET ID="53012">Network With Multicast Routers</CAPTION>
</FIGURE>
</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>If people on networks A, C, and D are listening for packets, as shown in the figure, all four networks receive the multicast packets.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>If people on networks A and C are listening for packets, networks A, B, and C receive the multicast packets.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>If three or more people on network A are listening for packets, networks A and B receive the multicast packets. The multicast routing protocol prevents packets from being sent to &ldquo;leafs&rdquo; of the network, such as networks C and D; however, it doesn't prevent packets from being sent to interior networks, such as network B.</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="30233">Setting Up Tunnels to Support Multicast Packets</TITLE><PARAGRAPH>If your routers do not support multicast routing, you can support multicast packets by creating <INDEXTARGET ID="03.setup37"><!-- POSTPROCESSDATA: 03.setup37|tunnelsmulticast tunneling --><ITALICS>tunnels</ITALICS> between the networks. Any Silicon Graphics workstation running IRIX Version 5.2 or later can be configured as the endpoint of a tunnel. With tunneling, the multicast packets are encapsulated inside unicast packets, and then are sent to the other end of the tunnel. They are converted back into multicast packets when they are received. </PARAGRAPH>
<PARAGRAPH><XREF IDREF="96002" TYPE="GRAPHIC">Figure&nbsp;3-2</XREF> shows an example of a setup with a tunnel between networks A and C.</PARAGRAPH>
<PARAGRAPH><FIGURE><GRAPHIC FILE="network.tunnels.gif" POSITION="INLINE" SCALE="FALSE"><CAPTION LBL="3-2"><PREFIX>Figure 3-2 </PREFIX><XREFTARGET ID="96002">A Tunnel Between Networks A and C</CAPTION>
</FIGURE>
</PARAGRAPH>
<PARAGRAPH>To create the tunnel, edit the file <FILENAME>/etc/mrouted.conf</FILENAME>. Step-by-step instructions follow:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Select the systems on each network that you will use for the sending and receiving end of the tunnel. </PARAGRAPH>
<PARAGRAPH>Choose a system that is running IRIX Version 5.2 or later, is fast, and is not used extensively. The audio and video data may be intermittent if the system you select is slow or overloaded.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>If you haven't already done so, install the <FILENAME>eoe.sw.ipgate</FILENAME> subsystem from your IRIX distribution source.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>As <FILENAME>root</FILENAME>, edit the file <FILENAME>/etc/mrouted.conf</FILENAME> on the sending and receiving end of the tunnel. Note that these endpoints can be separated by many routers; you can use any machine on the network that is running IRIX Version 5.2 or later.</PARAGRAPH>
<PARAGRAPH>Add the following line for each network to which you want to establish a tunnel.</PARAGRAPH>
<CODE>
<USERINPUT>tunnel </USERINPUT><VARIABLE>&lt;local IP address> &lt;remote IP address></VARIABLE><USERINPUT>&space;</USERINPUT>
</CODE>
<PARAGRAPH>In the above example, the system on network D would have the following entry:</PARAGRAPH>
<CODE>
<USERINPUT>tunnel 128.70.58.1 128.65.170.2 </USERINPUT>
</CODE>
<PARAGRAPH>The system on network A would have the following entry:</PARAGRAPH>
<CODE>
<USERINPUT>tunnel 128.65.170.2 128.70.58.1 </USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>You can specify other optional settings for the tunnel. For details, see the <REFPAGE>mrouted(1M)</REFPAGE> reference page.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Restart the system.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<NOTE><PREFIX>Note</PREFIX>One copy of the multicast packets is sent for each tunnel entry in <FILENAME>mrouted.conf</FILENAME>. This results in extra network traffic. For example, suppose you have a workstation with one network interface and you set up tunnels to workstations on three other networks. The packets are replicated three times.</NOTE>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="36695">Updating /etc/rpc for NIS Users</TITLE><PARAGRAPH>The IRIX copy of the <INDEXTARGET ID="03.setup38"><!-- POSTPROCESSDATA: 03.setup38|multicast and NISNIS:and multicasting --><FILENAME>/etc/rpc</FILENAME> file contains additions that are essential for using certain multicast utilities if you're running the Network Information Service (NIS). If the NIS master is not running IRIX Version 5.2 or later, or is not a Silicon Graphics workstation, verify that the <FILENAME>/etc/rpc</FILENAME> file on the NIS master includes these additions:</PARAGRAPH>
<CODE>
sgi_iphone 391010
sgi_videod 391011
</CODE>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="17646">Subnetting a Network</TITLE><PARAGRAPH>Implementing the subnet address scheme is a very simple procedure. Subnetting consists of the following:<INDEXTARGET ID="03.setup39"><!-- POSTPROCESSDATA: 03.setup39|subnetworks: and network masks --><INDEXTARGET ID="03.setup40"><!-- POSTPROCESSDATA: 03.setup40|network address masks --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH><INDEXTARGET ID="03.setup41"><!-- POSTPROCESSDATA: 03.setup41|<ITALICS>netmask</ITALICS>: setting --><XREF IDREF="87729" TYPE="TITLE">&ldquo;Setting the Netmask&rdquo;</XREF></PARAGRAPH>
</LIST>
<LIST><PARAGRAPH><XREF IDREF="69709" TYPE="TITLE">&ldquo;Rebooting the Station&rdquo;</XREF></PARAGRAPH>
</LIST>
</ORDEREDLIST>
<NOTE><PREFIX>Note</PREFIX>If you have not done so already, read <XREF IDREF="37736" TYPE="TITLE">Chapter&nbsp;2, &ldquo;Planning a Network.&rdquo;</XREF> It contains information about partitioning Internet addresses for subnetting.</NOTE>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="87729">Setting the Netmask</TITLE><PARAGRAPH>The <INDEXTARGET ID="03.setup42"><!-- POSTPROCESSDATA: 03.setup42|setting:network masks network masks, setting --><KEYWORD>netmask</KEYWORD> option of the <COMMAND>ifconfig</COMMAND> command is used to interpret and define the network portion (subnets included) of the Internet address. A <INDEXTARGET ID="03.setup43"><!-- POSTPROCESSDATA: 03.setup43|<ITALICS>netmask</ITALICS> option --><ITALICS>network mask</ITALICS> defines the portion of the Internet address that is to be considered the network part. This mask normally contains the bits corresponding to the standard network part as well as the portion of the host part that has been assigned to subnetworks. If no network mask is specified when the address is set, it will be set according to the class of the network. </PARAGRAPH>
<PARAGRAPH>To configure a station's primary interface to recognize a subnetted Class B address that is using 8 bits of the host ID for defining the subnets, create or modify the <FILENAME>/etc/config/ifconfig-1.options</FILENAME> file and insert the following line:</PARAGRAPH>
<EXAMPLE>
netmask 0xffffff00
</EXAMPLE>
<PARAGRAPH>This netmask value indicates that for the primary interface, the upper 24 bits of the Internet address represent the network portion of the address, and the remaining 8 bits represent the host ID. The nonsubnetted netmask for a Class B address (in hexadecimal) would be 0xffff0000. The netmask value can be set using hexadecimal, dot-notation Internet address, or pseudo-network name formats. This entry must be made on all stations on the subnet.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>For stations with multiple interfaces, the network mask should be set for each interface in the appropriate <FILENAME>ifconfig-*.options</FILENAME> file.</NOTE>
<PARAGRAPH>Although variable subnet masks, that is, different masks on different interfaces, are supported as of IRIX 6.2, they are difficult to set up and maintain. It is therefore strongly recommended that you avoid using them unless there is no other way of accomplishing your site requirements. </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="69709">Rebooting the Station</TITLE><PARAGRAPH>When the <INDEXTARGET ID="03.setup44"><!-- POSTPROCESSDATA: 03.setup44|rebooting networked stations --><KEYWORD>netmask</KEYWORD> value is set, the station must be reconfigured and rebooted to incorporate the new network address into the stations routing tables. Always reboot routers before regular stations, because they provide routing information to other stations and networks.</PARAGRAPH>
<PARAGRAPH>Reconfigure the kernel and reboot the station to initialize your changes and interfaces. Some systems prompt for permission before reconfiguring the kernel, while others simply return a shell prompt. In either case, enter the <COMMAND>reboot</COMMAND> command explicitly:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>/etc/autoconfig</USERINPUT>&space;
<SCREENDISPLAY>Automatically reconfigure the operating system? (y/n)</SCREENDISPLAY><USERINPUT>y</USERINPUT>&space;
<USERINPUT>reboot</USERINPUT>&space;
</EXAMPLE>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="82850"><XREFTARGET ID="18006">Modifying the Network Interface Configuration With the /etc/config/netif.options File</TITLE><PARAGRAPH>You do not always need to modify (configure) a station's network interface; in most situations, the default configuration suits the site's needs. Modifying the network interface configuration requires that you modify the <FILENAME>/etc/config/netif.options</FILENAME> file. You modify this file if</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>the station has more than two interfaces</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>you don't like or use the default naming conventions</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>the default order is incorrect, or you prefer a different order.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>You can identify the station's installed network interfaces using the<COMMAND>&space;hinv</COMMAND> command with the network option, as described on <XREF IDREF="49164" TYPE="TITLE">&ldquo;Controller Interface Names&rdquo;</XREF>. See also the <REFPAGE>hinv(1M)</REFPAGE> reference page. For a summary of configuring multiple network interfaces see <XREF IDREF="32700" TYPE="TITLE">&ldquo;Configuring Multiple Network Interfaces&rdquo;</XREF>.</PARAGRAPH>
<PARAGRAPH>There are two configurable variables in the <INDEXTARGET ID="03.setup45"><!-- POSTPROCESSDATA: 03.setup45|<ITALICS>netif.options</ITALICS> filenetwork interfaces:variables --><INDEXTARGET ID="03.setup46"><!-- POSTPROCESSDATA: 03.setup46|<ITALICS>/etc/config/netif.options</ITALICS> file --><FILENAME>netif.options</FILENAME> file:<VARIABLE>&space;interface name</VARIABLE> and<VARIABLE>&space;interface address</VARIABLE>. The interface name variable designates the order (first, second, third, or fourth) and type of interface involved. The interface address variable assigns a valid Internet address to each interface. There must be a valid Internet address for each interface in the <FILENAME>/etc/hosts</FILENAME> file.</PARAGRAPH>
<PARAGRAPH>These subsections tell you about the following tasks</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="72510" TYPE="TITLE">&ldquo;Modifying the Interface Name in the /etc/config/netif.options File&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="88642" TYPE="TITLE">&ldquo;Modifying the Interface Address in the /etc/config/netif.options File&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH><XREF IDREF="14515" TYPE="TABLE">Table&nbsp;3-1</XREF> summarizes the interface name and interface address variables.</PARAGRAPH>
<TABLE COLUMNS="3"><CAPTION LBL="3-1"><PREFIX>Table 3-1 </PREFIX><XREFTARGET ID="14515">&nbsp;Variables for the netif.options File</CAPTION>
<TABLEHEADING><CELL LEFT="0" WIDTH="86"><PARAGRAPH>Variable Name</PARAGRAPH>
</CELL>
<CELL LEFT="95" WIDTH="122"><PARAGRAPH>Variable</PARAGRAPH>
</CELL>
<CELL LEFT="225" WIDTH="144"><PARAGRAPH>Examples</PARAGRAPH>
</CELL>
</TABLEHEADING>
<TABLEBODY><ROW><CELL LEFT="0" WIDTH="86"><PARAGRAPH>Interface Name</PARAGRAPH>
</CELL>
<CELL LEFT="95" WIDTH="122"><PARAGRAPH>ifxname=</PARAGRAPH>
<PARAGRAPH>where:</PARAGRAPH>
<PARAGRAPH>x = 1, 2, 3, or 4</PARAGRAPH>
<PARAGRAPH>name=ec0, et0, enp0, enp1, 
fxp1, ipg0, ipg1, etc.</PARAGRAPH>
</CELL>
<CELL LEFT="225" WIDTH="144"><PARAGRAPH>if1name=enp0</PARAGRAPH>
<PARAGRAPH>if2name=ipg0</PARAGRAPH>
<PARAGRAPH>if3name=enp1</PARAGRAPH>
<PARAGRAPH>if4name=enp2</PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="86"><PARAGRAPH>Interface Address</PARAGRAPH>
</CELL>
<CELL LEFT="95" WIDTH="122"><PARAGRAPH>ifxaddress=</PARAGRAPH>
<PARAGRAPH>where:</PARAGRAPH>
<PARAGRAPH>x = 1, 2, 3, or 4</PARAGRAPH>
<PARAGRAPH>address=$HOSTNAME, 
station name, or Internet   
address</PARAGRAPH>
</CELL>
<CELL LEFT="225" WIDTH="144"><PARAGRAPH>if1address=$HOSTNAME</PARAGRAPH>
<PARAGRAPH>if2address=fddi-$HOSTNAME</PARAGRAPH>
<PARAGRAPH>if3address=gate-goofy</PARAGRAPH>
<PARAGRAPH>if4address=128.70.28.2</PARAGRAPH>
</CELL>
</ROW>
</TABLEBODY>
</TABLE>
<PARAGRAPH>You can modify either or both variables. Instructions for modifying both variables are provided below.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX><SCREENDISPLAY>$HOSTNAME</SCREENDISPLAY> will be set to the value in <FILENAME>/etc/sys_id</FILENAME>.</NOTE>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="72510">Modifying the Interface Name in the /etc/config/netif.options File</TITLE><PARAGRAPH>When a station has more than two network interfaces, you must modify the name entries in the <INDEXTARGET ID="03.setup47"><!-- POSTPROCESSDATA: 03.setup47|network interfaces: modifying names of --><FILENAME>/etc/config/netif.options</FILENAME> file to assign the interface order. Default order is assigned only to the first two interfaces. Additionally, if you want to change the order (first, second, and so on) or interface type assigned to a network interface, you must modify the <FILENAME>/etc/config/netif.options</FILENAME> file. This example makes the first FDDI interface secondary. <INDEXTARGET ID="03.setup48"><!-- POSTPROCESSDATA: 03.setup48|<ITALICS>netif.options</ITALICS> file --><INDEXTARGET ID="03.setup49"><!-- POSTPROCESSDATA: 03.setup49|<ITALICS>/etc/config/netif.options</ITALICS> file --></PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Using the <COMMAND>netstat</COMMAND> command, verify the network interface's name: </PARAGRAPH>
<EXAMPLE>
<USERINPUT>/usr/etc/netstat -ina</USERINPUT>
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Using<COMMAND>&space;vi</COMMAND> or any editor, open the <FILENAME>netif.options</FILENAME> file for editing:</PARAGRAPH>
<EXAMPLE>
<USERINPUT>vi /etc/config/netif.options</USERINPUT>
</EXAMPLE>
</LIST>
<LIST><PARAGRAPH>Locate and modify the appropriate interface name variable. For this example, search for the secondary interface name variable (if2name) and change it from the default configuration to a configuration that supports the first FDDI interface as secondary.</PARAGRAPH>
<PARAGRAPH>Change from this</PARAGRAPH>
<EXAMPLE>
<SCREENDISPLAY>: if2name = </SCREENDISPLAY>
</EXAMPLE>
<PARAGRAPH>to this</PARAGRAPH>
<PARAGRAPH><SCREENDISPLAY>if2name=ipg0</SCREENDISPLAY></PARAGRAPH>
<CAUTION><PREFIX>Caution</PREFIX>Note that all default variables (primary and secondary) start with a leading colon (:). You must remove it and enter the interface type to change the default interface name.</CAUTION>
</LIST>
<LIST><PARAGRAPH>Save and exit the file.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>If you have no other changes, autoconfigure and reboot the station. Otherwise, repeat this procedure for each interface name change.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>When you alter the order of one network interface, the other interfaces in the station remain in their default relative ordering. For example, on a three-interface station (a=first, b=second, and c=third), if you were to make the default second the first (b=first), the remaining interfaces would be configured a=second and c=third.</NOTE>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="88642">Modifying the Interface Address in the /etc/config/netif.options File</TITLE><PARAGRAPH>To change the default interface address, modify the <INDEXTARGET ID="03.setup50"><!-- POSTPROCESSDATA: 03.setup50|network interfaces: modifying addresses of --><FILENAME>/etc/config/netif.options</FILENAME> file. All interface names require valid Internet addresses as found in the <FILENAME>/etc/hosts</FILENAME> file. The $HOSTNAME variable pulls the station name from the <FILENAME>/etc/sys_id</FILENAME> file. This example changes the second, third, and fourth interface addresses as follows:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>second interface address: fddi-$HOSTNAME</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>third interface address: gate-goofy</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>fourth interface address: 128.70.28.26</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>Follow these instructions to modify your network interface address according to the above example:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Verify or assign a valid entry for each interface in the <FILENAME>/etc/hosts</FILENAME> file. Write down the name and address for each interface.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Using <COMMAND>vi</COMMAND> or any editor, open the <FILENAME>netif.options</FILENAME> file for editing:</PARAGRAPH>
<CODE>
<USERINPUT>vi /etc/config/netif.options</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Locate and modify the appropriate interface address variable. For this example, we want to modify the second, third, and fourth interface address variables. Find and modify each variable as follows.</PARAGRAPH>
<PARAGRAPH>Change from this</PARAGRAPH>
<EXAMPLE>
<SCREENDISPLAY>: if2addr=gate-$HOSTNAME&lbreak;if3addr=gate2-$HOSTNAME&lbreak;if4addr=gate3-$HOSTNAME</SCREENDISPLAY>
</EXAMPLE>
<PARAGRAPH>to this</PARAGRAPH>
<EXAMPLE>
<SCREENDISPLAY>if2addr=fddi-$HOSTNAME&lbreak;if3addr=gate-goofy&lbreak;if4addr=128.70.28.26</SCREENDISPLAY>
</EXAMPLE>
<CAUTION><PREFIX>Caution</PREFIX>Note that all default variables (primary and secondary) start with a leading colon (:). You must remove it and enter the interface address to change the default interface address.</CAUTION>
</LIST>
<LIST><PARAGRAPH>Save and exit the file.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>Repeat this procedure for each interface address change. If you have no other changes, reconfigure and reboot the station.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="29695">Assigning IP Aliases</TITLE><PARAGRAPH>You can assign multiple IP addresses to a single network interface using the IP aliasing feature of the <INDEXTARGET ID="03.setup51"><!-- POSTPROCESSDATA: 03.setup51|IP aliasing --><COMMAND>ifconfig</COMMAND> command (see <REFPAGE>ifconfig(1M)</REFPAGE>). This feature is useful if you find it necessary to use the same network interface for connections to several networks; it is also useful for maintaining an obsolete address for a host until users learn its new address. IP aliasing is supported on all network interface types. </PARAGRAPH>
<PARAGRAPH>The following subsections will help you understand and implement IP aliasing:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="84779" TYPE="TITLE">&ldquo;Manually Implementing IP Aliasing&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="59928" TYPE="TITLE">&ldquo;Guidelines for Assigning IP Aliases&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="10426" TYPE="TITLE">&ldquo;Creating an IP Aliases File&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="88049" TYPE="TITLE">&ldquo;IP Aliasing and Routing&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="84779">Manually Implementing IP Aliasing</TITLE><PARAGRAPH>When IP aliasing is implemented on a host, the address that the <FILENAME>/etc/host</FILENAME> file assigns to the hostname in <FILENAME>/etc/sys_id</FILENAME> is considered the <INDEXTARGET ID="03.setup52"><!-- POSTPROCESSDATA: 03.setup52|primary IP address --><ITALICS>primary address</ITALICS> for the interface, and alternative names assigned by the <COMMAND>ifconfig</COMMAND> command are considered <FILENAME>IP aliases</FILENAME>. When you display network information (see <XREF IDREF="62496" TYPE="TITLE">&ldquo;Collecting Network Statistics With netstat&rdquo; in Chapter&nbsp;4</XREF>), the primary address of an interface is listed first, followed by its aliases.</PARAGRAPH>
<PARAGRAPH>To assign an IP alias, use this form of the <COMMAND>ifconfig</COMMAND> command: <INDEXTARGET ID="03.setup53"><!-- POSTPROCESSDATA: 03.setup53|<ITALICS>ifconfig</ITALICS> command --></PARAGRAPH>
<CODE>
# <USERINPUT>ifconfig</USERINPUT>&space;<VARIABLE>interface</VARIABLE>&space;<USERINPUT>alias</USERINPUT>&space;<VARIABLE>address</VARIABLE> [<USERINPUT>netmask</USERINPUT>&space;<VARIABLE>mask_num</VARIABLE>] [<USERINPUT>broadcast</USERINPUT>&space;<VARIABLE>address</VARIABLE>]
</CODE>
<NOTE><PREFIX>Note</PREFIX>Be sure to read the information in <XREF IDREF="59928" TYPE="TITLE">&ldquo;Guidelines for Assigning IP Aliases&rdquo;</XREF> (below) before assigning IP aliases.</NOTE>
<PARAGRAPH>You can specify a hostname from <FILENAME>/etc/hosts</FILENAME> instead of an IP address as the value of <VARIABLE>alias</VARIABLE>. For example, either command below assigns an IP alias to the ec0 interface. The interface in this example uses a netmask and broadcast address, but these fields are optional:</PARAGRAPH>
<CODE>
# ifconfig ec0 alias 128.70.40.93 netmask 0xffffff00 broadcast 128.70.40.255 
# ifconfig ec0 alias plum netmask 0xffffff00 broadcast 128.70.40.255 
</CODE>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="59928">Guidelines for Assigning IP Aliases</TITLE><PARAGRAPH>In theory, the number of IP aliases assigned to a given network interface is limitless; however, the recommended maximum number is 1000. In addition, the primary address of an interface and all its IP aliases should share a common subnet address. For example, if the primary address of an interface on a class B network is 128.70.12.23, its IP aliases should be addresses such as 128.70.12.19, 128.70.12.53, and so on.</PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="10426">Creating an IP Aliases File</TITLE><PARAGRAPH>You can save IP alias settings in the <FILENAME>/etc/config/ipaliases.options<INDEXTARGET ID="03.setup54"><!-- POSTPROCESSDATA: 03.setup54|<ITALICS>IPaliases.options</ITALICS> file --></FILENAME> file so they are automatically assigned during the network initialization process. The <FILENAME>ipaliases.options</FILENAME> file is read by the network script if the <FILENAME>/etc/config/ipaliases<INDEXTARGET ID="03.setup55"><!-- POSTPROCESSDATA: 03.setup55|<ITALICS>/etc/config/ipaliases</ITALICS> file --></FILENAME> file contains the value <SCREENDISPLAY>on</SCREENDISPLAY>. Use the procedure below to create an <FILENAME>ipaliases.options</FILENAME> file and assign IP aliases automatically during network initialization:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Edit <FILENAME>ipaliases.option</FILENAME>s using your favorite editor: </PARAGRAPH>
<EXAMPLE>
# <USERINPUT>vi</USERINPUT>&space;<USERINPUT>/etc/config/ipaliases.options</USERINPUT>
</EXAMPLE>
<PARAGRAPH>Your entries should look similar to the example below. In this example, broadcasting is performed on the Ethernet but not the FDDI network:</PARAGRAPH>
<CODE>
ec0  128.64.56.51 netmask 0xffffff00 broadcast 128.64.56.255
ec0  128.64.56.12 netmask 0xffffff00 broadcast 128.64.56.255
ipg0 190.111.79.16 netmask 0xffffff00
ipg0 190.111.79.10 netmask 0xffffff00
</CODE>
</LIST>
<LIST><PARAGRAPH>Create an <FILENAME>ipaliases</FILENAME> file and set IP aliasing on in the <USERINPUT><INDEXTARGET ID="03.setup56"><!-- POSTPROCESSDATA: 03.setup56|<ITALICS>chkconfig</ITALICS> command --></USERINPUT>file:</PARAGRAPH>
<CODE>
# <USERINPUT>chkconfig</USERINPUT>&space;<USERINPUT>-f</USERINPUT>&space;<USERINPUT>ipaliases</USERINPUT>&space;<USERINPUT>on</USERINPUT>&space;
</CODE>
</LIST>
<LIST><PARAGRAPH>Stop and restart the network to put your changes into effect:</PARAGRAPH>
<CODE>
<USERINPUT>/etc/init.d/network stop</USERINPUT>&space;
<USERINPUT>/etc/init.d/network start</USERINPUT>
</CODE>
</LIST>
</ORDEREDLIST>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="88049">IP Aliasing and Routing </TITLE><PARAGRAPH>Each IP alias is maintained in the IRIX routing table as a host route between the primary address and the alias. By default, IRIX assumes that a host containing multiple network interfaces is a router. These <ITALICS>multi-homed hosts<INDEXTARGET ID="03.setup57"><!-- POSTPROCESSDATA: 03.setup57|multi-homed hosts --></ITALICS> perform packet forwarding and advertise routing information on the networks to which they are attached. However, if you implement IP aliasing on a host with a single network interface (to connect a local network and the Internet, for example), route advertising is not enabled. In this case, it is necessary to force route advertising to make the network location of the local hosts known. <INDEXTARGET ID="03.setup58"><!-- POSTPROCESSDATA: 03.setup58|route advertising, forcing --></PARAGRAPH>
<PARAGRAPH>To force route advertising, enter the <SCREENDISPLAY>-s</SCREENDISPLAY> option in the <FILENAME>routed.options</FILENAME> file on the IP-aliased host.</PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="61915">Changing Network Parameters in the ifconfig-#.options File</TITLE><PARAGRAPH>Network parameters are those settings that determine how an interface processes or supplies certain network information. Modifying network parameters requires that you create and modify the appropriate <INDEXTARGET ID="03.setup59"><!-- POSTPROCESSDATA: 03.setup59|network parameters, changing --><FILENAME>/etc/config/ifconfig-#.options</FILENAME> file (where # can be 1, 2, 3, or 4, based on the interface name).<INDEXTARGET ID="03.setup60"><!-- POSTPROCESSDATA: 03.setup60|<ITALICS>ifconfig.options</ITALICS> file --><INDEXTARGET ID="03.setup61"><!-- POSTPROCESSDATA: 03.setup61|<ITALICS>/etc/config/ifconfig.options</ITALICS> file --></PARAGRAPH>
<PARAGRAPH>The default parameter settings are known to function well and suit most site needs. Changing the settings can cause a network to become dysfunctional. It is recommended that these parameters be changed only by experienced or trained network managers.</PARAGRAPH>
<PARAGRAPH>There are four nondefault network parameters that can be set in the <FILENAME>ifconfig-#.options</FILENAME> file:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>netmask</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>broadcast address</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Address Resolution Protocol (ARP)</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>route metric</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>These steps show how to set the nondefault network parameters:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Using the <COMMAND>netstat</COMMAND> command, determine the order assigned to the network interface at configuration time:</PARAGRAPH>
<CODE>
<USERINPUT>/usr/etc/netstat -i</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Using vi or any editor, open or create the file <FILENAME>/etc/config/ifconfig-#.options</FILENAME>, where the pound sign (#) represents the network interface's name. For example, to configure a primary interface, open or create the file <FILENAME>/etc/config/ifconfig-1.options</FILENAME>.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>To change the network mask value for a network interface, enter a line with the word <SCREENDISPLAY>netmask</SCREENDISPLAY> followed by a space and either the 32-bit hexadecimal value, Internet address dot-notation, or the pseudo-network name: </PARAGRAPH>
<CODE>
<USERINPUT>netmask 0xffffff00</USERINPUT>
</CODE>
<PARAGRAPH>&space;See <XREF IDREF="49887" TYPE="TITLE">&ldquo;Turning On Multicast Routing&rdquo;</XREF> for more details regarding netmasks.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>To change the broadcast address for a network interface, enter a line with the word <SCREENDISPLAY>broadcast</SCREENDISPLAY> followed by a space and the dotted decimal IP broadcast address: </PARAGRAPH>
<CODE>
<USERINPUT>broadcast 189.170.6.0</USERINPUT>
</CODE>
<PARAGRAPH>To enable or disable the Address Resolution Protocol (ARP), enter a line with <COMMAND>arp</COMMAND> (to enable) or <COMMAND>-arp</COMMAND> (to disable): </PARAGRAPH>
<CODE>
<USERINPUT>arp</USERINPUT>
</CODE>
<PARAGRAPH>The ARP tables are used by some of the network management tools (<COMMAND>netstat</COMMAND>, <COMMAND>ifconfig</COMMAND>, and so on) and provide the administrator with invaluable network information.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>To change the routing metric count for a network interface, enter a line with the word <SCREENDISPLAY>metric</SCREENDISPLAY> followed by a space and the count:</PARAGRAPH>
<CODE>
<USERINPUT>metric 7</USERINPUT>
</CODE>
<PARAGRAPH>The default metric count, also called hops, is 0. The routed daemon monitors the number of hops required to route data from one network to another. If you want to reduce network traffic on a particular route, increase the metric count on the appropriate router.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>The interface configuration file for the secondary interface might look like the following:</PARAGRAPH>
<CODE>
<USERINPUT>cat /etc/config/ifconfig-2.options</USERINPUT>&space;
<SCREENDISPLAY>netmask 255.255.255.0</SCREENDISPLAY>
<SCREENDISPLAY>broadcast 129.78.50.0</SCREENDISPLAY>
<SCREENDISPLAY>-arp</SCREENDISPLAY>
<SCREENDISPLAY>metric 4</SCREENDISPLAY>
</CODE>
<PARAGRAPH>The interface configuration file above indicates that the Class B network is subnetted using 8 bits of the host ID for the subnet. It uses 0 as the broadcast address instead of the default 1. ARP has been disabled and the metric (hop) count has been set to 4 to discourage router traffic.</PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="45910">Configuring /etc/gateways Files for Networks That Do Not Support Broadcast or Multicast</TITLE><NOTE><PREFIX>Note</PREFIX>A <ITALICS>gateway</ITALICS> is a host or router on which the <COMMAND>routed</COMMAND> daemon runs with the <CMDLINEOPT>-s</CMDLINEOPT> option to supply routing information. A <ITALICS>client</ITALICS>, on the other hand, does not supply routing information.  Therefore, it runs <COMMAND>routed</COMMAND> with the <CMDLINEOPT>-q</CMDLINEOPT> option. (See the routed(1M) reference page for more information.)</NOTE>
<PARAGRAPH>The <FILENAME>/etc/gateways</FILENAME> file is a list of distant gateways (that is, hosts and routers that supply routing information) that is used by networks that do not support broadcast or multicast, such as ATM or HIPPI.</PARAGRAPH>
<PARAGRAPH>This file tells a host either of two things:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>Which gateways have hosts on their subnets</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Which subnets/gateways are reachable through a directly-connected gateway</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>Hosts then use this file to determine where to send routing information protocol (RIP) requests and, if the hosts also supply routing information, where RIP responses should be sent.</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>/etc/gateways File Format</TITLE><PARAGRAPH>Entrie in the <FILENAME>/etc/gateways</FILENAME> file should include all gateways reachable on the ATM or HIPPI network in the following formats:</PARAGRAPH>
<PARAGRAPH>The <FILENAME>/etc/gateways</FILENAME> file includes a series of lines, each in one of the following two formats.</PARAGRAPH>
<PARAGRAPH>Format 1: </PARAGRAPH>
<EXAMPLE>
<SCREENDISPLAY>host</SCREENDISPLAY>&space;<VARIABLE>Nname [</VARIABLE><SCREENDISPLAY>mask</SCREENDISPLAY><VARIABLE>&space;value] </VARIABLE><SCREENDISPLAY>gateway</SCREENDISPLAY><VARIABLE>&space;Gname</VARIABLE>&space;<SCREENDISPLAY>metric </SCREENDISPLAY><VARIABLE>value</VARIABLE><SCREENDISPLAY>&space;[passive|active|external]</SCREENDISPLAY>&space;
</EXAMPLE>
<PARAGRAPH>Format 2: </PARAGRAPH>
<EXAMPLE>
<SCREENDISPLAY>host</SCREENDISPLAY>&space;<VARIABLE>Hname </VARIABLE><SCREENDISPLAY>gateway</SCREENDISPLAY><VARIABLE>&space;Gname</VARIABLE>&space;<SCREENDISPLAY>metric </SCREENDISPLAY><VARIABLE>value</VARIABLE><SCREENDISPLAY>&space;[passive|active|external]</SCREENDISPLAY>&space;
</EXAMPLE>
<PARAGRAPH>These are described as follows:</PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM><VARIABLE>Nname</VARIABLE> </HANGITEM>
<HANGBODY><PARAGRAPH></PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><VARIABLE>Hname</VARIABLE> </HANGITEM>
<HANGBODY><PARAGRAPH>The name of the destination network or host.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>mask</SCREENDISPLAY><VARIABLE>&space;value</VARIABLE> </HANGITEM>
<HANGBODY><PARAGRAPH>Optional. Value between 1 and 32 to indicate the netmask associated with <VARIABLE>Nname</VARIABLE>.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><VARIABLE>Gname</VARIABLE> </HANGITEM>
<HANGBODY><PARAGRAPH>The address of the gateway to which RIP sends requests and, should the host provide routing information, responses. </PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>metric</SCREENDISPLAY>&space;<VARIABLE>value</VARIABLE> </HANGITEM>
<HANGBODY><PARAGRAPH>The hop count to the destination host or network.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>passive</SCREENDISPLAY> </HANGITEM>
<HANGBODY><PARAGRAPH>The gateway is not expected to exchange RIP packets.  Routes through passive gateways are installed in the kernel's routing tables at startup and are not included in routing updates. </PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>active</SCREENDISPLAY> </HANGITEM>
<HANGBODY><PARAGRAPH>Indicates if the gateway is willing to exchange RIP packets. </PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>external</SCREENDISPLAY> </HANGITEM>
<HANGBODY><PARAGRAPH>Indicates that the gateway is passive, but placed in the kernel routing table.  Entries marked as external indicate that another routing process will install such a route, if necessary. </PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
<PARAGRAPH>Lines that do not start with <SCREENDISPLAY>net</SCREENDISPLAY> or <SCREENDISPLAY>host</SCREENDISPLAY> must consist of one or more of the following parameter settings, separated by commas or blanks:</PARAGRAPH>
<HANGLIST><HANGPAIR><HANGITEM><SCREENDISPLAY>if=ifname</SCREENDISPLAY> </HANGITEM>
<HANGBODY><PARAGRAPH>This parameter ndicates that the other parameters on the line apply to the interface name <SCREENDISPLAY>ifname</SCREENDISPLAY>.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>subnet</SCREENDISPLAY>=<VARIABLE>nname</VARIABLE> [<SCREENDISPLAY>/mask</SCREENDISPLAY><VARIABLE>&space;value</VARIABLE>][<SCREENDISPLAY>,metric</SCREENDISPLAY>]</HANGITEM>
<HANGBODY><PARAGRAPH>&lbreak;This parameter advertises a route to the network <VARIABLE>nname</VARIABLE> with the <SCREENDISPLAY>mask</SCREENDISPLAY><VARIABLE>&space;value</VARIABLE> and the supplied <SCREENDISPLAY>metric</SCREENDISPLAY>&space;<VARIABLE>value</VARIABLE> (default is 1).</PARAGRAPH>
<PARAGRAPH>The network number must specify a full, 32-bit value, as in <SCREENDISPLAY>192.0.2.0</SCREENDISPLAY> instead of <SCREENDISPLAY>192.0.2</SCREENDISPLAY>. It you choose to add an alias to the loopback interface, the alias must be reachable.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>passive</SCREENDISPLAY> </HANGITEM>
<HANGBODY><PARAGRAPH>This parameter marks the interface to not be advertised in updates sent via other interfaces, and turns off all RIP and router discovery through the interface. This is very useful for failsafe interfaces or for interfaces for which you do not want RIP traffic to route through.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>no_ripv1_in</SCREENDISPLAY> </HANGITEM>
<HANGBODY><PARAGRAPH>This parameter causes RIPv1-received responses to be ignored.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>ripv2_out</SCREENDISPLAY> </HANGITEM>
<HANGBODY><PARAGRAPH>This parameter generates RIPv2 output, and causes RIPv2 advertisements to be multicast, when possible.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>ripv2</SCREENDISPLAY> </HANGITEM>
<HANGBODY><PARAGRAPH>This parameter is equivalent to <SCREENDISPLAY>no_ripv1_in</SCREENDISPLAY> and <SCREENDISPLAY>ripv2_out</SCREENDISPLAY>.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
<HANGPAIR><HANGITEM><SCREENDISPLAY>rdisc_interval=</SCREENDISPLAY><VARIABLE>N</VARIABLE></HANGITEM>
<HANGBODY><PARAGRAPH>&lbreak;This parameter sets the nominal interval with which router discovery advertisements are transmitted to <VARIABLE>N</VARIABLE> seconds and their lifetime to 3*<VARIABLE>N</VARIABLE>. This should be set to 45.</PARAGRAPH>
</HANGBODY>
</HANGPAIR>
</HANGLIST>
<PARAGRAPH>Also, rather than running <COMMAND>routed</COMMAND> with the <CMDLINEOPT>-P parm</CMDLINEOPT> options, you can instead add the parameter line <VARIABLE>parm</VARIABLE> to the <FILENAME>/etc/gateways</FILENAME> file.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Examples of /etc/gateways Files</TITLE><PARAGRAPH>The <FILENAME>/etc/gateways</FILENAME> file in <XREF IDREF="98793" TYPE="TEXT">Example&nbsp;3-1</XREF> belongs to a host that has two HIPPI interfaces, one on the <SCREENDISPLAY>192.168.0.0/27</SCREENDISPLAY> subnet and the other on subnet <SCREENDISPLAY>192.168.0.96/27</SCREENDISPLAY>. This host functions as a client. It sends RIP requests to one gateway on the <SCREENDISPLAY>192.168.0.0/27</SCREENDISPLAY> subnet, and to two gateways on the <SCREENDISPLAY>192.168.0.96/27</SCREENDISPLAY> subnet. It should neither generate nor process RIP packets on its <SCREENDISPLAY>et0</SCREENDISPLAY> interface.</PARAGRAPH>
<CODE><CAPTION LBL="3-1"><PREFIX>Example 3-1 </PREFIX><XREFTARGET ID="98793">/etc/gateways File for Host With Two HIPPI Interfaces</CAPTION>#if brodcast is not supported
#-- 192.168.0.0/27 subnet
host 192.168.0.1 gateway 192.168.0.1 metric 1 active i
#-- 192.168.0.96/27 subnet 
host 192.168.0.97 gateway 192.168.0.97 metric 1 active 
host 192.168.0.99 gateway 192.168.0.99 metric 1 active
&nbsp;
ripv2_out 
rdisc_interval=45 
if=et0 passive 
if=et1 passive 
</CODE>
<PARAGRAPH>The <FILENAME>/etc/gateways</FILENAME> file in <XREF IDREF="63327" TYPE="TEXT">Example&nbsp;3-2</XREF> belongs to a host that functions as a gateway.  It has two HIPPI interfaces, one on subnet <SCREENDISPLAY>192.168.0.96/27</SCREENDISPLAY> and one on subnet <SCREENDISPLAY>192.168.0.128/27</SCREENDISPLAY>. There is one other gateway with which this host should exchange routing updates on the <SCREENDISPLAY>192.168.0.96/27</SCREENDISPLAY> subnet, and one on the <SCREENDISPLAY>192.168.0.128/27</SCREENDISPLAY> subnet.</PARAGRAPH>
<PARAGRAPH>This host solely and permanently owns an IP address in the <SCREENDISPLAY>192.168.0.202</SCREENDISPLAY> subnet; this IP address is actually an alias that we want advertised as long as there is at least one active interface left, thus the <SCREENDISPLAY>subnet=192.168.0.202/31,1</SCREENDISPLAY> entry.  It should neither generate nor process RIP packets on its et0 interface.</PARAGRAPH>
<CODE><CAPTION LBL="3-2"><PREFIX>Example 3-2 </PREFIX><XREFTARGET ID="63327">/etc/gateways File for Host Functioning as a Gateway</CAPTION>#if brodcast is not supported 
#-- 192.168.0.96/27 subnet
host 192.168.0.97 gateway 192.168.0.97 metric 1 active 
host 192.168.0.99 gateway 192.168.0.99 metric 0 active 
#-- 192.168.0.128/27 subnet 
host 192.168.0.129 gateway 192.168.0.129 metric 1 active 
host 192.168.0.131 gateway 192.168.0.131 metric 0 active
&nbsp;
subnet=192.168.0.202/31,1
&nbsp;
ripv2_out 
rdisc_interval=45 
if=ef0 passive 
</CODE>
<PARAGRAPH>For further information, see the <REFPAGE>routed(1M)</REFPAGE> reference page.</PARAGRAPH>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="32700">Configuring Multiple Network Interfaces</TITLE><PARAGRAPH>Configuring a station with multiple network interfaces is much like configuring a router, except that forwarding is not enabled. With several network controllers (physical boards or chips), the system must configure a unique interface name for each. Multiple interfaces usually connect systems to more than one subnet and require an address for each connected interface. <INDEXTARGET ID="03.setup62"><!-- POSTPROCESSDATA: 03.setup62|multiple network interfaces, configuringnetwork interfaces: multiple --></PARAGRAPH>
<PARAGRAPH>The default network configuration file is <FILENAME>/etc/init.d/network</FILENAME>, which initializes and tests the network interface names and addresses. The site-specific network configuration files dealing with the daemons and their options are <FILENAME>/etc/config/netif.options</FILENAME> and <FILENAME>/etc/config/ifconfig-&lt;n>.options</FILENAME> (where &lt;n> is 1, 2, 3, and so on, based on the interface variable name). The file <FILENAME>/etc/config/netif.options</FILENAME> overrides the defaults specified in the file<FILENAME>/etc/init.d/network.</FILENAME></PARAGRAPH>
<PARAGRAPH>By default, the network configuration script only configures two network interfaces, regardless of how many network interfaces exist on a system. To increase the number of configured network interfaces you must follow these steps:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Identify all the unique network interfaces&mdash;<XREF IDREF="49164" TYPE="TITLE">&ldquo;Controller Interface Names&rdquo;</XREF>.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Modify the network interface configuration in the <FILENAME>/etc/config/netif.options</FILENAME> file&mdash;<XREF IDREF="82850" TYPE="TITLE">&ldquo;Modifying the Network Interface Configuration With the /etc/config/netif.options File&rdquo;</XREF>.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Assign and implement IP aliasing&mdash;<XREF IDREF="29695" TYPE="TITLE">&ldquo;Assigning IP Aliases&rdquo;</XREF>.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Change network parameters in the<FILENAME>&space;ifconfig-#.options</FILENAME> file&mdash;<XREF IDREF="61915" TYPE="TITLE">&ldquo;Changing Network Parameters in the ifconfig-#.options File&rdquo;</XREF>.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Reboot the system.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="45919">Dynamic Host Configuration With Proclaim</TITLE><PARAGRAPH>This section describes the IRIX <COMMAND>proclaim</COMMAND> facility, which is based on the dynamic host configuration protocol (DHCP) described in RFC 2131. Proclaim and DHCP allow you to allocate hostnames and network addresses automatically.<INDEXTARGET ID="03.setup63"><!-- POSTPROCESSDATA: 03.setup63|proclaim:description --></PARAGRAPH>
<PARAGRAPH>DHCP permits site administrators to set up one or more server systems that dynamically distribute network IP addresses and site configuration parameters to new or requesting client systems. In this way, a site with only a few available addresses can serve a large number of hosts that connect to the network only occasionally, or a large site can manage the permanent assignment of addresses with a minimum of administrative attention.<INDEXTARGET ID="03.setup64"><!-- POSTPROCESSDATA: 03.setup64|proclaim:network configuration DHCP:network configuration --></PARAGRAPH>
<PARAGRAPH>The <COMMAND>proclaim</COMMAND> facility consists of a daemon that runs on a master server, optional relay daemons for servers on subnets, GUI configuration programs, and a client application that communicates with the DHCP servers. All these programs are bundled with the IRIX operating system.</PARAGRAPH>
<PARAGRAPH>If you need to refresh your knowledge of the basic concepts of networking, IP addresses, and netmasks, please read <XREF IDREF="37317" TYPE="TITLE">Chapter&nbsp;1</XREF>, <XREF IDREF="69242" TYPE="TITLE">&ldquo;Internet Protocol Addresses&rdquo;</XREF>, and <XREF IDREF="87729" TYPE="TITLE">&ldquo;Setting the Netmask&rdquo;</XREF> before continuing with this section.</PARAGRAPH>
<PARAGRAPH>These subsections provide information about configuring <COMMAND>proclaim</COMMAND> servers and clients:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="54540" TYPE="TITLE">&ldquo;Configuring the DHCP Server&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="47373" TYPE="TITLE">&ldquo;Configuring the DHCP Relay Agent&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="55068" TYPE="TITLE">&ldquo;About the Proclaim Client&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="42125" TYPE="TITLE">&ldquo;Limitations of DHCP&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="54540">Configuring the DHCP Server</TITLE><PARAGRAPH>The <COMMAND>dhcp_bootp</COMMAND> program is a server that communicates with DHCP and <COMMAND>proclaim</COMMAND> clients to provide host configuration information, including an IP address at minimum. If your site uses DNS to maintain the hosts map, you need some external mechanism (such as a script) to update the DNS map from the DHCP server. If your site uses NIS to maintain the hosts and ethers maps, <COMMAND>dhcp_bootp</COMMAND> must be run on the same machine as the NIS master server.</PARAGRAPH>
<PARAGRAPH>The DHCP server generally uses configuration parameters based upon the subnet number of the originating client request. The configuration files are all placed in the directory <INDEXTARGET ID="03.setup65"><!-- POSTPROCESSDATA: 03.setup65|proclaim:server configuration DHCP: server configuration --><FILENAME>/var/dhcp/config</FILENAME> and are named in the form <FILENAME>config</FILENAME>.&lt;<VARIABLE>netnumber></VARIABLE>. For example, the configuration file for clients on the 128.78.61 network should be named <FILENAME>config.128.78.61.0</FILENAME>. If the subnet configuration file does not exist, then the <FILENAME>config.Default</FILENAME>&space;file applies instead. If the default configuration file is missing or unreadable, clients are configured to match the DHCP server itself.</PARAGRAPH>
<PARAGRAPH>To configure the DHCP server, you can run the <COMMAND>ProclaimServerMgr</COMMAND> graphical interface, as described by the <REFPAGE>ProclaimServerMgr(1M)</REFPAGE> reference page. If you prefer, you can configure server options using your favorite text editor, altering the keywords documented on the <REFPAGE>dhcp_bootp(1M)</REFPAGE> reference page.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="47373">Configuring the DHCP Relay Agent</TITLE><PARAGRAPH>The <COMMAND>dhcp_relay </COMMAND>program is a subnet agent that communicates with the main DHCP server to provide DHCP clients with host configuration information. If your site uses DNS to maintain the hosts map, you need some external mechanism (such as a script) to update the DNS map from the DHCP server. If your site uses NIS to maintain the hosts and ethers maps, your site's main DHCP server must be on the same machine as the NIS master. In any case, you should run <COMMAND>dhcp_relay </COMMAND>on all subnets besides the one with the main DHCP server.</PARAGRAPH>
<PARAGRAPH>The DHCP relay agent reads the configuration file <INDEXTARGET ID="03.setup66"><!-- POSTPROCESSDATA: 03.setup66|proclaim:relay-agent configuration DHCP: relay-agent configuration --><FILENAME>/var/dhcp/config/dhcp_relay.servers</FILENAME> to determine the location of the main DHCP server. This configuration file should contain the IP address and hostname of the DHCP server, on two separate lines.</PARAGRAPH>
<PARAGRAPH>To configure the relay agent, you can run the <COMMAND>ProclaimRelayMgr</COMMAND> graphical interface, as described by the <REFPAGE>ProclaimRelayMgr(1M)</REFPAGE> reference page. If you prefer, you can configure relay agent options using your favorite text editor, following the steps documented on the <REFPAGE>dhcp_relay(1M)</REFPAGE> reference page.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="55068">About the Proclaim Client</TITLE><PARAGRAPH>The <COMMAND>proclaim</COMMAND> client communicates with a DHCP server to obtain host configuration parameters, including an IP address and an IP address lease at minimum. You can use <INDEXTARGET ID="03.setup67"><!-- POSTPROCESSDATA: 03.setup67|proclaim:client configuration DHCP:client configuration --><COMMAND>proclaim</COMMAND> to set up and configure new systems automatically, and also to move systems from one network to another without administrative intervention. The <COMMAND>proclaim</COMMAND> client can also verify configurations at reboot time.</PARAGRAPH>
<PARAGRAPH>For more information about setting up <COMMAND>proclaim</COMMAND> on client systems, see the <REFPAGE>proclaim(1M)</REFPAGE> reference page.</PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="42125">Limitations of DHCP</TITLE><PARAGRAPH>The following restrictions and limitations are present in this release:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>The DHCP server must be the NIS master if your site uses NIS for hostname, IP address, or network hardware address validation and mapping. Note that NIS is an optional software product, and not all systems and networks use it.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>If your site uses DNS to maintain the hosts map, you need an external mechanism (manual or automated) to update the DNS map from DHCP. This limitation should be lifted in the next release.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>The server cannot respond to both DHCP and <COMMAND>bootp</COMMAND> client requests contained within a single packet, although it can act as the <COMMAND>bootp</COMMAND> server for normal <COMMAND>bootp</COMMAND> requests.</PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="25826">Creating a Local Network Script</TITLE><PARAGRAPH>To start and terminate locally developed network daemons, or to publish ARP entries and set routes, create the separate shell script <INDEXTARGET ID="03.setup68"><!-- POSTPROCESSDATA: 03.setup68|network scripts, creating --><FILENAME>/etc/init.d/network.local</FILENAME>. Make symbolic links in <FILENAME>/etc/rc0.d</FILENAME>&space;and <FILENAME>/etc/rc2.d</FILENAME>&space;to this file to have it called during station startup and shutdown:&space;<INDEXTARGET ID="03.setup69"><!-- POSTPROCESSDATA: 03.setup69|<ITALICS>/etc/init.d/network</ITALICS> script --><INDEXTARGET ID="03.setup70"><!-- POSTPROCESSDATA: 03.setup70|<ITALICS>/etc/init.d/network.local</ITALICS> script --></PARAGRAPH>
<CODE>
<USERINPUT>ln -s /etc/init.d/network.local /etc/rc0.d/K39network&lbreak;ln -s /etc/init.d/network.local /etc/rc2.d/S31network</USERINPUT>
</CODE>
<PARAGRAPH>See <FILENAME>/etc/init.d/network</FILENAME> for the basic format of the script. Also refer to<REFPAGE>&space;network</REFPAGE><REFPAGE>(1M)</REFPAGE>,<REFPAGE>&space;rc2</REFPAGE><REFPAGE>(1M),</REFPAGE> and<REFPAGE>&space;rc0</REFPAGE><REFPAGE>(1M)</REFPAGE> for more information.</PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="94592">Turning On Remote Access Logging</TITLE><PARAGRAPH>Several network daemons have an option that lets you log remote accesses to the station log file <INDEXTARGET ID="03.setup71"><!-- POSTPROCESSDATA: 03.setup71|remote access logging --><FILENAME>/var/adm/SYSLOG</FILENAME> by using <COMMAND>syslogd</COMMAND>. Sites connected to the Internet should use this feature. To enable logging for <COMMAND>ftpd</COMMAND>, <COMMAND>tftpd</COMMAND>, and <COMMAND>rshd</COMMAND>, edit <FILENAME>/etc/inetd.conf</FILENAME> and add <CMDLINEOPT>-l</CMDLINEOPT> after the right-most instance of <COMMAND>ftpd</COMMAND> and <COMMAND>tftpd</COMMAND>. Add <CMDLINEOPT>-L</CMDLINEOPT> after the right-most instance of rshd. For additional <COMMAND>ftp</COMMAND> logging, add <CMDLINEOPT>-ll</CMDLINEOPT> to the <COMMAND>ftpd</COMMAND> entry. Signal <COMMAND>inetd</COMMAND> to reread its file after you have added your changes:<INDEXTARGET ID="03.setup72"><!-- POSTPROCESSDATA: 03.setup72|logging remote access --></PARAGRAPH>
<CODE>
<USERINPUT>/etc/killall -HUP inetd </USERINPUT>
</CODE>
<PARAGRAPH>Remote logins by means of <COMMAND>rlogin</COMMAND>, <COMMAND>telnet</COMMAND>, and the 4DDN <COMMAND>sethost</COMMAND> programs can be logged by <COMMAND>login</COMMAND>. Edit <FILENAME>/etc/default/login</FILENAME> and add the keywords <SCREENDISPLAY>SYSLOG=ALL</SCREENDISPLAY> or <SCREENDISPLAY>SYSLOG=FAIL</SCREENDISPLAY> to it. For example, this command in the <FILENAME>login</FILENAME>&space;file logs successful and failed local and remote login attempts to <COMMAND>syslogd</COMMAND>:</PARAGRAPH>
<EXAMPLE>
<SCREENDISPLAY>syslog=all</SCREENDISPLAY><USERINPUT>&space;</USERINPUT>
</EXAMPLE>
<PARAGRAPH>See the<REFPAGE>&space;login(1)</REFPAGE> reference page for details.</PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="47163">Setting Up Network-Wide Services</TITLE><PARAGRAPH>In addition to the required software that you must set up on each system on the network, you may want to designate certain systems to provide network-wide services. For example, you can set up a system as an IRIS InSight server, so that users can access a complete set of InSight books without installing them all on their local disks. </PARAGRAPH>
<PARAGRAPH>The following sections discuss setting up an anonymous <COMMAND>ftp</COMMAND> server, and setting up an IRIS&nbsp;InSight server.</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="18799" TYPE="TITLE">&ldquo;Setting Up an Anonymous FTP Account&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="51629" TYPE="TITLE">&ldquo;Setting Up a Password-Protected FTP Account&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="42505" TYPE="TITLE">&ldquo;Setting Up a Conventional IRIS Insight Server/Client System&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="83078" TYPE="TITLE">&ldquo;Setting Up a CD-ROM IRIS Insight Server/Client System&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="52805" TYPE="TITLE">&ldquo;Starting Up the Remote IRIS Insight Viewer&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="18799">Setting Up an Anonymous FTP Account<INDEXTARGET ID="03.setup73"><!-- POSTPROCESSDATA: 03.setup73|FTP, setting up accountanonymous FTP FTP, anonymous --></TITLE><PARAGRAPH>An anonymous FTP account is a way for you to make information on your system available to anybody, while still restricting access to your system. An anonymous FTP account lets anybody log in to your system as the &ldquo;anonymous&rdquo; or &ldquo;ftp&rdquo; user. The FTP daemon does a <COMMAND>chroot</COMMAND> to the FTP home directory (<FILENAME>~ftp</FILENAME>) for anonymous FTP users, which effectively prevents them from accessing parts of the system that are not subdirectories of <FILENAME>~ftp</FILENAME>; see<REFPAGE>&space;chroot(1M)</REFPAGE>. If you prefer to limit access to users with passwords, after setting up an anonymous account continue with <XREF IDREF="51629" TYPE="TITLE">&ldquo;Setting Up a Password-Protected FTP Account&rdquo;</XREF>.</PARAGRAPH>
<PARAGRAPH>The following procedure is designed to help you set up a network-accessible anonymous FTP account. As usual, understanding the various steps and continually monitoring how the account is used are necessary to protect your system security. </PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>If you are using IRIX 6.3, 6.4, or 6.5, you must copy certain files into the /<FILENAME>lib32</FILENAME> and <FILENAME>/usr </FILENAME>directories. See <XREF IDREF="71969" TYPE="TITLE">&ldquo;Updating FTP for IRIX 6.3, 6.4, and 6.5&rdquo;</XREF> for details. Otherwise follow the steps below.</NOTE>
<ORDEREDLIST><LIST><PARAGRAPH>Create the anonymous FTP user entry in <FILENAME>/etc/passwd</FILENAME>. The username should be ftp. Put an asterisk (*) in the password field, and assign user and group IDs, a home directory, and a login shell. The following is an example of a typical entry in <FILENAME>/etc/passwd</FILENAME> for the anonymous FTP account:</PARAGRAPH>
<CODE>
ftp:*:997:995:Anonymous FTP Account:/disk2/ftp:/dev/null
</CODE>
<PARAGRAPH>The login shell <FILENAME>/dev/null</FILENAME> is recommended but not required, and the home directory can be anywhere, with reservations as explained in the next step.</PARAGRAPH>
<TIP><PREFIX>Tip</PREFIX>For public servers, Silicon Graphics recommends that you create a shadow password file. Run the<COMMAND>&space;pwconv</COMMAND> command from the <FILENAME>/etc</FILENAME> directory:</TIP>
<CODE>
<USERINPUT># pwconv</USERINPUT>
</CODE>
<PARAGRAPH>This command updates the contents of <FILENAME>/etc/passwd</FILENAME> and moves encrypted passwords to <FILENAME>/etc/shadow</FILENAME>, which is then inaccessible to non-privileged users. If you run NIS, see the<REFPAGE>&space;shadow(4)</REFPAGE> reference page for interoperability information.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Create an FTP home directory. This may be wherever you like but, especially if you are going to allow writes to it, it should probably be on a separate partition from <FILENAME>/</FILENAME> or <FILENAME>/usr</FILENAME>. That way, if the partition fills up, it will not disable basic system operations. In this example procedure, <FILENAME>/disk2/ftp</FILENAME> is the name of the anonymous FTP directory. First, make the directory:</PARAGRAPH>
<CODE>
# <USERINPUT>mkdir /disk2/ftp</USERINPUT>
</CODE>
<PARAGRAPH>Then, if it is a separate disk or disk partition, you can mount the device on it; see <REFPAGE>mount(1M)</REFPAGE>. The anonymous FTP home directory you make must be the same one you specify in the <FILENAME>/etc/passwd</FILENAME> file.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Change directory to the <FILENAME>ftp</FILENAME> home directory and create the subdirectories used for FTP access:</PARAGRAPH>
<CODE>
# <USERINPUT>cd /disk2/ftp</USERINPUT>
# <USERINPUT>mkdir bin dev etc lib pub incoming</USERINPUT>
</CODE>
<PARAGRAPH>In addition to the standard <FILENAME>bin</FILENAME>, <FILENAME>dev</FILENAME>, <FILENAME>etc</FILENAME>, <FILENAME>lib</FILENAME>, and <FILENAME>pub</FILENAME> directories, you may wish to create an <FILENAME>incoming</FILENAME> directory for incoming files.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Copy the <COMMAND>ls</COMMAND> command from <FILENAME>/sbin</FILENAME> to <FILENAME>~ftp/bin</FILENAME>:</PARAGRAPH>
<CODE>
# <USERINPUT>cp /sbin/ls bin</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Copy <FILENAME>/etc/passwd</FILENAME> and <FILENAME>/etc/group</FILENAME> to <FILENAME>~ftp/etc</FILENAME> and edit them to an acceptable minimum:</PARAGRAPH>
<CODE>
# <USERINPUT>cp /etc/passwd /etc/group etc</USERINPUT>
</CODE>
<PARAGRAPH>A good choice for the contents of <FILENAME>~ftp/etc/passwd</FILENAME> might be</PARAGRAPH>
<CODE>
root:*:0:0:Super-User:/:/dev/null
bin:*:2:2:System Tools Owner:/bin:/dev/null
sys:*:4:0:System Activity Owner:/var/adm:/dev/null
ftp:*:997:999:Anonymous FTP Account:/disk2/ftp:/dev/null
</CODE>
<PARAGRAPH>A good choice for the contents of <FILENAME>~ftp/etc/group</FILENAME> might be</PARAGRAPH>
<CODE>
sys:*:0:
other::995:
guest:*:998:
</CODE>
</LIST>
<LIST><PARAGRAPH>Add appropriate device and library files for anonymous FTP as follows:</PARAGRAPH>
<CODE>
# <USERINPUT>/sbin/mknod dev/zero c 37 0</USERINPUT>
# <USERINPUT>cp /lib/libc.so.1 /lib/rld lib</USERINPUT>
</CODE>
<PARAGRAPH>The <FILENAME>dev/zero</FILENAME> file helps zero out sensitive data; <FILENAME>~ftp/bin/ls</FILENAME> requires the library files.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Set restrictive permissions on <FILENAME>~ftp/etc/passwd</FILENAME>, <FILENAME>~ftp/etc/group </FILENAME>and <FILENAME>~ftp/dev/zero</FILENAME>:</PARAGRAPH>
<CODE>
# <USERINPUT>chmod 444 etc/* dev/*</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Make sure the <FILENAME>bin</FILENAME>, <FILENAME>dev</FILENAME>, <FILENAME>etc</FILENAME>, <FILENAME>lib</FILENAME> and <FILENAME>~ftp</FILENAME> directories are owned by root, with group being sys, having restricted write permission:</PARAGRAPH>
<CODE>
# <USERINPUT>chown root.sys bin dev etc lib .</USERINPUT>
# <USERINPUT>chmod 511 bin dev etc lib .</USERINPUT>
</CODE>
<PARAGRAPH>In the <COMMAND>chown</COMMAND> command, the dot separates owner and group.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>For the <FILENAME>pub</FILENAME> directory, set the owner to root, the group to sys, and global read and access permission:</PARAGRAPH>
<CODE>
# <USERINPUT>chown root.sys pub</USERINPUT>
# <USERINPUT>chmod 755 pub</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>If you created an<FILENAME>&space;incoming</FILENAME> directory, set the permissions to allow anybody to write there but not to read its contents:</PARAGRAPH>
<CODE>
# <USERINPUT>chown ftp.other incoming</USERINPUT>
# <USERINPUT>chmod 333 incoming</USERINPUT>
</CODE>
<PARAGRAPH>Any FTP user can now get or put files in the <FILENAME>incoming </FILENAME>directory, but they must know the name of the file beforehand, because they cannot list directory contents.</PARAGRAPH>
<CAUTION><PREFIX>Caution</PREFIX>By allowing write permission, you make it possible for anonymous FTP users to fill the entire disk partition. For instructions on setting up a more restricted alternative, see <XREF IDREF="51629" TYPE="TITLE">&ldquo;Setting Up a Password-Protected FTP Account&rdquo;</XREF>.</CAUTION>
</LIST>
<LIST><PARAGRAPH>As a security precaution, add the following entry to the <FILENAME>/etc/aliases</FILENAME> file to cause mail sent to the user <FILENAME>ftp</FILENAME> to be intercepted by the postmaster:</PARAGRAPH>
<CODE>
ftp: postmaster
</CODE>
<PARAGRAPH>Run the command <COMMAND>newaliases</COMMAND> to make this take effect. (This assumes you have an alias of postmaster in <FILENAME>/etc/aliases</FILENAME>. See <REFPAGE>aliases(4)</REFPAGE> and <REFPAGE>newaliases(1M)</REFPAGE>.)</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Enable FTP logging as described in &ldquo;Limiting inetd Services&rdquo; in Chapter&nbsp;5 in <EXTREF IDREF="70848" BOOK="IA_BakSecAcc" FILE="" HDG="70848" INFO=""></EXTREF>
<DOCTITLE>IRIX Admin: Backup, Security, and Accounting</DOCTITLE><EXTREF></EXTREF>
. Note that if you use one<CMDLINEOPT>&space;-l</CMDLINEOPT> argument with <COMMAND>ftpd</COMMAND>, you record only successful and failed FTP login attempts. If you use two <CMDLINEOPT>l</CMDLINEOPT>s, you also record the retrieve (get), store (put), append, delete, make directory, remove directory, and rename operations (and their filename arguments) performed during ftp login sessions. If you use three <CMDLINEOPT>l</CMDLINEOPT>s, the report includes the number of bytes transferred in <COMMAND>get</COMMAND> and <COMMAND>put</COMMAND> operations.</PARAGRAPH>
<PARAGRAPH>For example, the following entry in <FILENAME>/etc/inetd.conf</FILENAME> means FTP sessions and get or put operations (excluding byte count) are logged in <FILENAME>/var/adm/SYSLOG</FILENAME>:</PARAGRAPH>
<CODE>
ftp     stream  tcp     nowait  root    /usr/etc/ftpd   ftpd -ll
</CODE>
</LIST>
<LIST><PARAGRAPH>Once you have edited <FILENAME>/etc/inetd.conf</FILENAME>, restart <COMMAND>inetd</COMMAND> with the following command:</PARAGRAPH>
<CODE>
# <USERINPUT>/etc/killall -HUP inetd</USERINPUT>
</CODE>
<NOTE><PREFIX>Note</PREFIX>Although FTP logging records in <FILENAME>/var/adm/SYSLOG</FILENAME> show any passwords entered by users logging in, no password checking is done for anonymous FTP. The convention is for anonymous users to enter their e-mail addresses for passwords, but they could just as easily enter another user's address or anything at all.</NOTE>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>If you place text in the <FILENAME>/etc/issue</FILENAME> file, it displays when a user connects to your system, before the FTP login prompt. You might want to include information here about the kind of services your FTP site offers, and whom to contact in case of problems. In addition, text in the <FILENAME>~/ftp/README</FILENAME> file displays after an FTP user logs in.</PARAGRAPH>
<PARAGRAPH>Refer to <REFPAGE>crontab(1)</REFPAGE>, <REFPAGE>syslogd(1M)</REFPAGE>, and the file <FILENAME>/var/spool/cron/crontabs/root</FILENAME> for information on changing the frequency or nature of system log file maintenance&mdash;you may, for example, want to increase the length of time you keep log files. To help you keep track of the demands made on your public FTP server, see the <EXTREF IDREF="70848" BOOK="IA_BakSecAcc" FILE="" HDG="70848" INFO=""></EXTREF>
</PARAGRAPH>
<PARAGRAPH></PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="51629">Setting Up a Password-Protected FTP Account<INDEXTARGET ID="03.setup74"><!-- POSTPROCESSDATA: 03.setup74|password-protected FTP FTP, password protected --></TITLE><PARAGRAPH>Password-protected FTP accounts allow only valid users to access your system. This is a way to make file transfer available to selected people, while still restricting access to the rest of your system. Only users with a password in <INDEXTARGET ID="03.setup75"><!-- POSTPROCESSDATA: 03.setup75|restricted FTP --><FILENAME>/etc/passwd </FILENAME>may connect to these FTP services. Additionally, restricted FTP users cannot access any part of a system that is not part of their home directory; the system does this with <COMMAND>chroot</COMMAND>. </PARAGRAPH>
<PARAGRAPH>The following procedure is designed to help you set up a network-accessible secure FTP account. As usual, understanding the various steps and continually monitoring how the account is used are necessary to protect system security. Before beginning this procedure, you must have completed all steps in <XREF IDREF="18799" TYPE="TITLE">&ldquo;Setting Up an Anonymous FTP Account&rdquo;</XREF>.</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Modify the <SCREENDISPLAY>ftp</SCREENDISPLAY> user entry in <FILENAME>/etc/passwd</FILENAME>. The username should be &ldquo;ftp<VARIABLE>X</VARIABLE>&rdquo; where <VARIABLE>X</VARIABLE> is a variable. Leave the password field empty for now, assign a user ID and group ID, and home directory. The following is an example of a typical entry in <FILENAME>/etc/passwd</FILENAME> for a password-protected FTP account:</PARAGRAPH>
<CODE>
ftp1::197:995:FTP user:/disk2/ftp:/dev/null
</CODE>
<PARAGRAPH>The login shell <FILENAME>/dev/null</FILENAME> prevents FTP users from gaining UNIX shell access. The second field will contain the user's encrypted password.</PARAGRAPH>
<TIP><PREFIX>Tip</PREFIX>The FTP daemon grants anonymous FTP privileges to the user named <SCREENDISPLAY>ftp</SCREENDISPLAY>, so if there is no <SCREENDISPLAY>ftp</SCREENDISPLAY> line in <FILENAME>/etc/passwd</FILENAME>, the system does not permit anonymous FTP.</TIP>
</LIST>
<LIST><PARAGRAPH>Assign the FTP user a reasonable password, maybe asking what the person prefers:</PARAGRAPH>
<CODE>
# <USERINPUT>passwd ftp1</USERINPUT>
New password:
Re-enter new password:
</CODE>
</LIST>
<LIST><PARAGRAPH>Copy the line for the FTP user from <FILENAME>/etc/passwd</FILENAME> and paste it into <FILENAME>~ftp/etc/passwd</FILENAME>, changing the encrypted password to an asterisk:</PARAGRAPH>
<CODE>
ftp1:*:197:995:FTP user:/disk2/ftp:/dev/null
</CODE>
</LIST>
<LIST><PARAGRAPH>Create or edit the <FILENAME>/etc/ftpusers</FILENAME> file so it contains this line:</PARAGRAPH>
<CODE>
ftp1 restrict
</CODE>
<PARAGRAPH>This causes the FTP daemon to <COMMAND>chroot</COMMAND> this user to its home directory; see <REFPAGE>ftpd(1M)</REFPAGE>.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Create the FTP user's home directory inside <FILENAME>ftp/pub</FILENAME>:</PARAGRAPH>
<CODE>
# <USERINPUT>mkdir /disk2/ftp/pub/ftp1</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>For the FTP user's home directory, set ownership and group <VARIABLE>other</VARIABLE>, and give the user read, write, and access permissions:</PARAGRAPH>
<CODE>
# <USERINPUT>chown ftp1.other /disk2/ftp/pub/ftp1 </USERINPUT>
# <USERINPUT>chmod 700 /disk2/ftp/pub/ftp1</USERINPUT>
</CODE>
<CAUTION><PREFIX>Caution</PREFIX>With write permission, FTP users can fill up the containing disk partition, just as was true with the <FILENAME>~ftp/incoming</FILENAME> directory.</CAUTION>
</LIST>
<LIST><PARAGRAPH>Create the file <FILENAME>~ftp/README</FILENAME> telling FTP users where to find their home directory:</PARAGRAPH>
<CODE>
Your home directory is under pub/.
</CODE>
</LIST>
<LIST><PARAGRAPH>As a security precaution, add the following entry to the file <FILENAME>/etc/aliases</FILENAME> to cause mail sent to the FTP user to go to the postmaster instead:</PARAGRAPH>
<CODE>
ftp1: postmaster
</CODE>
<PARAGRAPH>Run the command <COMMAND>newaliases</COMMAND> to make this take effect; see <REFPAGE>newaliases(1M)</REFPAGE>.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="71969">Updating FTP for IRIX 6.3, 6.4, and 6.5</TITLE><PARAGRAPH>If you are running IRIX 6.3, 6.4, or 6.5, you will need to copy the runtime loader into the /<FILENAME>lib32</FILENAME> directory, as well as <FILENAME>/usr/lib/iconv/iconvtab</FILENAME> into the <FILENAME>/usr/iconv</FILENAME> directory. </PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Create a directory for <FILENAME>~ftp/lib32:</FILENAME></PARAGRAPH>
<CODE>
<USERINPUT># mkdir ~ftp/lib32</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Copy the runtime loader into the directory:</PARAGRAPH>
<CODE>
<USERINPUT># cp /lib32/rld ~ftp/lib32</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Create a directory for <FILENAME>~ftp/usr/iconv:</FILENAME></PARAGRAPH>
<CODE>
<USERINPUT># mkdir ~ftp/usr/iconv</USERINPUT>
</CODE>
</LIST>
<LIST><PARAGRAPH>Copy the font files into the directory:</PARAGRAPH>
<CODE>
<USERINPUT># cp /usr/lib/iconv/iconvtab ~ftp/usr/lib/iconv</USERINPUT>
</CODE>
</LIST>
</ORDEREDLIST>
</SECTION3>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="26414">About IRIS InSight File Servers<INDEXTARGET ID="03.setup76"><!-- POSTPROCESSDATA: 03.setup76|IRIS InSight servers --><INDEXTARGET ID="03.setup77"><!-- POSTPROCESSDATA: 03.setup77|IRIS InSight, using NFS --></TITLE><PARAGRAPH>The files and directories that make up the IRIS InSight system of online documentation take up a great deal of space. In your network, there is no reason for each system to maintain a separate copy of the IRIS InSight documents as long as all systems are at substantially the same software revision level. If the IRIS Insight software revision level is the same across several systems, you can designate one system to serve the others with the IRIS Insight files, thus freeing up disk space on the client systems. </PARAGRAPH>
<PARAGRAPH>Be sure to choose a server system that is not called upon to carry a heavy workload, and take your network performance into account before you begin. If your users use IRIS Insight a great deal and your network is already burdened, you may find that your users will not appreciate the decreased response time from both IRIS Insight and your network in general. Also, if a person is to use the IRIS Insight server as his or her workstation, that person must be prepared to accept a certain (possibly substantial) amount of disk, CPU, and network overhead as a result. </PARAGRAPH>
<PARAGRAPH>There are two convenient ways to set up an IRIS Insight server. These will be detailed in the next two subsections. Both methods require that you have the NFS software option installed. If you do not understand the terms and concepts behind NFS, you should read the <DOCTITLE>ONC3/NFS Administrator's Guide</DOCTITLE> and the <DOCTITLE>NIS Administration Guide</DOCTITLE> before undertaking these projects. The second method described here also requires a dedicated CD-ROM drive to hold the IRIS Insight distribution media.</PARAGRAPH>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="42505">Setting Up a Conventional IRIS Insight Server/Client System </TITLE><PARAGRAPH>To install the IRIS InSight Viewer and Document Library on a remote server and retrieve the information from a local client system, follow the steps below.</PARAGRAPH>
<PARAGRAPH>On the server system:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Log in as <ITALICS>root</ITALICS> (superuser).</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Bring up <COMMAND>inst</COMMAND> and install the complete IRIS InSight product image (from your CD-ROM drive or distribution directory) with these commands:</PARAGRAPH>
<CODE>
Inst> <USERINPUT>install insight insight_gloss *.books.*</USERINPUT>&space;
Inst> <USERINPUT>go</USERINPUT>&space;
</CODE>
<PARAGRAPH>The total size of the viewer and document library is a little less than 23 megabytes.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Export the <FILENAME>/usr/share/Insight/library/SGI_bookshelves</FILENAME> directory using the System Manager or the <COMMAND>exportfs </COMMAND>command:</PARAGRAPH>
<CODE>
<USERINPUT>exportfs -i /usr/share/Insight/library/SGI_bookshelves</USERINPUT>&space;
</CODE>
<PARAGRAPH>If the server does not have a graphical display, a warning is generated during the exit. This warning relates to updating the X server's font directory and can be ignored.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>On the client system:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Log in as <ITALICS>root</ITALICS> (superuser).</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Enter the command</PARAGRAPH>
<CODE>
<USERINPUT>versions</USERINPUT>&space;<USERINPUT>remove *.books.*</USERINPUT>&space;
</CODE>
<PARAGRAPH>to remove the books on your bookshelves.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Run the <COMMAND>inst c</COMMAND>ommand on your client system and enter the following commands to install the <ITALICS>insight.sw.client</ITALICS> subsystem (you may want to install the <ITALICS>insight.man.man</ITALICS> and the <ITALICS>insight.man.relnotes</ITALICS> subsystems as well):</PARAGRAPH>
<CODE>
Inst> <USERINPUT>keep insight insight_gloss</USERINPUT>&space;
Inst> <USERINPUT>install insight.sw.client</USERINPUT>&space;
Inst> <USERINPUT>go</USERINPUT>&space;
</CODE>
</LIST>
<LIST><PARAGRAPH>Mount the <FILENAME>SGI_bookshelves</FILENAME> directory from your server on your client system. In the example below, the name of the server machine is <ITALICS>capra</ITALICS>.</PARAGRAPH>
<CODE>
<USERINPUT>mkdir /usr/share/Insight/library/SGI_bookshelves</USERINPUT>&space;
<USERINPUT>mount capra:/usr/share/Insight/library/SGI_bookshelves /usr/share/Insight/library/SGI_bookshelves</USERINPUT>&space;
</CODE>
<PARAGRAPH>Note that when you enter the <COMMAND>mount</COMMAND> command on your client system, the entire command line goes on a single line. The command is broken across two lines in this example due to formatting limitations.</PARAGRAPH>
</LIST>
</ORDEREDLIST>
<NOTE><PREFIX>Note</PREFIX>If you have remote-mounted your IRIS Insight books, the Silicon Graphics <COMMAND>desktophelp</COMMAND> system will not operate correctly while the books are mounted. To view the <COMMAND>desktophelp</COMMAND>, unmount the books temporarily.</NOTE>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="83078">Setting Up a CD-ROM IRIS Insight Server/Client System</TITLE><PARAGRAPH>With this method, you need not use up your disk space for the IRIS Insight files if you have a CD-ROM drive you can dedicate to InSight. You simply leave the CD with the IRIS Insight distribution in the drive and link the mounted distribution to the directory where IRIS Insight would have installed the files. The drawback of this system is that you must dedicate a CD-ROM drive to the purpose, but this method can be used with NFS to provide server access to your entire network. </PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>If you have a version of the IRIS InSight Document Library installed on your client disk but you want to mount the books from the CD-ROM, you must remove all the files in <FILENAME>/usr/share/Insight/library</FILENAME> before creating the symbolic link described in step 2. Use the <COMMAND>versions remove</COMMAND> command to cleanly remove the books, then check the directory to be sure all files have been removed.</NOTE>
<PARAGRAPH>If you wish to use the IRIS InSight Viewer and Document Library from the CD-ROM and access the information from a local or remote system, follow the steps below.</PARAGRAPH>
<PARAGRAPH>On the server system with the CD-ROM drive:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Log in as <ITALICS>root</ITALICS> (superuser).</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Insert the IRIS InSight CD into the CD-ROM drive. If the drive is not mounted, use the System Manager or the <COMMAND>mount </COMMAND>command to mount the drive. The most common mount point is <FILENAME>/CDROM</FILENAME>. If the drive is mounted correctly, you should be able to change directories to <FILENAME>/CDROM</FILENAME> and see all the files in the IRIS InSight CD. To see the files, use the command</PARAGRAPH>
<CODE>
<USERINPUT>cd /CDROM/insight</USERINPUT>&space;
</CODE>
</LIST>
<LIST><PARAGRAPH>As <ITALICS>root</ITALICS>, create a symbolic link from <FILENAME>/usr/Insight/library/SGI_bookshelves</FILENAME> to the CD <FILENAME>insight</FILENAME> directory. You may need to create the directory <FILENAME>/usr/Insight/library</FILENAME> if it doesn't exist. Use these commands:</PARAGRAPH>
<CODE>
<USERINPUT>mkdir -p /usr/share/Insight/library</USERINPUT>&space;
<USERINPUT>ln -s /CDROM/insight/SGI_bookshelves /usr/share/Insight/library</USERINPUT>&space;
</CODE>
<PARAGRAPH>Note that when you enter the link command on your client system, the entire command line goes on a single line. The command is broken across two lines in this example due to formatting limitations.</PARAGRAPH>
<PARAGRAPH>At this point, the IRIS Insight bookshelves are mounted on your server and available for use on that system. To allow users on other systems on your network to use the bookshelves, proceed to step 4. </PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>If you want to share the bookshelves with other users on your network, export the <FILENAME>/CDROM</FILENAME> directory using the System Manager or the <COMMAND>exportfs</COMMAND> command:</PARAGRAPH>
<CODE>
<USERINPUT>exportfs -i /CDROM</USERINPUT>&space;
</CODE>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>On each client system, perform the following steps:</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Log in as <ITALICS>root</ITALICS> (superuser).</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Run the <COMMAND>inst </COMMAND>command and give the following commands to install the <ITALICS>insight.sw.client</ITALICS> subsystem (you may want to install the <ITALICS>insight.man.man</ITALICS> and the <ITALICS>insight.man.relnotes</ITALICS> subsystems as well). You can get the installation software from the CD in the <FILENAME>/CDROM/dist</FILENAME> directory on the server.</PARAGRAPH>
<CODE>
Inst> <USERINPUT>keep *</USERINPUT>&space;
Inst> <USERINPUT>install insight.sw.client</USERINPUT>&space;
Inst> <USERINPUT>go</USERINPUT>&space;
</CODE>
</LIST>
<LIST><PARAGRAPH>Mount the bookshelves from the server. In the example below, the name of the server machine is <ITALICS>capra</ITALICS>. Use the following command:</PARAGRAPH>
<CODE>
<USERINPUT>mount capra:/CDROM/insight/SGI_bookshelves /usr/share/Insight/library/SGI_bookshelves</USERINPUT>&space;
</CODE>
<NOTE><PREFIX>Note</PREFIX>When you enter the <COMMAND>mount</COMMAND> command on your client system, type the entire command on a single line. The command in the previous example is broken across two lines due to formatting limitations.</NOTE>
</LIST>
</ORDEREDLIST>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE><XREFTARGET ID="52805">Starting Up the Remote IRIS Insight Viewer</TITLE><PARAGRAPH>After the software has been installed, you should force your shell to remake its list of available programs and commands with the command <COMMAND>rehash. </COMMAND></PARAGRAPH>
<PARAGRAPH>You can now invoke the IRIS InSight Viewer. The command to invoke the viewer is <COMMAND>iiv</COMMAND> (an acronym for IRIS InSight Viewer) <COMMAND>iiv.</COMMAND><USERINPUT>&space;</USERINPUT></PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="30051">Accessing Network Services through Internet Gateway</TITLE><PARAGRAPH>Beginning with IRIX 6.5, you can configure access to the Internet using the Internet Gateway software, which allows access to network services using a graphical user interface. Online help provides guidance; this section outlines the processes. <INDEXTARGET ID="03.setup78"><!-- POSTPROCESSDATA: 03.setup78|Internet:Gateway access --></PARAGRAPH>
<PARAGRAPH>The interface allows you to administer FTP, DHCP, various naming services, and routing from the Network Services entry screen, as well as connecting to the Internet through an Internet Service Provider. </PARAGRAPH>
<PARAGRAPH>To access the Internet Gateway server, bring up a Web browser, and fill out a series of forms that complete the configuration process.</PARAGRAPH>
<ORDEREDLIST><LIST><PARAGRAPH>Ensure the server is running, then use the <COMMAND>chkconfig</COMMAND> command to turn the Internet Gateway on:</PARAGRAPH>
<PARAGRAPH># <USERINPUT>chkconfig webface on</USERINPUT></PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Start the Internet Gateway web server:</PARAGRAPH>
<PARAGRAPH># <USERINPUT>/etc/init.d/webface start</USERINPUT></PARAGRAPH>
<PARAGRAPH>The Web browser can be run from any computer or workstation that is on the same LAN as the Internet Gateway server.</PARAGRAPH>
</LIST>
<LIST><PARAGRAPH>Open the following uniform resource locator (URL):</PARAGRAPH>
<PARAGRAPH><USERINPUT>http://</USERINPUT><VARIABLE>server_ip_address</VARIABLE><USERINPUT>:2077/</USERINPUT></PARAGRAPH>
<PARAGRAPH>In this URL, <VARIABLE>server_ip_address</VARIABLE> is the IP address you assigned to the Internet Gateway server. For example:</PARAGRAPH>
<PARAGRAPH><USERINPUT>http://151.166.96.36:2077/</USERINPUT></PARAGRAPH>
</LIST>
</ORDEREDLIST>
<PARAGRAPH>You will be prompted to enter an administrative account user ID and create a password for the administrative account. You will also be required to enter the root password.</PARAGRAPH>
<PARAGRAPH>You can now follow the online instructions to continue setting up your server to act as an Internet gateway.</PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="84639">Reserving Resources With RSVP</TITLE><PARAGRAPH>Beginning with IRIX 6.5, the Resource Reservation Protocol (RSVP) allows applications to set up pathways through computer networks by reserving bandwidth. This is particularly useful for applications such as video conferencing, video broadcasting, and Internet telephony, that may wish to guarantee a specific bandwidth, regardless of the current network load.<INDEXTARGET ID="03.setup79"><!-- POSTPROCESSDATA: 03.setup79|RSVPreserving bandwidthbandwidth, reserving --></PARAGRAPH>
<PARAGRAPH>Of the two types of integrated services defined for RSVP, controlled load and guaranteed, only the controlled load service is supported. This service ensures that packets are delivered with minimal loss and delay. Each host and router along the pathway has the option of committing to provide the service or not, depending on current commitments and other factors. </PARAGRAPH>
<PARAGRAPH>An application communicates with the IRIX system daemon <FILENAME>rsvpd</FILENAME>, using the API defined by X/Open. The daemon <FILENAME>rsvpd</FILENAME> then sends and receives RSVP control messages on behalf of the application. <FILENAME>rsvpd</FILENAME> sends PATH messages advertising the availability of one or more of the integrated services, and those systems receiving a PATH message may send back a RESV message to reserve bandwidth. A packet handler in the IRIX kernel identifies packets belonging to an RSVP session, and gives them the quality of service defined by the controlled load specification. The packet handler does this while maintaining high line utilization and low CPU overhead.</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE>Installing RSVP</TITLE><PARAGRAPH>Before attempting to use RSVP, make sure a supported network interface together with the appropriate driver are installed on the system. To determine which network interfaces are present on the system, use the hinv command:</PARAGRAPH>
<CODE>
% <USERINPUT>hinv</USERINPUT>
</CODE>
<PARAGRAPH>The output should reveal the output as listed in <XREF IDREF="37506" TYPE="TABLE">Table&nbsp;3-2</XREF>. </PARAGRAPH>
<TABLE COLUMNS="3"><CAPTION LBL="3-2"><PREFIX>Table 3-2 </PREFIX><XREFTARGET ID="37506">&nbsp;Supported Cards for RSVP</CAPTION>
<TABLEHEADING><CELL LEFT="0" WIDTH="99"><PARAGRAPH>Type of Network 
Interface</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>&lbreak;Designation</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>Output from hinv&lbreak;(where <VARIABLE>n</VARIABLE> is an integer)</PARAGRAPH>
</CELL>
</TABLEHEADING>
<TABLEBODY><ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>FDDI</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>xpi</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>xpi<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>FDDI</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>ipg</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>ipg<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>FDDI</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>rns</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>rns<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>Ethernet</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>me</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>ec<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>Ethernet</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>ec2</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>ec<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>Ethernet</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>ef</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>ef<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>Ethernet</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>ecf</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>ecf<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>Ethernet</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>ee</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>et<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
<ROW><CELL LEFT="0" WIDTH="99"><PARAGRAPH>Ethernet</PARAGRAPH>
</CELL>
<CELL LEFT="105" WIDTH="63"><PARAGRAPH>ep</PARAGRAPH>
</CELL>
<CELL LEFT="175" WIDTH="153"><PARAGRAPH>ep<VARIABLE>n</VARIABLE></PARAGRAPH>
</CELL>
</ROW>
</TABLEBODY>
</TABLE>
<PARAGRAPH>With the supported hardware installed, verify that the appropriate level of the IRIX operating system is installed. You can check currently installed software using the desktop Software Manager, or from the command line, using <COMMAND>showprods</COMMAND>. If you need to install the software, refer to<DOCTITLE>&space;IRIX Admin: Software Installation and Licensing</DOCTITLE> for instructions. </PARAGRAPH>
<PARAGRAPH>When your system is configured to handle RSVP, the next step is to start the RSVP daemon, <FILENAME>/usr/etc/r</FILENAME><COMMAND>svpd</COMMAND>. To have <COMMAND>rsvpd</COMMAND> start automatically during system boot, use the <COMMAND>chkconfig</COMMAND> command:</PARAGRAPH>
<CODE>
# <USERINPUT>chkconfig rsvpd on</USERINPUT>
</CODE>
<PARAGRAPH>This should then activate your system to use the RSVP facility next time you boot. The <REFPAGE>rsvpd(1M)</REFPAGE> reference page provides details of available command line options. </PARAGRAPH>
<PARAGRAPH>The state of network bandwidth reservation may be monitored using the command<COMMAND>&space;rstat</COMMAND>. The output of the command identifies each interface, line by line, the session address and port, and the next hop address. If no reservations exist for the session, <SCREENDISPLAY>no resv</SCREENDISPLAY> is displayed. See the <REFPAGE>rstat(1M) </REFPAGE>reference page for details and options. </PARAGRAPH>
<PARAGRAPH>RSVP can be configured on a particular interface using the command <COMMAND>psifconfig</COMMAND>. You can set the reservable bandwidth on the interface, see how much bandwidth is currently reserved, or completely disable or restore RSVP on that interface. See the <REFPAGE>psifconfig(1M)</REFPAGE> reference page for details of options. </PARAGRAPH>
<PARAGRAPH>If you prefer, you can configure <FILENAME>rsvpd</FILENAME> and monitor current RSVP status in graphical form using the Internet Gateway, see <XREF IDREF="30051" TYPE="TITLE">&ldquo;Accessing Network Services through Internet Gateway&rdquo;</XREF>. The following options may be handled in this way:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>RSVP configured on or off with <COMMAND>chkconfig.</COMMAND></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Determine which sessions are being advertised and reserved with<COMMAND>&space;rstat.</COMMAND></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Configure RSVP on a particular interface with <COMMAND>psifconfig.</COMMAND></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Logging level may be set to control the logging of data for debugging.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>You can, however, use RSVP from the command line, without the Internet Gateway. </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Troubleshooting RSVP</TITLE><PARAGRAPH>Because RSVP is an extremely new technology, some troubleshooting should be expected. The following represent the first effort at determining what may occur.</PARAGRAPH>
<SECTION3 LBL="" HELPID = ""><TITLE>Slow File Transfer</TITLE><PARAGRAPH>If you experience a marked slowdown in network file transfer, RSVP may be interfering with normal transmission. Your first action should be to turn off RSVP, using the kill command: </PARAGRAPH>
<CODE>
# <USERINPUT>killall -TERM rsvpd</USERINPUT>
</CODE>
<PARAGRAPH>Once you have benchmarked file transfer, restart RSVP. </PARAGRAPH>
</SECTION3>
<SECTION3 LBL="" HELPID = ""><TITLE>Video Interruption</TITLE><PARAGRAPH>Smooth, seamless delivery of video picture should be the norm using RSVP, and a RSVP-capable video application. If picture delivery becomes jerky or interrupted, run <COMMAND>rstat</COMMAND> to see what reservations are in place on that machine. See the<REFPAGE>&space;rstat(1M)</REFPAGE> reference page for explanation of output. </PARAGRAPH>
</SECTION3>
</SECTION2>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE><XREFTARGET ID="41663">Troubleshooting Your Ethernet Connection</TITLE><PARAGRAPH>This section addresses some of the common Ethernet-related problems: <INDEXTARGET ID="03.setup80"><!-- POSTPROCESSDATA: 03.setup80|Ethernet, testing --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><XREF IDREF="16499" TYPE="TITLE">&ldquo;Troubleshooting Cable Problems&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="39948" TYPE="TITLE">&ldquo;Troubleshooting Late-Collision Problems&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="65912" TYPE="TITLE">&ldquo;Troubleshooting Packet Size Problems&rdquo;</XREF></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><XREF IDREF="15284" TYPE="TITLE">&ldquo;Troubleshooting Server Contact Problems&rdquo;</XREF></PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>See also &ldquo;Troubleshooting System Configuration Using System Error Messages&rdquo; in <EXTREF IDREF="97829" BOOK="IA_ConfigOps" FILE="" HDG="97829" INFO="">IRIX Admin: System Configuration and Operation</EXTREF>
.</PARAGRAPH>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="16499">Troubleshooting Cable Problems</TITLE><PARAGRAPH>Unplugged or loose cables are the most common problem that causes Ethernet-related error messages. For example:</PARAGRAPH>
<CODE>
unix: <VARIABLE>&lt;ethernet_device></VARIABLE>: no carrier: check Ethernet cable
</CODE>
<PARAGRAPH>This message means that the carrier was not detected when attempting to transmit. One recommendation is to check to see if the Ethernet cable is unplugged from the back of the machine. For detailed instructions on connecting the cable, see your owner's guide. You do not need to shut down the system to connect or disconnect the cable. If you re-connected the cable, test the network connection.</PARAGRAPH>
<PARAGRAPH>After determining that the transceiver cable is plugged into the back of the machine and also into the transceiver box, look for other possible reasons for failure.:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>Check the machine's transceiver. </PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Check the transceiver cable, and try swapping it out with one that is working on another machine. </PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Check for a problem with a 10baseT hub.</PARAGRAPH>
<BULLETLISTIND><BULLETIND><PARAGRAPH>Try a different port on the hub.</PARAGRAPH>
</BULLETIND>
<BULLETIND><PARAGRAPH>Try a different cable. </PARAGRAPH>
</BULLETIND>
<BULLETIND><PARAGRAPH>Try a different hub. </PARAGRAPH>
</BULLETIND>
</BULLETLISTIND>
</BULLET>
<BULLET><PARAGRAPH>If you try all the troubleshooting techniques and you still cannot access the network, contact your service provider; the network itself may be temporarily out of order.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>For more information on this error, see the reference page for <REFPAGE>ethernet(7)</REFPAGE>. </PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="39948">Troubleshooting Late-Collision Problems</TITLE><BNF><BNFRULE>Another problem related to cabling is that of late collisions. These result in errors shown in syslog detailing an error about late collisions. </BNFRULE></BNF>
<PARAGRAPH>Often the controller tried to transmit a packet but received a late collision signal from another machine. This usually indicates a problem in the Ethernet cable layout. The most frequent causes of this problem are excessively long cables and loose cable connections.</PARAGRAPH>
<PARAGRAPH>To isolate the problem, first look for violations of the Ethernet cable limits. For 10BASE5 cable (thicknet) the maximum segment length is 500 m; for 10BASE2 cable (thinnet) the maximum segment length is 200 m. The length of a transceiver cable (the cable that goes between a machine's Ethernet port and its transceiver) should not exceed 50 meters. If all cables are within the specified limits and all connectors are firmly seated, this error could indicate a hardware problem in an Ethernet controller or transceiver. Some recommendations are:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>Check other machines on the network for bad Ethernet controllers. </PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Check other machines on the network for bad transceivers. If you suspect a bad transceiver, you can try swapping in a different one that works on another system.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Check to see if removing a certain machine from the network makes the problem change or disappear. </PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="65912">Troubleshooting Packet Size Problems</TITLE><PARAGRAPH>A bad Ethernet controller somewhere on the network can cause problems by sending packets that are too large or too small, causing errors like this:</PARAGRAPH>
<CODE>
unix: <VARIABLE>&lt;ethernet_device></VARIABLE>: packet too small (length = &lt;packet size>)
</CODE>
<EXAMPLE>
unix:<VARIABLE>&space;&lt;ethernet_device></VARIABLE>: packet too large (length = &lt;packet size>)
</EXAMPLE>
<PARAGRAPH>The Ethernet controller received a packet that was smaller than the minimum packet size or larger than the maximum packet size allowed by Ethernet. This problem is caused by another machine with a bad Ethernet controller or transceiver. Some recommendations are</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>Check other machines on the network for bad Ethernet controllers. </PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Check other machines on the network for bad transceivers. I f you suspect a bad transceiver, you can try swapping in a different one that works on another system.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>Check to see if removing a certain machine from the network makes the problem change or disappear. </PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>For more information on this error, see the reference page for <REFPAGE>ethernet(7)</REFPAGE><COMMAND>.</COMMAND></PARAGRAPH>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE><XREFTARGET ID="15284">Troubleshooting Server Contact Problems</TITLE><PARAGRAPH>When your system cannot contact a network system, an error message similar to this is displayed:</PARAGRAPH>
<CODE>
portmapper not responding: giving up
</CODE>
<PARAGRAPH>This problem occurs in one of these situations:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>The system is not running.</PARAGRAPH>
<PARAGRAPH>Physically go to the system or call the system's Primary User or Administrator to check to see if the system is powered on and running.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>The network is not running. </PARAGRAPH>
<PARAGRAPH>To check, try to access another system on the network.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>The network administrator changed some information about the system or about the system's logical location on the network.</PARAGRAPH>
<PARAGRAPH>Check whether this is the case, and get the appropriate information to fix the problem.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>The system has too many users or systems using its resources. It cannot provide services to you at this time.</PARAGRAPH>
<PARAGRAPH>Contact the system's Primary User or Administrator to check on this.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>The two most common errors messages are<SCREENDISPLAY>:</SCREENDISPLAY></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH><SCREENDISPLAY>Host unreachable</SCREENDISPLAY> - usually indicates a configuration error. It is caused by<COMMAND>&space;arp</COMMAND> broadcasting the local network to convert an IP address to Ethernet address. </PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH><SCREENDISPLAY>Network unreachable - </SCREENDISPLAY>usually indicates no default or network route exists in the routing table. </PARAGRAPH>
</BULLET>
</BULLETLIST>
</SECTION2>
<SECTION2 LBL="" HELPID = ""><TITLE>Checking Additional Network Interfaces</TITLE><PARAGRAPH>If your system has more than one network interface (additional interfaces are usually fiber-optic [FDDI] links or SLIP connections or other Ethernet boards) you can easily perform the above checks on each network interface. </PARAGRAPH>
<PARAGRAPH>To check your other network interfaces, enter the <COMMAND>netstat -in</COMMAND> command. You see output similar to the following: </PARAGRAPH>
<EXAMPLE>
Name Mtu   Network    Address    Ipkts Ierrs Opkts Oerrs Coll
ec0  1500  128.70.0   128.70.0.9  15    0     15    0     24
ec1  1500  128.70.2   128.70.2.5  15    0     15    0     24
sl0  1006  (pt-to-pt) 128.70.0.9  0     0     0     0     0
lo0  8304  loopback   localhost   8101  0     8101  0     0
</EXAMPLE>
<PARAGRAPH>The second Ethernet connection is to the network 128.70.2, a different LAN from the first Ethernet connection. The address of the local station on the second LAN is 128.70.2.5. To check that connection, use the <COMMAND>ping</COMMAND> command to test the connection to another station on that network. </PARAGRAPH>
<PARAGRAPH>There is also a SLIP link running in this example. The SLIP link extends the same LAN as <SCREENDISPLAY>ec0</SCREENDISPLAY> to another system in a different location. To test this link, find the hostname or IP address of the station at the other end of the SLIP link and use the <COMMAND>ping</COMMAND> command to test connectivity.</PARAGRAPH>
<PARAGRAPH>The <SCREENDISPLAY>lo0</SCREENDISPLAY> interface is the loopback network interface on the local host.</PARAGRAPH>
<PARAGRAPH>To determine which piece of hardware controls which interface, enter the command </PARAGRAPH>
<CODE>
ls -lS /hw/net/XXN
</CODE>
<PARAGRAPH>where <VARIABLE>N </VARIABLE>is the network interface number of type <VARIABLE>XX</VARIABLE>. For example:</PARAGRAPH>
<CODE>
%<USERINPUT>&space;ls -lS /hw/net/ef0</USERINPUT>
crw-------    1 root     sys            0 Jun 6 14:14 /hw/net/ef0 -> /hw/module/4/slot/io1/baseio/pci/2/ef



</CODE>
</SECTION2>
</SECTION1>
</CHAPTER>
