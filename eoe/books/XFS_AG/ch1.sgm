<!-- Produced by version 3.12 (09/13/95) of SGI Frame/SGML translator -->
<CHAPTER LBL="1"><TITLE><XREFTARGET ID="83370">Introduction to XFS, XLV, and GRIO</TITLE><PARAGRAPH>This guide provides the information you need to get started using the new Silicon Graphics filesystem technology:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>XFS is the next-generation Silicon Graphics filesystem. Systems can use XFS filesystems exclusively or have a mixture of XFS and EFS filesystems. <INDEXTARGET ID="ch11"><!-- POSTPROCESSDATA: ch11|compatibility:EFS and XFS --><INDEXTARGET ID="ch12"><!-- POSTPROCESSDATA: ch12|XFS:compatibility with EFS --></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>The XLV volume manager provides an alternative to Silicon Graphics' existing <INDEXTARGET ID="ch13"><!-- POSTPROCESSDATA: ch13|XLV:compatibility with EFS --><INDEXTARGET ID="ch14"><!-- POSTPROCESSDATA: ch14|XLV:compatibility with XFS --><INDEXTARGET ID="ch15"><!-- POSTPROCESSDATA: ch15|XLV:relationship to <ITALICS>lv</ITALICS> --><INDEXTARGET ID="ch16"><!-- POSTPROCESSDATA: ch16|XLV:relationship to IRIS Volume Manager --><INDEXTARGET ID="ch17"><!-- POSTPROCESSDATA: ch17|IRIS Volume Manager --><COMMAND>lv</COMMAND> volume manager and to the IRIS Volume Manager software option. Both XFS and EFS filesystems can be built on XLV logical volumes.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>The guaranteed-rate I/O system (GRIO) allows applications to reserve specific I/O performance to and from the filesystem. It requires the use of an XLV logical volume and XFS filesystem.</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>This chapter highlights the major features of XFS, XLV, and GRIO.</PARAGRAPH>
<SECTION1 LBL="" HELPID = ""><TITLE>XFS Features</TITLE><PARAGRAPH>XFS is designed for use on most Silicon Graphics systems&mdash;from desktop systems to supercomputer systems. Its major features include<INDEXTARGET ID="ch18"><!-- POSTPROCESSDATA: ch18|XFS:features --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>full 64-bit file capabilities (files larger than 2 GB)</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>rapid and reliable recovery after system crashes because of the use of journaling technology</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>efficient support of large, sparse files (files with &ldquo;holes&rdquo;)</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>integrated, full-function volume manager, the XLV Volume Manager</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>extremely high I/O performance that scales well on multiprocessing systems</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>guaranteed-rate I/O for multimedia and data acquisition uses</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>compatible with existing applications and with NFS<SUPERSCRIPT>&reg;</SUPERSCRIPT></PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>user-specified block sizes ranging from 512 bytes up to 64 KB</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>Currently, XFS supports files and filesystems that grow to 2<INDEXTARGET ID="ch19"><!-- POSTPROCESSDATA: ch19|NFS:compatibility --><INDEXTARGET ID="ch110"><!-- POSTPROCESSDATA: ch110|compatibility:NFS --><INDEXTARGET ID="ch111"><!-- POSTPROCESSDATA: ch111|compatibility:32-bit programs and XFS --><SUPERSCRIPT>40</SUPERSCRIPT>-1 or 1,099,511,627,775 bytes (one terabyte). Support for filesystems up to 2<SUPERSCRIPT>63</SUPERSCRIPT>-1 bytes is planned for a future release. You can use the filesystem interfaces supplied with the IRIS Development Option (IDO) software option to write 32-bit programs that can track 64-bit position and file size. Many programs work without modification because sequential reads succeed even on files larger than 2 GB. NFS Release 5.3 and later allows you to export 64-bit XFS filesystems to other systems.</PARAGRAPH>
<PARAGRAPH>XFS uses database journaling technology to provide high reliability and rapid recovery. Recovery after a system crash is completed within a few seconds, without the use of a filesystem checker such as <INDEXTARGET ID="ch112"><!-- POSTPROCESSDATA: ch112|journaling information --><COMMAND>fsck</COMMAND>(1M). Recovery time is independent of filesystem size.</PARAGRAPH>
<PARAGRAPH>XFS is designed to be a very high performance filesystem. Under certain conditions, throughput is expected to exceed 100 MB per second. Its performance scales to complement the CHALLENGE<SUPERSCRIPT>&trade;</SUPERSCRIPT> MP architecture. While traditional files, directories, and filesystems suffer from reduced performance as they grow in size, with XFS there is no performance penalty.</PARAGRAPH>
<PARAGRAPH>You can create filesystems with block sizes ranging from 512 bytes to 64 KB. For real-time data, the maximum <INDEXTARGET ID="ch113"><!-- POSTPROCESSDATA: ch113|XFS:block sizes --><INDEXTARGET ID="ch114"><!-- POSTPROCESSDATA: ch114|block sizes:range of sizes --><INDEXTARGET ID="ch115"><!-- POSTPROCESSDATA: ch115|extent size --><ITALICS>extent</ITALICS> size is 1 GB. Filesystem extents, which provide contiguous data within a file, are configurable at file creation time using <COMMAND>fcntl</COMMAND>(2) and are multiples of the filesystem block size.</PARAGRAPH>
<PARAGRAPH>Most filesystem utilities, such as <INDEXTARGET ID="ch116"><!-- POSTPROCESSDATA: ch116|XFS:and standard utilities --><INDEXTARGET ID="ch117"><!-- POSTPROCESSDATA: ch117|XFS:utilities --><COMMAND>du</COMMAND>(1), <COMMAND>dvhtool</COMMAND>(1M), <COMMAND>ls</COMMAND>(1), <COMMAND>mount</COMMAND>(1M), <COMMAND>prtvtoc</COMMAND>(1M), and <COMMAND>umount</COMMAND>(1M), work with XFS filesystems as well as EFS filesystems with no user-visible changes. A few utilities, such as <COMMAND>df</COMMAND>(1),<COMMAND>&space;fx</COMMAND>(1M) and <COMMAND>mkfs</COMMAND>(1M) have additional features for XFS. The filesystem utilities <COMMAND>clri</COMMAND>(1M), <COMMAND>fsck</COMMAND>(1M),<COMMAND>&space;findblk</COMMAND>(1M), and <COMMAND>ncheck</COMMAND>(1M) are not used with XFS filesystems.</PARAGRAPH>
<PARAGRAPH>For backup and restore, the standard IRIX utilities <INDEXTARGET ID="ch118"><!-- POSTPROCESSDATA: ch118|backup and restore:utilities --><INDEXTARGET ID="ch119"><!-- POSTPROCESSDATA: ch119|compatibility:<ITALICS>dump/restore</ITALICS> and filesystem type --><INDEXTARGET ID="ch120"><!-- POSTPROCESSDATA: ch120|<ITALICS>xfsrestore</ITALICS> utility:and EFS filesystems --><INDEXTARGET ID="ch121"><!-- POSTPROCESSDATA: ch121|<ITALICS>restore</ITALICS> utility:and XFS filesystems --><INDEXTARGET ID="ch122"><!-- POSTPROCESSDATA: ch122|XFS:<ITALICS>restore</ITALICS> compatibility --><INDEXTARGET ID="ch123"><!-- POSTPROCESSDATA: ch123|<ITALICS>dump</ITALICS> utility:when to use --><COMMAND>Backup</COMMAND>(1),<COMMAND>&space;bru</COMMAND>(1),<COMMAND>&space;cpio</COMMAND>(1), <COMMAND>Restore</COMMAND>(1), and <COMMAND>tar</COMMAND>(1) and the optional software product NetWorker<SUPERSCRIPT>&reg;</SUPERSCRIPT> for IRIX can be used for files less than 2 GB in size. To dump XFS filesystems, the new utility <COMMAND>xfsdump</COMMAND>(1M) must be used instead of <COMMAND>dump</COMMAND>(1M). Restoring from these dumps is done using <COMMAND>xfsrestore</COMMAND>(1M). See <XREF IDREF="98007" TYPE="TABLE">Table&nbsp;3-1</XREF> and <XREF IDREF="17753" TYPE="TABLE">Table&nbsp;3-2</XREF> in <XREF IDREF="45688" TYPE="TITLE">Chapter&nbsp;3, &ldquo;Dumping and Restoring XFS Filesystems,&rdquo;</XREF> for more information about the relationships between <COMMAND>xfsdump</COMMAND>, <COMMAND>xfsrestore</COMMAND>, <COMMAND>dump</COMMAND>, and <COMMAND>restore</COMMAND> on XFS and EFS filesystems.</PARAGRAPH>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE>XLV Features</TITLE><PARAGRAPH>The new XLV Volume Manager provides these advantages when XLV logical volumes are used as raw devices, when XFS filesystems are created on them, and when EFS filesystems are created on them:<INDEXTARGET ID="ch124"><!-- POSTPROCESSDATA: ch124|XLV:features --><INDEXTARGET ID="ch125"><!-- POSTPROCESSDATA: ch125|XLV:with EFS --></PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>support for very large logical volumes&mdash;up to one terabyte.</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>support for disk striping for higher I/O performance</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>plexing (mirroring) for higher system and data reliability</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>online volume reconfigurations, such as increasing the size of a volume, for less system downtime</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>With XFS filesystems, XLV provides these additional advantages:</PARAGRAPH>
<BULLETLIST><BULLET><PARAGRAPH>filesystem journal records on a separate partition, which can be on a separate disk, for maximum performance</PARAGRAPH>
</BULLET>
<BULLET><PARAGRAPH>access to real-time data</PARAGRAPH>
</BULLET>
</BULLETLIST>
<PARAGRAPH>When XFS filesystems are used on XLV volumes, each logical volume can contain up to three subvolumes: data (required), log, and real-time. The data subvolume normally contains user files and filesystem <INDEXTARGET ID="ch126"><!-- POSTPROCESSDATA: ch126|metadata, filesystem --><ITALICS>metadata</ITALICS> (inodes, indirect blocks, directories, and free space blocks). The log subvolume is used for filesystem journal records. If there is no log subvolume, journal records are placed in the data subvolume. Data with special I/O bandwidth requirements, such as video, can be placed on the real-time subvolume.</PARAGRAPH>
<PARAGRAPH>XLV increases system reliability and availability by enabling you to add or remove a plex, increase the size of (grow) a volume, and replace failed elements of a plexed volume without taking the volume out of service.</PARAGRAPH>
<PARAGRAPH>Converting from <INDEXTARGET ID="ch127"><!-- POSTPROCESSDATA: ch127|IRIS Volume Manager --><INDEXTARGET ID="ch128"><!-- POSTPROCESSDATA: ch128|<ITALICS>lv</ITALICS> logical volumes --><COMMAND>lv</COMMAND> logical volumes to XLV logical volumes is easy. Using the programs <COMMAND>lv_to_xlv</COMMAND>(1M) and <COMMAND>xlv_make</COMMAND>(1M), you can convert <COMMAND>lv</COMMAND> logical volumes to XLV without having to dump and restore your data. Converting from IRIS Volume Manager volumes to XLV is beyond the scope of this guide.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>The plexing feature of XLV is available only when you purchase the Disk Plexing Option software option. See the <INDEXTARGET ID="ch129"><!-- POSTPROCESSDATA: ch129|plexes:Disk Plexing Option --><INDEXTARGET ID="ch130"><!-- POSTPROCESSDATA: ch130|NetLS licenses:Disk Plexing Option --><DOCTITLE>plexing Release Notes</DOCTITLE> for information on purchasing this software option and obtaining the required NetLS license.</NOTE>
</SECTION1>
<SECTION1 LBL="" HELPID = ""><TITLE>GRIO Features</TITLE><PARAGRAPH>The guaranteed-rate I/O system (GRIO) allows applications to reserve specific I/O bandwidth to and from the filesystem. Applications request guarantees by providing a file descriptor, data rate, duration, and start time. The filesystem calculates the performance available and, if the request is granted, guarantees that the requested level of performance can be met for a given time. This frees programmers from having to predict the performance and is critical for media delivery systems such as video-on-demand.<INDEXTARGET ID="ch131"><!-- POSTPROCESSDATA: ch131|GRIO:features --><INDEXTARGET ID="ch132"><!-- POSTPROCESSDATA: ch132|GRIO:description --></PARAGRAPH>
<PARAGRAPH>Guarantees can be <ITALICS>hard</ITALICS> or <ITALICS>soft</ITALICS>, a way of expressing the trade-off between reliability and performance. Hard guarantees deliver the requested performance, but with some possibility of error in the data (due to the requirements for turning off disk drive self-diagnostics and error-correction firmware). Soft guarantees allow the disk drive to retry operations in the event of an error, but this can possibly result in missing the rate guarantee. Hard guarantees place greater restrictions on the system hardware configuration.</PARAGRAPH>
<NOTE><PREFIX>Note</PREFIX>By default, IRIX supports four GRIO streams (concurrent uses of GRIO). To increase the number of streams to 40, you can purchase the High Performance Guaranteed-Rate I/O&mdash;5-40 Streams software option. For more streams, you can purchase the High Performance Guaranteed-Rate I/O&mdash;Unlimited Streams software option. See the <INDEXTARGET ID="ch133"><!-- POSTPROCESSDATA: ch133|NetLS licenses:High Performance Guaranteed-Rate I/O --><DOCTITLE>grio Release Notes</DOCTITLE> for information on purchasing these software options and obtaining the required NetLS licenses.</NOTE>
</SECTION1>
</CHAPTER>
