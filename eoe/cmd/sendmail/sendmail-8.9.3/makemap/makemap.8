.\" Copyright (c) 1998 Sendmail, Inc.  All rights reserved.
.\" Copyright (c) 1988, 1991, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" By using this file, you agree to the terms and conditions set
.\" forth in the LICENSE file which can be found at the top level of
.\" the sendmail distribution.
.\"
.\"
.\"     @(#)makemap.8	8.12 (Berkeley) 11/13/1998
.\"
.Dd November 16, 1992
.Dt MAKEMAP 8
.Os BSD 4.4
.Sh NAME
.Nm makemap
.Nd create database maps for sendmail
.Sh SYNOPSIS
.Nm
.Op Fl N
.if \nP .Op Fl c Ar cachesize
.Op Fl d
.Op Fl f
.if \nP .Op Fl l
.Op Fl o
.Op Fl r
.Op Fl s
.Op Fl v
.Ar maptype
.Ar mapname
.Sh DESCRIPTION
.Nm
creates the database maps used by the keyed map lookups in
.Xr sendmail 8 .
It reads input from the standard input
and outputs them to the indicated
.Ar mapname .
.Pp
Depending on how it is compiled,
.Nm
handles up to three different database formats,
selected using the
.Ar maptype
parameter.
They may be
.Bl -tag -width Fl
.It Li dbm
DBM format maps.
This requires the
.Xr ndbm 3
library.
.It Li btree
B-Tree format maps.
This requires the new Berkeley DB
library.
.It Li hash
Hash format maps.
This also requires the Berkeley DB
library.
.El
.Pp
In all cases,
.Nm
reads lines from the standard input consisting of two
words separated by white space.
The first is the database key,
the second is the value.
The value may contain
``%\fIn\fP''
strings to indicated parameter substitution.
Literal percents should be doubled
(``%%'').
Blank lines and lines beginning with ``#'' are ignored.
.Ss Flags
.Bl -tag -width Fl
.It Fl N
Include the null byte that terminates strings
in the map.
This must match the \-N flag in the sendmail.cf
``K'' line.
.if \nP \
\{\
.It Fl c
Use the specified hash and B-Tree cache size.
.\}
.It Fl d
Allow duplicate keys in the map.
This is only allowed on B-Tree format maps.
If two identical keys are read,
they will both be inserted into the map.
.It Fl f
Normally all upper case letters in the key
are folded to lower case.
This flag disables that behaviour.
This is intended to mesh with the
\-f flag in the
\fBK\fP
line in sendmail.cf.
The value is never case folded.
.if \nP \
\{\
.It Fl l
List supported map types.
.\}
.It Fl o
Append to an old file.
This allows you to augment an existing file.
.It Fl r
Allow replacement of existing keys.
Normally
.Nm
complains if you repeat a key,
and does not do the insert.
.It Fl s
Ignore safety checks on maps being created.
This includes checking for hard or symbolic
links in world writable directories.
.It Fl v
Verbosely print what it is doing.
.El
.Sh SEE ALSO
.Xr sendmail 8
.Sh HISTORY
The
.Nm
command appeared in
.Bx 4.4 .
