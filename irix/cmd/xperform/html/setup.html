
<html>
<head>
	<title>
		Banyan 6.2 Desktop Performance Setup
	</title>
</head>
<body>

<table>
<tr>
<td>
<img hspace=10 src="banyan.gif">
</td>
<td>
<h1>
Banyan 6.2 Desktop Performance Setup
</h1>
</td>
</table>

<p>
<br clear=all>
<br>

This page is a "how to" guide for running xperform.  
I'm not going to get into hand-holding details.  After all, if you're 
debugging the OS you should be able to use it.
<p>

For a bit of background, xperform is a C program that simulates and
observes X events.  To launch applications it simulates mouse clicks.  
It follows a script which tells it where and when to click.  To time
an application's launch it watches for a certain number of MapNotify 
or ConfigureNotify X messages.  The number is dependent on the application.
As xperform runs it saves its timing information to the file "log".  It
also maintains its current location in the script file via the file 
".xperform".
<p>

Xperform is run under the user "xperf".  
To eliminate confounding variables, we login before each test and logout
afterward.  In order to logout and login between runs there must be an 
/etc/autologin file storing the name of which user to autologin as and 
an /etc/autologin.on file marking that autologin is on.  This file is removed 
after each login, so xperform recreates it during its run.  Xperform is
launched by the .sgisession file after a small sleep.
<p>

To start xperform, the .sgisession file must be present as well as a properly
setup /etc/autologin and /etc/autologin.on.  To stop xperform, simply rename
.sgisession to sgisession.
<p>

<ol>
<li>Mkfs the disk
<li>Install selected subsystems (listed in 
<a href="versions.html">versions.html</a>)
<li>Configure the machine to run on the network
<li>Make sure yp is chkconfig on (often must be done by hand) ("netless" has yp off)
<li>Make sure videod is chkconfig on (must be done by hand)
<li>Make a user called "xperf"
<li>Login as xperf
<li>Copy the files from guest@blana:/var/www/htdocs/SQA/xperform/scripts 
to xperf's home directory
<li>mv showcaserc .showcaserc
<li>mv sgisession .sgisession
<li>su
<li>For 5.3: mv dview53 /usr/bin/dview
<li>For 5.3: rm dview62
<li>For 6.2: mv dview62 /usr/bin/dview
<li>For 6.2: rm dview53
<li>/usr/etc/rqs -force_requickstart /usr/bin/dview
<li>Put "showcase", "MediaMail", "clock", "xcalc", and "dview" icons 
on the desktop
<li>Start MediaMail and select OK at the creation of xperf's mailbox
<li>rm /var/spool/cron/crontabs/*
<li>mv resolv.conf /etc/resolv.conf (remove it for "netless")
<li>chown root xperform
<li>chmod 04755 xperform (sets suid)
<li>echo xperf > /etc/autologin
<li>echo > /etc/autologin.on
<li>With no windows open, select Desktop->Customize->Windows->Explicitly and
click on Set Home Session
<li>Reboot ("netless" configurations turn off networking first)
</ol>

New:
<ol>
<li>rqs xperform under 6.2
<li>chkconfig sendmail off under 6.2
<li>decide about errnotify (/var/X11/xdm/Xsession.dt)
</ol>

If you are using xperform for reasons other than true performance testing
you need not mkfs and be so careful about installing the proper subsystems.
<p>

If you are going to compare against numbers generated by the SQA group, please
contact <a href="mailto:jhunter@sgi.com">jhunter@engr</a> to be sure 
your hardware setup (CPU, hard drive, memory configuration, etc.) is 
identical.
<p>

Now available via ftp: <a href="ftp:xperform.tar.Z">the source code</a>.
<p>

Questions or comments to
<a href="mailto:jhunter@sgi.com">jhunter@engr</a> or 
<a href="mailto:jgrisham@engr.sgi.com">jgrisham@engr</a>.

</body>
</html>
